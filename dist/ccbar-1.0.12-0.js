!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CCBAR=t():e.CCBAR=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=60)}([function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.STATUS_EARLY=1]="STATUS_EARLY",e[e.STATUS_CONFIRMED=2]="STATUS_CONFIRMED"}(t.DialogStatus||(t.DialogStatus={})),function(e){e[e.STATUS_NULL=0]="STATUS_NULL",e[e.STATUS_INVITE_SENT=1]="STATUS_INVITE_SENT",e[e.STATUS_1XX_RECEIVED=2]="STATUS_1XX_RECEIVED",e[e.STATUS_INVITE_RECEIVED=3]="STATUS_INVITE_RECEIVED",e[e.STATUS_WAITING_FOR_ANSWER=4]="STATUS_WAITING_FOR_ANSWER",e[e.STATUS_ANSWERED=5]="STATUS_ANSWERED",e[e.STATUS_WAITING_FOR_PRACK=6]="STATUS_WAITING_FOR_PRACK",e[e.STATUS_WAITING_FOR_ACK=7]="STATUS_WAITING_FOR_ACK",e[e.STATUS_CANCELED=8]="STATUS_CANCELED",e[e.STATUS_TERMINATED=9]="STATUS_TERMINATED",e[e.STATUS_ANSWERED_WAITING_FOR_PRACK=10]="STATUS_ANSWERED_WAITING_FOR_PRACK",e[e.STATUS_EARLY_MEDIA=11]="STATUS_EARLY_MEDIA",e[e.STATUS_CONFIRMED=12]="STATUS_CONFIRMED"}(t.SessionStatus||(t.SessionStatus={})),function(e){e[e.ClientContext=0]="ClientContext",e[e.ConfigurationError=1]="ConfigurationError",e[e.Dialog=2]="Dialog",e[e.DigestAuthentication=3]="DigestAuthentication",e[e.DTMF=4]="DTMF",e[e.IncomingMessage=5]="IncomingMessage",e[e.IncomingRequest=6]="IncomingRequest",e[e.IncomingResponse=7]="IncomingResponse",e[e.InvalidStateError=8]="InvalidStateError",e[e.InviteClientContext=9]="InviteClientContext",e[e.InviteServerContext=10]="InviteServerContext",e[e.Logger=11]="Logger",e[e.LoggerFactory=12]="LoggerFactory",e[e.MethodParameterError=13]="MethodParameterError",e[e.NameAddrHeader=14]="NameAddrHeader",e[e.NotSupportedError=15]="NotSupportedError",e[e.OutgoingRequest=16]="OutgoingRequest",e[e.Parameters=17]="Parameters",e[e.PublishContext=18]="PublishContext",e[e.ReferClientContext=19]="ReferClientContext",e[e.ReferServerContext=20]="ReferServerContext",e[e.RegisterContext=21]="RegisterContext",e[e.RenegotiationError=22]="RenegotiationError",e[e.RequestSender=23]="RequestSender",e[e.ServerContext=24]="ServerContext",e[e.Session=25]="Session",e[e.SessionDescriptionHandler=26]="SessionDescriptionHandler",e[e.SessionDescriptionHandlerError=27]="SessionDescriptionHandlerError",e[e.SessionDescriptionHandlerObserver=28]="SessionDescriptionHandlerObserver",e[e.Subscription=29]="Subscription",e[e.Transport=30]="Transport",e[e.UA=31]="UA",e[e.URI=32]="URI"}(t.TypeStrings||(t.TypeStrings={})),function(e){e[e.STATUS_INIT=0]="STATUS_INIT",e[e.STATUS_STARTING=1]="STATUS_STARTING",e[e.STATUS_READY=2]="STATUS_READY",e[e.STATUS_USER_CLOSED=3]="STATUS_USER_CLOSED",e[e.STATUS_NOT_READY=4]="STATUS_NOT_READY"}(t.UAStatus||(t.UAStatus={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33);!function(e){e.USER_AGENT=n.title+"/"+n.version,e.SIP="sip",e.SIPS="sips",function(e){e.CONNECTION_ERROR="Connection Error",e.INTERNAL_ERROR="Internal Error",e.REQUEST_TIMEOUT="Request Timeout",e.SIP_FAILURE_CODE="SIP Failure Code",e.ADDRESS_INCOMPLETE="Address Incomplete",e.AUTHENTICATION_ERROR="Authentication Error",e.BUSY="Busy",e.DIALOG_ERROR="Dialog Error",e.INCOMPATIBLE_SDP="Incompatible SDP",e.NOT_FOUND="Not Found",e.REDIRECTED="Redirected",e.REJECTED="Rejected",e.UNAVAILABLE="Unavailable",e.BAD_MEDIA_DESCRIPTION="Bad Media Description",e.CANCELED="Canceled",e.EXPIRES="Expires",e.NO_ACK="No ACK",e.NO_ANSWER="No Answer",e.NO_PRACK="No PRACK",e.RTP_TIMEOUT="RTP Timeout",e.USER_DENIED_MEDIA_ACCESS="User Denied Media Access",e.WEBRTC_ERROR="WebRTC Error",e.WEBRTC_NOT_SUPPORTED="WebRTC Not Supported"}(e.causes||(e.causes={})),function(e){e.REQUIRED="required",e.SUPPORTED="supported",e.UNSUPPORTED="none"}(e.supported||(e.supported={})),e.SIP_ERROR_CAUSES={ADDRESS_INCOMPLETE:[484],AUTHENTICATION_ERROR:[401,407],BUSY:[486,600],INCOMPATIBLE_SDP:[488,606],NOT_FOUND:[404,604],REDIRECTED:[300,301,302,305,380],REJECTED:[403,603],UNAVAILABLE:[480,410,408,430]},e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK",e.REASON_PHRASE={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},e.OPTION_TAGS={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0},function(e){e.INFO="info",e.RTP="rtp"}(e.dtmfType||(e.dtmfType={}))}(t.C||(t.C={}))},function(e,t,r){"use strict";var n=r(0),i=r(47);function o(){i.call(this)}n(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var r=this,n=!1;this.on(e,function i(){r.removeListener(e,i),n||(n=!0,t.apply(this,arguments))})},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var r=arguments.length,n=new Array(r-1),i=1;i<r;i++)n[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,n)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(2),o=r(9);!function(e){e.defer=function(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e},e.reducePromises=function(e,t){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve(t))},e.str_utf8_length=function(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length},e.generateFakeSDP=function(e){if(e){var t=e.indexOf("o="),r=e.indexOf("\r\n",t);return"v=0\r\n"+e.slice(t,r)+"\r\ns=-\r\nt=0 0\r\nc=IN IP4 0.0.0.0"}},e.isDecimal=function(e){var t=parseInt(e,10);return!isNaN(t)&&parseFloat(e)===t},e.createRandomToken=function(e,t){void 0===t&&(t=32);for(var r="",n=0;n<e;n++)r+=Math.floor(Math.random()*t).toString(t);return r},e.newTag=function(){return e.createRandomToken(10)},e.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.floor(16*Math.random());return("x"===e?t:t%4+8).toString(16)})},e.normalizeTarget=function(t,r){if(t){if(t.type===i.TypeStrings.URI)return t;if("string"==typeof t){var s=t.split("@"),a=void 0,c=void 0;switch(s.length){case 1:if(!r)return;a=t,c=r;break;case 2:a=s[0],c=s[1];break;default:a=s.slice(0,s.length-1).join("@"),c=s[s.length-1]}return a=a.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(a)&&(a=a.replace(/[\-\.\(\)]/g,"")),t=n.C.SIP+":"+e.escapeUser(a)+"@"+c,o.Grammar.URIParse(t)}}},e.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},e.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length,i="",o=0;o<n;o++)0!==o&&(i+="-"),i+=r[o].charAt(0).toUpperCase()+r[o].substring(1);return t[i]&&(i=t[i]),i},e.sipErrorCause=function(e){for(var t in n.C.SIP_ERROR_CAUSES)if(-1!==n.C.SIP_ERROR_CAUSES[t].indexOf(e))return n.C.causes[t];return n.C.causes.SIP_FAILURE_CODE},e.getReasonPhrase=function(e,t){return t||n.C.REASON_PHRASE[e]||""},e.getReasonHeaderValue=function(t,r){return"SIP;cause="+t+';text="'+(r=e.getReasonPhrase(t,r))+'"'},e.getCancelReason=function(t,r){if(t&&t<200||t>699)throw new TypeError("Invalid statusCode: "+t);if(t)return e.getReasonHeaderValue(t,r)},e.buildStatusLine=function(t,r){if(!t||t<100||t>699)throw new TypeError("Invalid statusCode: "+t);if(r&&"string"!=typeof r&&!(r instanceof String))throw new TypeError("Invalid reason: "+r);return"SIP/2.0 "+t+" "+(r=e.getReasonPhrase(t,r))+"\r\n"}}(t.Utils||(t.Utils={}))},function(e,t,r){"use strict";var n=r(46);e.exports={getOrigin:function(e){if(!e)return null;var t=new n(e);if("file:"===t.protocol)return null;var r=t.port;return r||(r="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){var r=this.getOrigin(e)===this.getOrigin(t);return r},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=f(c,u);for(r=0;r<u;++r)o(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return i(t,e),t}(Error);t.Exception=s,function(e){var t=function(e){function t(t){return e.call(this,t||"Unspecified transport error.")||this}return i(t,e),t}(s);e.TransportError=t}(t.Exceptions||(t.Exceptions={}));var a=function(e){function t(t,r,n){var i=e.call(this,n)||this;return i.code=t,i.name=r,i.message=n,i}return i(t,e),t}(s);!function(e){var t=function(e){function t(t,r){var n=e.call(this,1,"CONFIGURATION_ERROR",r?"Invalid value "+JSON.stringify(r)+" for parameter '"+t+"'":"Missing parameter: "+t)||this;return n.type=o.TypeStrings.ConfigurationError,n.parameter=t,n.value=r,n}return i(t,e),t}(a);e.ConfigurationError=t;var r=function(e){function t(t){var r=e.call(this,2,"INVALID_STATE_ERROR","Invalid status: "+t)||this;return r.type=o.TypeStrings.InvalidStateError,r.status=t,r}return i(t,e),t}(a);e.InvalidStateError=r;var n=function(e){function t(t){var r=e.call(this,3,"NOT_SUPPORTED_ERROR",t)||this;return r.type=o.TypeStrings.NotSupportedError,r}return i(t,e),t}(a);e.NotSupportedError=n;var s=function(e){function t(t){var r=e.call(this,5,"RENEGOTIATION_ERROR",t)||this;return r.type=o.TypeStrings.RenegotiationError,r}return i(t,e),t}(a);e.RenegotiationError=s;var c=function(e){function t(t,r,n){var i=e.call(this,6,"METHOD_PARAMETER_ERROR",n?"Invalid value "+JSON.stringify(n)+" for parameter '"+r+"'":"Missing parameter: "+r)||this;return i.type=o.TypeStrings.MethodParameterError,i.method=t,i.parameter=r,i.value=n,i}return i(t,e),t}(a);e.MethodParameterError=c;var u=function(e){function t(t,r,n){var i=e.call(this,8,"SESSION_DESCRIPTION_HANDLER_ERROR",n||"Error with Session Description Handler")||this;return i.type=o.TypeStrings.SessionDescriptionHandlerError,i.method=t,i.error=r,i}return i(t,e),t}(a);e.SessionDescriptionHandlerError=u}(t.Exceptions||(t.Exceptions={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(62);!function(e){e.parse=function(e,t){var r={startRule:t};try{n.parse(e,r)}catch(e){r.data=-1}return r.data},e.nameAddrHeaderParse=function(t){var r=e.parse(t,"Name_Addr_Header");return-1!==r?r:void 0},e.URIParse=function(t){var r=e.parse(t,"SIP_URI");return-1!==r?r:void 0}}(t.Grammar||(t.Grammar={}))},function(e,t,r){(function(e,n){var i;(function(){var o=r(85),s={function:!0,object:!0},a=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,u=a&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof n&&n;function l(e,t){e||(e=c.Object()),t||(t=c.Object());var r=e.Number||c.Number,n=e.String||c.String,i=e.Object||c.Object,o=e.Date||c.Date,a=e.SyntaxError||c.SyntaxError,u=e.TypeError||c.TypeError,h=e.Math||c.Math,d=e.JSON||c.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,f=i.prototype,g=f.toString,m=f.hasOwnProperty;function v(e,t){try{e()}catch(e){t&&t()}}var y=new o(-0xc782b5b800cec);function b(e){if(null!=b[e])return b[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=b("json-stringify")&&b("date-serialization")&&b("json-parse");else if("date-serialization"==e){if(i=b("json-stringify")&&y){var s=t.stringify;v(function(){i='"-271821-04-20T00:00:00.000Z"'==s(new o(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new o(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new o(-1))})}}else{var a,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u="function"==typeof(s=t.stringify);u&&((a=function(){return 1}).toJSON=a,v(function(){u="0"===s(0)&&"0"===s(new r)&&'""'==s(new n)&&s(g)===p&&s(p)===p&&s()===p&&"1"===s(a)&&"[1]"==s([a])&&"[null]"==s([p])&&"null"==s(null)&&"[null,null,null]"==s([p,g,null])&&s({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==c&&"1"===s(null,a)&&"[\n 1,\n 2\n]"==s([1,2],null,1)},function(){u=!1})),i=u}if("json-parse"==e){var l,h=t.parse;"function"==typeof h&&v(function(){0!==h("0")||h(!1)||(a=h(c),(l=5==a.a.length&&1===a.a[0])&&(v(function(){l=!h('"\t"')}),l&&v(function(){l=1!==h("01")}),l&&v(function(){l=1!==h("1.")})))},function(){l=!1}),i=l}}return b[e]=!!i}if(v(function(){y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}),b["bug-string-char-index"]=b["date-serialization"]=b.json=b["json-stringify"]=b["json-parse"]=null,!b("json")){var T=b("bug-string-char-index"),S=function(e,t){var r,n,i,o=0;for(i in(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r)m.call(n,i)&&o++;return r=n=null,o?S=function(e,t){var r,n,i="[object Function]"==g.call(e);for(r in e)i&&"prototype"==r||!m.call(e,r)||(n="constructor"===r)||t(r);(n||m.call(e,r="constructor"))&&t(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],S=function(e,t){var r,i,o="[object Function]"==g.call(e),a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||m;for(r in e)o&&"prototype"==r||!a.call(e,r)||t(r);for(i=n.length;r=n[--i];)a.call(e,r)&&t(r)}),S(e,t)};if(!b("json-stringify")&&!b("date-serialization")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w=function(e,t){return("000000"+(t||0)).slice(-e)},E=function(e){var t,r,n,i,o,s,a,c,u;if(y)t=function(e){r=e.getUTCFullYear(),n=e.getUTCMonth(),i=e.getUTCDate(),s=e.getUTCHours(),a=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var l=h.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return d[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){for(i=l(e/864e5),r=l(i/365.2425)+1970-1;p(r+1,0)<=i;r++);for(n=l((i-p(r,0))/30.42);p(r,n+1)<=i;n++);i=1+i-p(r,n),s=l((o=(e%864e5+864e5)%864e5)/36e5)%24,a=l(o/6e4)%60,c=l(o/1e3)%60,u=o%1e3}}return(E=function(e){return e>-1/0&&e<1/0?(t(e),e=(r<=0||r>=1e4?(r<0?"-":"+")+w(6,r<0?-r:r):w(4,r))+"-"+w(2,n+1)+"-"+w(2,i)+"T"+w(2,s)+":"+w(2,a)+":"+w(2,c)+"."+w(3,u)+"Z",r=n=i=s=a=c=u=null):e=null,e})(e)};if(b("json-stringify")&&!b("date-serialization")){function _(e){return E(this)}var A=t.stringify;t.stringify=function(e,t,r){var n=o.prototype.toJSON;o.prototype.toJSON=_;var i=A(e,t,r);return o.prototype.toJSON=n,i}}else{var x=function(e){var t=e.charCodeAt(0),r=C[t];return r||"\\u00"+w(2,t.toString(16))},R=/[\x00-\x1f\x22\x5c]/g,I=function(e){return R.lastIndex=0,'"'+(R.test(e)?e.replace(R,x):e)+'"'},O=function(e,t,r,n,i,s,a){var c,l,h,d,f,m,y,b,T;if(v(function(){c=t[e]}),"object"==typeof c&&c&&(c.getUTCFullYear&&"[object Date]"==g.call(c)&&c.toJSON===o.prototype.toJSON?c=E(c):"function"==typeof c.toJSON&&(c=c.toJSON(e))),r&&(c=r.call(t,e,c)),c==p)return c===p?c:"null";switch("object"==(l=typeof c)&&(h=g.call(c)),h||l){case"boolean":case"[object Boolean]":return""+c;case"number":case"[object Number]":return c>-1/0&&c<1/0?""+c:"null";case"string":case"[object String]":return I(""+c)}if("object"==typeof c){for(y=a.length;y--;)if(a[y]===c)throw u();if(a.push(c),d=[],b=s,s+=i,"[object Array]"==h){for(m=0,y=c.length;m<y;m++)f=O(m,c,r,n,i,s,a),d.push(f===p?"null":f);T=d.length?i?"[\n"+s+d.join(",\n"+s)+"\n"+b+"]":"["+d.join(",")+"]":"[]"}else S(n||c,function(e){var t=O(e,c,r,n,i,s,a);t!==p&&d.push(I(e)+":"+(i?" ":"")+t)}),T=d.length?i?"{\n"+s+d.join(",\n"+s)+"\n"+b+"}":"{"+d.join(",")+"}":"{}";return a.pop(),T}};t.stringify=function(e,t,r){var n,i,o,a;if(s[typeof t]&&t)if("[object Function]"==(a=g.call(t)))i=t;else if("[object Array]"==a){o={};for(var c,u=0,l=t.length;u<l;)c=t[u++],"[object String]"!=(a=g.call(c))&&"[object Number]"!=a||(o[c]=1)}if(r)if("[object Number]"==(a=g.call(r))){if((r-=r%1)>0)for(r>10&&(r=10),n="";n.length<r;)n+=" "}else"[object String]"==a&&(n=r.length<=10?r:r.slice(0,10));return O("",((c={})[""]=e,c),i,o,n,"",[])}}}if(!b("json-parse")){var N,D,P=n.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw N=D=null,a()},H=function(){for(var e,t,r,n,i,o=D,s=o.length;N<s;)switch(i=o.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=T?o.charAt(N):o[N],N++,e;case 34:for(e="@",N++;N<s;)if((i=o.charCodeAt(N))<32)U();else if(92==i)switch(i=o.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=k[i],N++;break;case 117:for(t=++N,r=N+4;N<r;N++)(i=o.charCodeAt(N))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||U();e+=P("0x"+o.slice(t,N));break;default:U()}else{if(34==i)break;for(i=o.charCodeAt(N),t=N;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++N);e+=o.slice(t,N)}if(34==o.charCodeAt(N))return N++,e;U();default:if(t=N,45==i&&(n=!0,i=o.charCodeAt(++N)),i>=48&&i<=57){for(48==i&&((i=o.charCodeAt(N+1))>=48&&i<=57)&&U(),n=!1;N<s&&((i=o.charCodeAt(N))>=48&&i<=57);N++);if(46==o.charCodeAt(N)){for(r=++N;r<s&&!((i=o.charCodeAt(r))<48||i>57);r++);r==N&&U(),N=r}if(101==(i=o.charCodeAt(N))||69==i){for(43!=(i=o.charCodeAt(++N))&&45!=i||N++,r=N;r<s&&!((i=o.charCodeAt(r))<48||i>57);r++);r==N&&U(),N=r}return+o.slice(t,N)}n&&U();var a=o.slice(N,N+4);if("true"==a)return N+=4,!0;if("fals"==a&&101==o.charCodeAt(N+4))return N+=5,!1;if("null"==a)return N+=4,null;U()}return"$"},j=function(e){var t,r;if("$"==e&&U(),"string"==typeof e){if("@"==(T?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=H());)r?","==e?"]"==(e=H())&&U():U():r=!0,","==e&&U(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=H());)r?","==e?"}"==(e=H())&&U():U():r=!0,","!=e&&"string"==typeof e&&"@"==(T?e.charAt(0):e[0])&&":"==H()||U(),t[e.slice(1)]=j(H());return t}U()}return e},L=function(e,t,r){var n=q(e,t,r);n===p?delete e[t]:e[t]=n},q=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if("[object Array]"==g.call(i))for(n=i.length;n--;)L(g,S,i);else S(i,function(e){L(i,e,r)});return r.call(e,t,i)};t.parse=function(e,t){var r,n;return N=0,D=""+e,r=j(H()),"$"!=H()&&U(),N=D=null,t&&"[object Function]"==g.call(t)?q(((n={})[""]=r,n),"",t):r}}}return t.runInContext=l,t}if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),a&&!o)l(c,a);else{var h=c.JSON,d=c.JSON3,p=!1,f=l(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=h,c.JSON3=d,h=d=null),f}});c.JSON={parse:f.parse,stringify:f.stringify}}o&&(void 0===(i=function(){return f}.call(t,r,t,e))||(e.exports=i))}).call(this)}).call(this,r(84)(e),r(1))},function(e,t,r){"use strict";(function(t){var n=r(15),i={},o=!1,s=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,r){void 0!==t.addEventListener?t.addEventListener(e,r,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,r),t.attachEvent("on"+e,r))},detachEvent:function(e,r){void 0!==t.addEventListener?t.removeEventListener(e,r,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,r),t.detachEvent("on"+e,r))},unloadAdd:function(e){if(s)return null;var t=n.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};s||e.exports.attachEvent("unload",function(){o||(o=!0,e.exports.triggerUnloadCallbacks())})}).call(this,r(1))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(7),a=r(3),c=r(8),u=r(21);!function(e){e.Accepted="Accepted",e.Calling="Calling",e.Completed="Completed",e.Confirmed="Confirmed",e.Proceeding="Proceeding",e.Terminated="Terminated",e.Trying="Trying"}(o=t.TransactionState||(t.TransactionState={}));var l=function(e){function t(t,r,n,i,o){var s=e.call(this)||this;return s._transport=t,s._user=r,s._id=n,s._state=i,s.logger=r.loggerFactory.getLogger(o,n),s.logger.debug("Constructing "+s.typeToString()+" with id "+s.id+"."),s}return i(t,e),t.prototype.dispose=function(){this.logger.debug("Destroyed "+this.typeToString()+" with id "+this.id+".")},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kind",{get:function(){if(this instanceof d)return"ict";if(this instanceof p)return"nict";if(this instanceof g)return"ist";if(this instanceof m)return"nist";throw new Error("Invalid kind.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transport",{get:function(){return this._transport},enumerable:!0,configurable:!0}),t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t.prototype.logTransportError=function(e,t){this.logger.error(e.message),this.logger.error("Transport error occurred in "+this.typeToString()+" with id "+this.id+"."),this.logger.error(t)},t.prototype.send=function(e){var t=this;return this.transport.send(e).catch(function(e){var r;if(!(e instanceof c.Exceptions.TransportError))throw r=e&&"string"==typeof e.message?new c.Exceptions.TransportError(e.message):new c.Exceptions.TransportError,t.onTransportError(r),r;t.onTransportError(e)})},t.prototype.setState=function(e){this.logger.debug('State change to "'+e+'" on '+this.typeToString()+" with id "+this.id+"."),this._state=e,this._user.onStateChange&&this._user.onStateChange(e),this.emit("stateChanged")},t.prototype.typeToString=function(){var e="UnknownType";return this instanceof d?e="INVITE client transaction":this instanceof p?e="non-INVITE client transaction":this instanceof g?e="INVITE server transaction":this instanceof m&&(e="non-INVITE server transaction"),e},t}(s.EventEmitter);t.Transaction=l;var h=function(e){function t(r,n,i,o,s){var a=e.call(this,n,i,t.makeId(r),o,s)||this;return a._request=r,a.user=i,r.setViaHeader(a.id,n),r.transaction=a,a}return i(t,e),t.makeId=function(e){if("CANCEL"===e.method){if(!e.branch)throw new Error("Outgoing CANCEL request without a branch.");return e.branch}return"z9hG4bK"+Math.floor(1e7*Math.random())},Object.defineProperty(t.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),t.prototype.onRequestTimeout=function(){this.user.onRequestTimeout&&this.user.onRequestTimeout()},t}(l);t.ClientTransaction=h;var d=function(e){function t(t,r,n){var i=e.call(this,t,r,n,o.Calling,"sip.transaction.ict")||this;return i.ackRetransmissionCache=new Map,i.B=setTimeout(function(){return i.timer_B()},u.Timers.TIMER_B),i.send(t.toString()).catch(function(e){i.logTransportError(e,"Failed to send initial outgoing request.")}),i}return i(t,e),t.prototype.dispose=function(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),e.prototype.dispose.call(this)},t.prototype.ackResponse=function(e){var t=this,r=e.toTag;if(!r)throw new Error("To tag undefined.");var n="z9hG4bK"+Math.floor(1e7*Math.random());e.setViaHeader(n,this.transport),this.ackRetransmissionCache.set(r,e),this.send(e.toString()).catch(function(e){t.logTransportError(e,"Failed to send ACK to 2xx response.")})},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode;if(!r||r<100||r>699)throw new Error("Invalid status code "+r);switch(this.state){case o.Calling:if(r>=100&&r<=199)return this.stateTransition(o.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition(o.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(r>=300&&r<=699)return this.stateTransition(o.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case o.Proceeding:if(r>=100&&r<=199)return void(this.user.receiveResponse&&this.user.receiveResponse(e));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition(o.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(r>=300&&r<=699)return this.stateTransition(o.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case o.Accepted:if(r>=200&&r<=299){if(!this.ackRetransmissionCache.has(e.toTag))return this.ackRetransmissionCache.set(e.toTag,void 0),void(this.user.receiveResponse&&this.user.receiveResponse(e));var n=this.ackRetransmissionCache.get(e.toTag);return n?void this.send(n.toString()).catch(function(e){t.logTransportError(e,"Failed to send retransmission of ACK to 2xx response.")}):void 0}break;case o.Completed:if(r>=300&&r<=699)return void this.ack(e);break;case o.Terminated:break;default:throw new Error("Invalid state "+this.state)}var i="Received unexpected "+r+" response while in state "+this.state+".";this.logger.warn(i)},t.prototype.onTransportError=function(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(o.Terminated,!0)},t.prototype.ack=function(e){var t=this,r=this.request.ruri,n=this.request.callId,i=this.request.cseq,o=this.request.getHeader("from"),s=e.getHeader("to"),a=this.request.getHeader("via"),c=this.request.getHeader("route");if(!o)throw new Error("From undefined.");if(!s)throw new Error("To undefined.");if(!a)throw new Error("Via undefined.");var u="ACK "+r+" SIP/2.0\r\n";c&&(u+="Route: "+c+"\r\n"),u+="Via: "+a+"\r\n",u+="To: "+s+"\r\n",u+="From: "+o+"\r\n",u+="Call-ID: "+n+"\r\n",u+="CSeq: "+i+" ACK\r\n",u+="Max-Forwards: 70\r\n",u+="Content-Length: 0\r\n\r\n",this.send(u).catch(function(e){t.logTransportError(e,"Failed to send ACK to non-2xx response.")})},t.prototype.stateTransition=function(e,t){var r=this;void 0===t&&(t=!1);var n=function(){throw new Error("Invalid state transition from "+r.state+" to "+e)};switch(e){case o.Calling:n();break;case o.Proceeding:this.state!==o.Calling&&n();break;case o.Accepted:case o.Completed:this.state!==o.Calling&&this.state!==o.Proceeding&&n();break;case o.Terminated:this.state!==o.Calling&&this.state!==o.Accepted&&this.state!==o.Completed&&(t||n());break;default:n()}this.B&&(clearTimeout(this.B),this.B=void 0),o.Proceeding,e===o.Completed&&(this.D=setTimeout(function(){return r.timer_D()},u.Timers.TIMER_D)),e===o.Accepted&&(this.M=setTimeout(function(){return r.timer_M()},u.Timers.TIMER_M)),e===o.Terminated&&this.dispose(),this.setState(e)},t.prototype.timer_A=function(){},t.prototype.timer_B=function(){this.logger.debug("Timer B expired for INVITE client transaction "+this.id+"."),this.state===o.Calling&&(this.onRequestTimeout(),this.stateTransition(o.Terminated))},t.prototype.timer_D=function(){this.logger.debug("Timer D expired for INVITE client transaction "+this.id+"."),this.state===o.Completed&&this.stateTransition(o.Terminated)},t.prototype.timer_M=function(){this.logger.debug("Timer M expired for INVITE client transaction "+this.id+"."),this.state===o.Accepted&&this.stateTransition(o.Terminated)},t}(h);t.InviteClientTransaction=d;var p=function(e){function t(t,r,n){var i=e.call(this,t,r,n,o.Trying,"sip.transaction.nict")||this;return i.F=setTimeout(function(){return i.timer_F()},u.Timers.TIMER_F),i.send(t.toString()).catch(function(e){i.logTransportError(e,"Failed to send initial outgoing request.")}),i}return i(t,e),t.prototype.dispose=function(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),e.prototype.dispose.call(this)},t.prototype.receiveResponse=function(e){var t=e.statusCode;if(!t||t<100||t>699)throw new Error("Invalid status code "+t);switch(this.state){case o.Trying:if(t>=100&&t<=199)return this.stateTransition(o.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=699)return this.stateTransition(o.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case o.Proceeding:if(t>=100&&t<=199&&this.user.receiveResponse)return this.user.receiveResponse(e);if(t>=200&&t<=699)return this.stateTransition(o.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));case o.Completed:case o.Terminated:return;default:throw new Error("Invalid state "+this.state)}var r="Non-INVITE client transaction received unexpected "+t+" response while in state "+this.state+".";this.logger.warn(r)},t.prototype.onTransportError=function(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(o.Terminated,!0)},t.prototype.stateTransition=function(e,t){var r=this;void 0===t&&(t=!1);var n=function(){throw new Error("Invalid state transition from "+r.state+" to "+e)};switch(e){case o.Trying:n();break;case o.Proceeding:this.state!==o.Trying&&n();break;case o.Completed:this.state!==o.Trying&&this.state!==o.Proceeding&&n();break;case o.Terminated:this.state!==o.Trying&&this.state!==o.Proceeding&&this.state!==o.Completed&&(t||n());break;default:n()}e===o.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(function(){return r.timer_K()},u.Timers.TIMER_K)),e===o.Terminated&&this.dispose(),this.setState(e)},t.prototype.timer_F=function(){this.logger.debug("Timer F expired for non-INVITE client transaction "+this.id+"."),this.state!==o.Trying&&this.state!==o.Proceeding||(this.onRequestTimeout(),this.stateTransition(o.Terminated))},t.prototype.timer_K=function(){this.state===o.Completed&&this.stateTransition(o.Terminated)},t}(h);t.NonInviteClientTransaction=p;var f=function(e){function t(t,r,n,i,o){var s=e.call(this,r,n,t.viaBranch,i,o)||this;return s._request=t,s.user=n,t.transaction=s,s}return i(t,e),Object.defineProperty(t.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),t}(l);t.ServerTransaction=f;var g=function(e){function t(t,r,n){var i=e.call(this,t,r,n,o.Proceeding,"sip.transaction.ist")||this;return t.reply(100),i}return i(t,e),t.prototype.dispose=function(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),e.prototype.dispose.call(this)},t.prototype.receiveRequest=function(e){var t=this;switch(this.state){case o.Proceeding:if(e.method===a.C.INVITE)return void(this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(function(e){t.logTransportError(e,"Failed to send retransmission of provisional response.")}));break;case o.Accepted:if(e.method===a.C.INVITE)return;break;case o.Completed:if(e.method===a.C.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");return void this.send(this.lastFinalResponse).catch(function(e){t.logTransportError(e,"Failed to send retransmission of final response.")})}if(e.method===a.C.ACK)return void this.stateTransition(o.Confirmed);break;case o.Confirmed:case o.Terminated:if(e.method===a.C.INVITE||e.method===a.C.ACK)return;break;default:throw new Error("Invalid state "+this.state)}var r="INVITE server transaction received unexpected "+e.method+" request while in state "+this.state+".";this.logger.warn(r)},t.prototype.receiveResponse=function(e,t){var r=this;if(e<100||e>699)throw new Error("Invalid status code "+e);switch(this.state){case o.Proceeding:if(e>=100&&e<=199)return this.lastProvisionalResponse=t,e>100&&this.startProgressExtensionTimer(),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send 1xx response.")});if(e>=200&&e<=299)return this.lastFinalResponse=t,this.stateTransition(o.Accepted),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send 2xx response.")});if(e>=300&&e<=699)return this.lastFinalResponse=t,this.stateTransition(o.Completed),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send non-2xx final response.")});break;case o.Accepted:if(e>=200&&e<=299)return void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send 2xx response.")});break;case o.Completed:case o.Confirmed:case o.Terminated:break;default:throw new Error("Invalid state "+this.state)}var n="INVITE server transaction received unexpected "+e+" response from TU while in state "+this.state+".";throw this.logger.error(n),new Error(n)},t.prototype.onTransportError=function(e){this.user.onTransportError&&this.user.onTransportError(e)},t.prototype.stateTransition=function(e){var t=this,r=function(){throw new Error("Invalid state transition from "+t.state+" to "+e)};switch(e){case o.Proceeding:r();break;case o.Accepted:case o.Completed:this.state!==o.Proceeding&&r();break;case o.Confirmed:this.state!==o.Completed&&r();break;case o.Terminated:this.state!==o.Accepted&&this.state!==o.Completed&&this.state!==o.Confirmed&&r();break;default:r()}this.stopProgressExtensionTimer(),e===o.Accepted&&(this.L=setTimeout(function(){return t.timer_L()},u.Timers.TIMER_L)),e===o.Completed&&(this.H=setTimeout(function(){return t.timer_H()},u.Timers.TIMER_H)),e===o.Confirmed&&(this.I=setTimeout(function(){return t.timer_I()},u.Timers.TIMER_I)),e===o.Terminated&&this.dispose(),this.setState(e)},t.prototype.startProgressExtensionTimer=function(){var e=this;void 0===this.progressExtensionTimer&&(this.progressExtensionTimer=setInterval(function(){if(e.logger.debug("Progress extension timer expired for INVITE server transaction "+e.id+"."),!e.lastProvisionalResponse)throw new Error("Last provisional response undefined.");e.send(e.lastProvisionalResponse).catch(function(t){e.logTransportError(t,"Failed to send retransmission of provisional response.")})},u.Timers.PROVISIONAL_RESPONSE_INTERVAL))},t.prototype.stopProgressExtensionTimer=function(){void 0!==this.progressExtensionTimer&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)},t.prototype.timer_G=function(){},t.prototype.timer_H=function(){this.logger.debug("Timer H expired for INVITE server transaction "+this.id+"."),this.state===o.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition(o.Terminated))},t.prototype.timer_I=function(){this.logger.debug("Timer I expired for INVITE server transaction "+this.id+"."),this.stateTransition(o.Terminated)},t.prototype.timer_L=function(){this.logger.debug("Timer L expired for INVITE server transaction "+this.id+"."),this.state===o.Accepted&&this.stateTransition(o.Terminated)},t}(f);t.InviteServerTransaction=g;var m=function(e){function t(t,r,n){return e.call(this,t,r,n,o.Trying,"sip.transaction.nist")||this}return i(t,e),t.prototype.dispose=function(){this.J&&(clearTimeout(this.J),this.J=void 0),e.prototype.dispose.call(this)},t.prototype.receiveRequest=function(e){var t=this;switch(this.state){case o.Trying:break;case o.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(function(e){t.logTransportError(e,"Failed to send retransmission of provisional response.")});break;case o.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(function(e){t.logTransportError(e,"Failed to send retransmission of final response.")});break;case o.Terminated:break;default:throw new Error("Invalid state "+this.state)}},t.prototype.receiveResponse=function(e,t){var r=this;if(e<100||e>699)throw new Error("Invalid status code "+e);if(e>100&&e<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case o.Trying:if(this.lastResponse=t,e>=100&&e<200)return this.stateTransition(o.Proceeding),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send provisional response.")});if(e>=200&&e<=699)return this.stateTransition(o.Completed),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send final response.")});break;case o.Proceeding:if(this.lastResponse=t,e>=200&&e<=699)return this.stateTransition(o.Completed),void this.send(t).catch(function(e){r.logTransportError(e,"Failed to send final response.")});break;case o.Completed:return;case o.Terminated:break;default:throw new Error("Invalid state "+this.state)}var n="Non-INVITE server transaction received unexpected "+e+" response from TU while in state "+this.state+".";throw this.logger.error(n),new Error(n)},t.prototype.onTransportError=function(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(o.Terminated,!0)},t.prototype.stateTransition=function(e,t){var r=this;void 0===t&&(t=!1);var n=function(){throw new Error("Invalid state transition from "+r.state+" to "+e)};switch(e){case o.Trying:n();break;case o.Proceeding:this.state!==o.Trying&&n();break;case o.Completed:this.state!==o.Trying&&this.state!==o.Proceeding&&n();break;case o.Terminated:this.state!==o.Proceeding&&this.state!==o.Completed&&(t||n());break;default:n()}e===o.Completed&&(this.J=setTimeout(function(){return r.timer_J()},u.Timers.TIMER_J)),e===o.Terminated&&this.dispose(),this.setState(e)},t.prototype.timer_J=function(){this.logger.debug("Timer J expired for NON-INVITE server transaction "+this.id+"."),this.state===o.Completed&&this.stateTransition(o.Terminated)},t}(f);t.NonInviteServerTransaction=m},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=r(2),a=r(9),c=r(12),u=r(5);t.getSupportedHeader=function(e){var t=[];e.method===o.C.REGISTER?t.push("path","gruu"):e.method===o.C.INVITE&&(e.ua.contact.pubGruu||e.ua.contact.tempGruu)&&t.push("gruu"),e.ua.configuration.rel100===o.C.supported.SUPPORTED&&t.push("100rel"),e.ua.configuration.replaces===o.C.supported.SUPPORTED&&t.push("replaces"),t.push("outbound"),t=t.concat(e.ua.configuration.extraSupported||[]);var r=e.ua.configuration.hackAllowUnregisteredOptionTags||!1,n={};return"Supported: "+(t=t.filter(function(e){var t=o.C.OPTION_TAGS[e],i=!n[e];return n[e]=!0,(t||r)&&i})).join(", ")+"\r\n"};var l=function(){function e(e,t,r,n,i,o){void 0===n&&(n={}),this.type=s.TypeStrings.OutgoingRequest,this.logger=r.getLogger("sip.sipmessage"),this.ua=r,this.headers={},this.method=e,this.ruri=t,this.body=o,this.extraHeaders=(i||[]).slice(),this.statusCode=n.statusCode,this.reasonPhrase=n.reasonPhrase,n.routeSet?this.setHeader("route",n.routeSet):r.configuration.usePreloadedRoute&&r.transport&&this.setHeader("route",r.transport.server.sipUri),this.setHeader("via",""),this.setHeader("max-forwards","70");var c=n.toUri||t;this.toTag=n.toTag;var l=n.toDisplayName||0===n.toDisplayName?'"'+n.toDisplayName+'" ':"";l+="<"+(c.type===s.TypeStrings.URI?c.toRaw():c)+">",l+=this.toTag?";tag="+this.toTag:"",this.to=a.Grammar.nameAddrHeaderParse(l),this.setHeader("to",l);var h,d=n.fromUri||r.configuration.uri||"";this.fromTag=n.fromTag||u.Utils.newTag(),h=n.fromDisplayName||0===n.fromDisplayName?'"'+n.fromDisplayName+'" ':r.configuration.displayName?'"'+r.configuration.displayName+'" ':"",h+="<"+(d.type===s.TypeStrings.URI?d.toRaw():d)+">;tag=",h+=this.fromTag,this.from=a.Grammar.nameAddrHeaderParse(h),this.setHeader("from",h),this.callId=n.callId||r.configuration.sipjsId+u.Utils.createRandomToken(15),this.setHeader("call-id",this.callId),this.cseq=n.cseq||Math.floor(1e4*Math.random()),this.setHeader("cseq",this.cseq+" "+e)}return e.prototype.getHeader=function(e){var t=this.headers[u.Utils.headerize(e)];if(t){if(t[0])return t[0]}else for(var r=new RegExp("^\\s*"+e+"\\s*:","i"),n=0,i=this.extraHeaders;n<i.length;n++){var o=i[n];if(r.test(o))return o.substring(o.indexOf(":")+1).trim()}},e.prototype.getHeaders=function(e){var t=[],r=this.headers[u.Utils.headerize(e)];if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];t.push(o)}else for(var s=new RegExp("^\\s*"+e+"\\s*:","i"),a=0,c=this.extraHeaders;a<c.length;a++){var l=c[a];s.test(l)&&t.push(l.substring(l.indexOf(":")+1).trim())}return t},e.prototype.hasHeader=function(e){if(this.headers[u.Utils.headerize(e)])return!0;for(var t=new RegExp("^\\s*"+e+"\\s*:","i"),r=0,n=this.extraHeaders;r<n.length;r++){var i=n[r];if(t.test(i))return!0}return!1},e.prototype.setHeader=function(e,t){this.headers[u.Utils.headerize(e)]=t instanceof Array?t:[t]},e.prototype.setViaHeader=function(e,t){var r="WSS";t.server&&t.server.scheme&&(r=t.server.scheme),this.ua.configuration.hackViaTcp&&(r="TCP");var n="SIP/2.0/"+r;n+=" "+this.ua.configuration.viaHost+";branch="+e,this.ua.configuration.forceRport&&(n+=";rport"),this.setHeader("via",n),this.branch=e},e.prototype.cancel=function(t,r){var n=this;if(!this.transaction)throw new Error("Transaction undefined.");var i=function(){if(!n.transaction)throw new Error("Transaction undefined.");if(!n.to)throw new Error("To undefined.");if(!n.from)throw new Error("From undefined.");var i=new e(o.C.CANCEL,n.ruri,n.ua,{toUri:n.to.uri,toTag:n.toTag,fromUri:n.from.uri,fromTag:n.fromTag,callId:n.callId,cseq:n.cseq},r);i.branch=n.branch,n.headers.Route&&(i.headers.Route=n.headers.Route),t&&i.setHeader("Reason",t);var s=n.transaction.transport,a={loggerFactory:n.ua.getLoggerFactory(),onStateChange:function(e){e===c.TransactionState.Terminated&&n.ua.destroyTransaction(u)},receiveResponse:function(e){}},u=new c.NonInviteClientTransaction(i,s,a);n.ua.newTransaction(u)};this.transaction instanceof c.InviteClientTransaction&&(this.transaction.state===c.TransactionState.Proceeding?i():this.transaction.once("stateChanged",function(){n.transaction&&n.transaction.state===c.TransactionState.Proceeding&&i()}))},e.prototype.toString=function(){var e="";for(var r in e+=this.method+" "+(this.ruri.type===s.TypeStrings.URI?this.ruri.toRaw():this.ruri)+" SIP/2.0\r\n",this.headers)if(this.headers[r])for(var n=0,i=this.headers[r];n<i.length;n++){e+=r+": "+i[n]+"\r\n"}for(var o=0,a=this.extraHeaders;o<a.length;o++){e+=(r=a[o]).trim()+"\r\n"}return e+=t.getSupportedHeader(this),e+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",this.body?"string"==typeof this.body?(e+="Content-Length: "+u.Utils.str_utf8_length(this.body)+"\r\n\r\n",e+=this.body):this.body.body&&this.body.contentType?(e+="Content-Type: "+this.body.contentType+"\r\n",e+="Content-Length: "+u.Utils.str_utf8_length(this.body.body)+"\r\n\r\n",e+=this.body.body):e+="Content-Length: 0\r\n\r\n":e+="Content-Length: 0\r\n\r\n",e},e}();t.OutgoingRequest=l;var h=function(){function e(){this.type=s.TypeStrings.IncomingMessage,this.headers={}}return e.prototype.addHeader=function(e,t){var r={raw:t};e=u.Utils.headerize(e),this.headers[e]?this.headers[e].push(r):this.headers[e]=[r]},e.prototype.getHeader=function(e){var t=this.headers[u.Utils.headerize(e)];if(t)return t[0]?t[0].raw:void 0},e.prototype.getHeaders=function(e){var t=this.headers[u.Utils.headerize(e)],r=[];if(!t)return[];for(var n=0,i=t;n<i.length;n++){var o=i[n];r.push(o.raw)}return r},e.prototype.hasHeader=function(e){return!!this.headers[u.Utils.headerize(e)]},e.prototype.parseHeader=function(e,t){if(void 0===t&&(t=0),e=u.Utils.headerize(e),this.headers[e]&&!(t>=this.headers[e].length)){var r=this.headers[e][t],n=r.raw;if(r.parsed)return r.parsed;var i=a.Grammar.parse(n,e.replace(/-/g,"_"));return-1===i?void this.headers[e].splice(t,1):(r.parsed=i,i)}},e.prototype.s=function(e,t){return void 0===t&&(t=0),this.parseHeader(e,t)},e.prototype.setHeader=function(e,t){this.headers[u.Utils.headerize(e)]=[{raw:t}]},e.prototype.toString=function(){return this.data},e}();t.IncomingMessage=h;var d=function(e){function r(t){var r=e.call(this)||this;return r.ua=t,r.type=s.TypeStrings.IncomingRequest,r.logger=t.getLogger("sip.sipmessage"),r}return i(r,e),r.prototype.reply=function(e,r,n,i){if(!this.transaction)throw new Error("Transaction undefined.");var s=u.Utils.buildStatusLine(e,r);if(n=(n||[]).slice(),this.method===o.C.INVITE&&e>100&&e<=200)for(var a=0,c=this.getHeaders("record-route");a<c.length;a++){s+="Record-Route: "+c[a]+"\r\n"}for(var l=0,h=this.getHeaders("via");l<h.length;l++){s+="Via: "+h[l]+"\r\n"}var d=this.getHeader("to")||"";!this.toTag&&e>100?d+=";tag="+u.Utils.newTag():this.toTag&&!this.s("to").hasParam("tag")&&(d+=";tag="+this.toTag),s+="To: "+d+"\r\n",s+="From: "+this.getHeader("From")+"\r\n",s+="Call-ID: "+this.callId+"\r\n",s+="CSeq: "+this.cseq+" "+this.method+"\r\n";for(var p=0,f=n;p<f.length;p++){s+=f[p].trim()+"\r\n"}return s+=t.getSupportedHeader(this),s+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",i?"string"==typeof i?(s+="Content-Type: application/sdp\r\n",s+="Content-Length: "+u.Utils.str_utf8_length(i)+"\r\n\r\n",s+=i):i.body&&i.contentType?(s+="Content-Type: "+i.contentType+"\r\n",s+="Content-Length: "+u.Utils.str_utf8_length(i.body)+"\r\n\r\n",s+=i.body):s+="Content-Length: 0\r\n\r\n":s+="Content-Length: 0\r\n\r\n",this.transaction.receiveResponse(e,s),s},r.prototype.reply_sl=function(e,t){if(!this.transport)throw new Error("Transport undefined.");for(var r=u.Utils.buildStatusLine(e,t),n=0,i=this.getHeaders("via");n<i.length;n++){r+="Via: "+i[n]+"\r\n"}var o=this.getHeader("To")||"";return!this.toTag&&e>100?o+=";tag="+u.Utils.newTag():this.toTag&&!this.s("to").hasParam("tag")&&(o+=";tag="+this.toTag),r+="To: "+o+"\r\n",r+="From: "+this.getHeader("From")+"\r\n",r+="Call-ID: "+this.callId+"\r\n",r+="CSeq: "+this.cseq+" "+this.method+"\r\n",r+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport.send(r),r},r}(h);t.IncomingRequest=d;var p=function(e){function t(t){var r=e.call(this)||this;return r.ua=t,r.type=s.TypeStrings.IncomingResponse,r.logger=t.getLogger("sip.sipmessage"),r.headers={},r}return i(t,e),t.prototype.ack=function(e){if(!this.statusCode||this.statusCode<200||this.statusCode>299)throw new Error("Response status code must be 2xx to ACK.");if(this.method!==o.C.INVITE)throw new Error("Response must to be for an INVITE to ACK.");if(!this.transaction)throw new Error("Transaction undefined.");if(!(this.transaction instanceof c.InviteClientTransaction))throw new Error("Transaction not instance of InviteServerTrasaction.");var t=this.ua.dialogs[this.callId+this.fromTag+this.toTag];if(!t)throw new Error("Dialog undefined.");var r=this.callId,n=this.cseq,i=t.localUri,s=this.fromTag,a=t.remoteUri,u=this.toTag,h=t.remoteTarget,d=t.routeSet,p=new l(o.C.ACK,h,this.ua,{callId:r,cseq:n,fromUri:i,fromTag:s,toUri:a,toTag:u,routeSet:d},e?e.extraHeaders:void 0,e?e.body:void 0);return this.transaction.ackResponse(p),p},t}(h);t.IncomingResponse=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(3),a=r(2),c=r(20),u=r(13),l=r(5),h=function(e){function t(r,n,i,o){var s=e.call(this)||this;return s.data={},t.initializer(s,r,n,i,o),s}return i(t,e),t.initializer=function(e,t,r,n,i){if(e.type=a.TypeStrings.ClientContext,void 0===n)throw new TypeError("Not enough arguments");e.ua=t,e.logger=t.getLogger("sip.clientcontext"),e.method=r;var o=t.normalizeTarget(n);if(!o)throw new TypeError("Invalid target: "+n);(i=Object.create(i||Object.prototype)).extraHeaders=(i.extraHeaders||[]).slice(),e.request=new u.OutgoingRequest(e.method,o,e.ua,i.params,i.extraHeaders),i.body&&(e.body={},e.body.body=i.body,i.contentType&&(e.body.contentType=i.contentType),e.request.body=e.body),e.request.from&&(e.localIdentity=e.request.from),e.request.to&&(e.remoteIdentity=e.request.to)},t.prototype.send=function(){return new c.RequestSender(this,this.ua).send(),this},t.prototype.receiveResponse=function(e){var t=e.statusCode||0,r=l.Utils.getReasonPhrase(t);switch(!0){case/^1[0-9]{2}$/.test(t.toString()):this.emit("progress",e,r);break;case/^2[0-9]{2}$/.test(t.toString()):this.ua.applicants[this.toString()]&&delete this.ua.applicants[this.toString()],this.emit("accepted",e,r);break;default:this.ua.applicants[this.toString()]&&delete this.ua.applicants[this.toString()],this.emit("rejected",e,r),this.emit("failed",e,r)}},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,s.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",void 0,s.C.causes.CONNECTION_ERROR)},t}(o.EventEmitter);t.ClientContext=h},function(e,t,r){"use strict";var n=r(76);e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,r=n.randomBytes(e),i=[],o=0;o<e;o++)i.push("abcdefghijklmnopqrstuvwxyz012345".substr(r[o]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(48),s=function(){};function a(e,t,r,n){o.call(this,e,t,function(e){return function(t,r,n){s("create ajax sender",t,r);var o={};"string"==typeof r&&(o.headers={"Content-type":"text/plain"});var a=i.addPath(t,"/xhr_send"),c=new e("POST",a,r,o);return c.once("finish",function(e){if(s("finish",e),c=null,200!==e&&204!==e)return n(new Error("http status "+e));n()}),function(){s("abort"),c.close(),c=null;var e=new Error("Aborted");e.code=1e3,n(e)}}}(n),r,n)}n(a,o),e.exports=a},function(e,t,r){"use strict";var n=r(0),i=r(49);function o(e,t,r){i.call(this,e,t,r,{noCredentials:!0})}n(o,i),o.enabled=i.enabled,e.exports=o},function(e,t,r){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n=r(11),i=r(10),o=r(18);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(r,n){t.parent!==t&&t.parent.postMessage(i.stringify({windowId:e.exports.currentWindowId,type:r,data:n||""}),"*")},createIframe:function(e,r){var i,o,s=t.document.createElement("iframe"),a=function(){clearTimeout(i);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),n.unloadDel(o))},u=function(e){s&&(c(),r(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){clearTimeout(i),i=setTimeout(function(){u("onload timeout")},2e3)},t.document.body.appendChild(s),i=setTimeout(function(){u("timeout")},15e3),o=n.unloadAdd(c),{post:function(e,t){setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}},0)},cleanup:c,loaded:a}},createHtmlfile:function(r,i){var o,s,a,c=["Active"].concat("Object").join("X"),u=new t[c]("htmlfile"),l=function(){clearTimeout(o),a.onerror=null},h=function(){u&&(l(),n.unloadDel(s),a.parentNode.removeChild(a),a=u=null,CollectGarbage())},d=function(e){u&&(h(),i(e))};u.open(),u.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var p=u.createElement("div");return u.body.appendChild(p),a=u.createElement("iframe"),p.appendChild(a),a.src=r,a.onerror=function(){d("onerror")},o=setTimeout(function(){d("timeout")},15e3),s=n.unloadAdd(h),{post:function(e,t){try{setTimeout(function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:h,loaded:l}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!o.isKonqueror())}).call(this,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(2),o=r(12),s=function(){function e(e,t){this.type=i.TypeStrings.RequestSender,this.logger=t.getLogger("sip.requestsender"),this.loggerFactory=t.getLoggerFactory(),this.ua=t,this.applicant=e,this.method=e.request.method,this.request=e.request,this.credentials=void 0,this.challenged=!1,this.staled=!1,t.status===i.UAStatus.STATUS_USER_CLOSED&&this.method!==n.C.BYE&&this.method!==n.C.ACK&&this.onTransportError()}return e.prototype.send=function(){var e=this,t=this.ua.transport;if(!t)throw new Error("Transport undefined.");var r,n={loggerFactory:this.ua.getLoggerFactory(),onRequestTimeout:function(){return e.onRequestTimeout()},onStateChange:function(t){t===o.TransactionState.Terminated&&e.ua.destroyTransaction(r)},onTransportError:function(t){return e.onTransportError()},receiveResponse:function(t){return e.receiveResponse(t)}};switch(this.method){case"INVITE":r=new o.InviteClientTransaction(this.request,t,n);break;case"ACK":throw new Error("Cannot make client transaction for ACK method.");default:r=new o.NonInviteClientTransaction(this.request,t,n)}return this.clientTransaction=r,this.ua.newTransaction(r),r},e.prototype.onRequestTimeout=function(){this.applicant.onRequestTimeout()},e.prototype.onTransportError=function(){this.applicant.onTransportError()},e.prototype.receiveResponse=function(e){var t=e&&e.statusCode?e.statusCode:0;if(401===t||407===t){var r=void 0,i=void 0;if(401===t?(r=e.parseHeader("www-authenticate"),i="authorization"):(r=e.parseHeader("proxy-authenticate"),i="proxy-authorization"),!r)return this.logger.warn(t+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(e);if(!this.challenged||!this.staled&&!0===r.stale){if(!this.credentials&&this.ua.configuration.authenticationFactory&&(this.credentials=this.ua.configuration.authenticationFactory(this.ua)),!this.credentials.authenticate(this.request,r))return void this.applicant.receiveResponse(e);this.challenged=!0,r.stale&&(this.staled=!0);var o=void 0;e.method===n.C.REGISTER?o=this.applicant.cseq+=1:this.request.dialog?o=this.request.dialog.localSeqnum+=1:(o=(this.request.cseq||0)+1,this.request.cseq=o),this.request.setHeader("cseq",o+" "+this.method),this.request.setHeader(i,this.credentials.toString()),this.send()}else this.applicant.receiveResponse(e)}else this.applicant.receiveResponse(e)},e}();t.RequestSender=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=500;t.Timers={T1:n,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=r(2),a=function(){function e(e){for(var t in this.parameters={},this.type=s.TypeStrings.Parameters,e)e.hasOwnProperty(t)&&this.setParam(t,e[t])}return e.prototype.setParam=function(e,t){e&&(this.parameters[e.toLowerCase()]=null==t?null:t.toString())},e.prototype.getParam=function(e){if(e)return this.parameters[e.toLowerCase()]},e.prototype.hasParam=function(e){return!!e&&!!this.parameters.hasOwnProperty(e.toLowerCase())},e.prototype.deleteParam=function(e){if(e=e.toLowerCase(),this.parameters.hasOwnProperty(e)){var t=this.parameters[e];return delete this.parameters[e],t}},e.prototype.clearParams=function(){this.parameters={}},e}();t.Parameters=a;var c=function(e){function t(t,r,n,i,a,c){var u=e.call(this,a)||this;if(u.headers={},u.type=s.TypeStrings.URI,!n)throw new TypeError('missing or invalid "host" parameter');for(var l in t=t||o.C.SIP,c)c.hasOwnProperty(l)&&u.setHeader(l,c[l]);return u.raw={scheme:t,user:r,host:n,port:i},u.normal={scheme:t.toLowerCase(),user:r,host:n.toLowerCase(),port:i},u}return i(t,e),Object.defineProperty(t.prototype,"_normal",{get:function(){return this.normal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_raw",{get:function(){return this.raw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scheme",{get:function(){return this.normal.scheme},set:function(e){this.raw.scheme=e,this.normal.scheme=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.normal.user},set:function(e){this.normal.user=this.raw.user=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.normal.host},set:function(e){this.raw.host=e,this.normal.host=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aor",{get:function(){return this.normal.user+"@"+this.normal.host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this.normal.port},set:function(e){this.normal.port=this.raw.port=e},enumerable:!0,configurable:!0}),t.prototype.setHeader=function(e,t){this.headers[this.headerize(e)]=t instanceof Array?t:[t]},t.prototype.getHeader=function(e){if(e)return this.headers[this.headerize(e)]},t.prototype.hasHeader=function(e){return!!e&&!!this.headers.hasOwnProperty(this.headerize(e))},t.prototype.deleteHeader=function(e){if(e=this.headerize(e),this.headers.hasOwnProperty(e)){var t=this.headers[e];return delete this.headers[e],t}},t.prototype.clearHeaders=function(){this.headers={}},t.prototype.clone=function(){return new t(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},t.prototype.toRaw=function(){return this._toString(this._raw)},t.prototype.toString=function(){return this._toString(this._normal)},t.prototype._toString=function(e){var t=e.scheme+":";for(var r in e.scheme.toLowerCase().match("^sips?$")||(t+="//"),e.user&&(t+=this.escapeUser(e.user)+"@"),t+=e.host,(e.port||0===e.port)&&(t+=":"+e.port),this.parameters)this.parameters.hasOwnProperty(r)&&(t+=";"+r,null!==this.parameters[r]&&(t+="="+this.parameters[r]));var n=[];for(var i in this.headers)if(this.headers.hasOwnProperty(i))for(var o in this.headers[i])this.headers[i].hasOwnProperty(o)&&n.push(i+"="+this.headers[i][o]);return n.length>0&&(t+="?"+n.join("&")),t},t.prototype.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},t.prototype.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length,i="",o=0;o<n;o++)0!==o&&(i+="-"),i+=r[o].charAt(0).toUpperCase()+r[o].substring(1);return t[i]&&(i=t[i]),i},t}(a);t.URI=c},function(e,t,r){"use strict";var n=r(0),i=r(4).EventEmitter,o=function(){};function s(e,t){o(e),i.call(this);var r=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){o("finish",e,t),r._chunkHandler(e,t),r.xo=null;var n=200===e?"network":"permanent";o("close",n),r.emit("close",null,n),r._cleanup()})}n(s,i),s.prototype._chunkHandler=function(e,t){if(o("_chunkHandler",e),200===e&&t)for(var r=-1;;this.bufferPosition+=r+1){var n=t.slice(this.bufferPosition);if(-1===(r=n.indexOf("\n")))break;var i=n.slice(0,r);i&&(o("message",i),this.emit("message",i))}},s.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},s.prototype.abort=function(){o("abort"),this.xo&&(this.xo.close(),o("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=s},function(e,t,r){"use strict";var n=r(0),i=r(49);function o(e,t,r,n){i.call(this,e,t,r,n)}n(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(2),o=r(20),s=r(13),a=r(12),c=function(){function e(e,t,r,n){if(this.pracked=[],this.uacPendingReply=!1,this.uasPendingReply=!1,this.type=i.TypeStrings.Dialog,!t.hasHeader("contact"))throw new Error("unable to create a Dialog without Contact header field");if(t.type===i.TypeStrings.IncomingResponse){var o=t.statusCode;n=o&&o<200?i.DialogStatus.STATUS_EARLY:i.DialogStatus.STATUS_CONFIRMED}else n=n||i.DialogStatus.STATUS_CONFIRMED;var s=t.parseHeader("contact");"UAS"===r&&t.type===i.TypeStrings.IncomingRequest?(this.id={callId:t.callId,localTag:t.toTag,remoteTag:t.fromTag,toString:function(){return t.callId+t.toTag+t.fromTag}},this.state=n,this.remoteSeqnum=t.cseq,this.localUri=(t.parseHeader("to")||{}).uri,this.remoteUri=(t.parseHeader("from")||{}).uri,this.remoteTarget=s.uri,this.routeSet=t.getHeaders("record-route"),this.inviteSeqnum=t.cseq,this.localSeqnum=t.cseq):(this.id={callId:t.callId,localTag:t.fromTag,remoteTag:t.toTag,toString:function(){return t.callId+t.fromTag+t.toTag}},this.state=n,this.inviteSeqnum=t.cseq,this.localSeqnum=t.cseq,this.localUri=t.parseHeader("from").uri,this.pracked=[],this.remoteUri=t.parseHeader("to").uri,this.remoteTarget=s.uri,this.routeSet=t.getHeaders("record-route").reverse()),this.logger=e.ua.getLogger("sip.dialog",this.id.toString()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,this.logger.log("new "+r+" dialog created with status "+(this.state===i.DialogStatus.STATUS_EARLY?"EARLY":"CONFIRMED")),e.emit("dialog",this)}return e.prototype.update=function(e,t){this.state=i.DialogStatus.STATUS_CONFIRMED,this.logger.log("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.routeSet=e.getHeaders("record-route").reverse())},e.prototype.terminate=function(){this.logger.log("dialog "+this.id.toString()+" deleted"),this.sessionDescriptionHandler&&this.state!==i.DialogStatus.STATUS_CONFIRMED&&this.sessionDescriptionHandler.close(),delete this.owner.ua.dialogs[this.id.toString()]},e.prototype.createRequest=function(e,t,r){void 0===t&&(t=[]),t=t.slice(),this.localSeqnum||(this.localSeqnum=Math.floor(1e4*Math.random()));var i=e===n.C.CANCEL||e===n.C.ACK?this.inviteSeqnum:this.localSeqnum+=1,o=new s.OutgoingRequest(e,this.remoteTarget,this.owner.ua,{cseq:i,callId:this.id.callId,fromUri:this.localUri,fromTag:this.id.localTag,toIri:this.remoteUri,toTag:this.id.remoteTag,routeSet:this.routeSet},t,r);return o.dialog=this,o},e.prototype.checkInDialogRequest=function(e){var t=this;if(this.remoteSeqnum){if(e.cseq<this.remoteSeqnum)return e.method!==n.C.ACK&&e.reply(500),e.cseq===this.inviteSeqnum}else this.remoteSeqnum=e.cseq;switch(e.method){case n.C.INVITE:if(!0===this.uacPendingReply)e.reply(491);else{if(!0===this.uasPendingReply&&e.cseq>this.remoteSeqnum){var r=Math.floor(10*Math.random())+1;return e.reply(500,void 0,["Retry-After:"+r]),this.remoteSeqnum=e.cseq,!1}this.uasPendingReply=!0;var i=function(){!e.transaction||e.transaction.state!==a.TransactionState.Accepted&&e.transaction.state!==a.TransactionState.Completed&&e.transaction.state!==a.TransactionState.Terminated||(e.transaction.removeListener("stateChanged",i),t.uasPendingReply=!1)};e.transaction&&e.transaction.on("stateChanged",i)}e.hasHeader("contact")&&e.transaction&&e.transaction.on("stateChanged",function(){e.transaction&&e.transaction.state===a.TransactionState.Accepted&&(t.remoteTarget=e.parseHeader("contact").uri)});break;case n.C.NOTIFY:e.hasHeader("contact")&&e.transaction&&e.transaction.on("stateChanged",function(){e.transaction&&e.transaction.state===a.TransactionState.Completed&&(t.remoteTarget=e.parseHeader("contact").uri)})}return e.cseq>this.remoteSeqnum&&(this.remoteSeqnum=e.cseq),!0},e.prototype.sendRequest=function(e,t,r){var s=this;void 0===r&&(r={});var c,u=(r.extraHeaders||[]).slice();r.body&&(r.body.body?c=r.body:((c={}).body=r.body,r.contentType&&(c.contentType=r.contentType)));var l=this.createRequest(t,u,c),h=function(t){var r=new o.RequestSender({request:l,onRequestTimeout:e.onRequestTimeout.bind(e),onTransportError:e.onTransportError.bind(e),receiveResponse:function(r){408===r.statusCode||481===r.statusCode?e.onDialogError(r):r.method===n.C.INVITE&&491===r.statusCode?t?e.receiveResponse(r):(l.cseq=s.localSeqnum+=1,setTimeout(function(){void 0!==s.owner.status&&s.owner.status!==i.SessionStatus.STATUS_TERMINATED&&h(!0)},1e3)):e.receiveResponse(r)}},s.owner.ua);if(r.send(),r.clientTransaction&&l.method===n.C.INVITE&&r.clientTransaction&&r.clientTransaction.state!==a.TransactionState.Terminated){s.uacPendingReply=!0;var c=function(){var e=r.clientTransaction.state;r.clientTransaction&&(!r.clientTransaction||e!==a.TransactionState.Accepted&&e!==a.TransactionState.Completed&&e!==a.TransactionState.Terminated||(r.clientTransaction.removeListener("stateChanged",c),s.uacPendingReply=!1))};r.clientTransaction.on("stateChanged",c)}};return h(!1),l},e.prototype.receiveRequest=function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)},e.C=i.DialogStatus,e}();t.Dialog=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(3),a=r(2),c=r(9),u=r(12),l=r(5),h=function(e){function t(r,n){var i=e.call(this)||this;return i.data={},t.initializer(i,r,n),i}return i(t,e),t.initializer=function(e,t,r){e.type=a.TypeStrings.ServerContext,e.ua=t,e.logger=t.getLogger("sip.servercontext"),e.request=r;var n=t.transport;if(!n)throw new Error("Transport undefined.");var i={loggerFactory:t.getLoggerFactory(),onStateChange:function(r){r===u.TransactionState.Terminated&&t.destroyTransaction(e.transaction)},onTransportError:function(t){e.logger.error(t.message),e.onTransportError()}};if(r.method===s.C.INVITE?e.transaction=new u.InviteServerTransaction(r,n,i):e.transaction=new u.NonInviteServerTransaction(r,n,i),t.newTransaction(e.transaction),r.body&&(e.body=r.body),r.hasHeader("Content-Type")&&(e.contentType=r.getHeader("Content-Type")),e.method=r.method,e.localIdentity=r.to,e.remoteIdentity=r.from,r.hasHeader("P-Asserted-Identity")){var o=r.getHeader("P-Asserted-Identity");o&&(e.assertedIdentity=c.Grammar.nameAddrHeaderParse(o))}},t.prototype.progress=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||180,e.minCode=100,e.maxCode=199,e.events=["progress"],this.reply(e)},t.prototype.accept=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||200,e.minCode=200,e.maxCode=299,e.events=["accepted"],this.reply(e)},t.prototype.reject=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||480,e.minCode=300,e.maxCode=699,e.events=["rejected","failed"],this.reply(e)},t.prototype.reply=function(e){var t=this;void 0===e&&(e={});var r=e.statusCode||100,n=e.minCode||100,i=e.maxCode||699,o=l.Utils.getReasonPhrase(r,e.reasonPhrase),s=e.extraHeaders||[],a=e.body,c=e.events||[];if(r<n||r>i)throw new TypeError("Invalid statusCode: "+r);var u=this.request.reply(r,o,s,a);return c.forEach(function(e){t.emit(e,u,o)}),this},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,s.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",void 0,s.C.causes.CONNECTION_ERROR)},t}(o.EventEmitter);t.ServerContext=h},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(14),a=r(3),c=r(35),u=r(2),l=r(8),h=r(9),d=r(36),p=r(37),f=r(38),g=r(39),m=r(40),v=r(26),y=r(41),b=r(13),T=r(42),S=r(12),C=r(22),w=r(5),E=r(44),_=r(45),A=e.window||e,x=function(t){function r(e){var n=t.call(this)||this;if(n.type=u.TypeStrings.UA,n.log=new d.LoggerFactory,n.logger=n.getLogger("sip.ua"),n.cache={credentials:{}},n.configuration={},n.dialogs={},n.applicants={},n.data={},n.sessions={},n.subscriptions={},n.earlySubscriptions={},n.publishers={},n.status=u.UAStatus.STATUS_INIT,n.transactions={nist:{},nict:{},ist:{},ict:{}},void 0===e?e={}:("string"==typeof e||e instanceof String)&&(e={uri:e}),e.log&&(e.log.hasOwnProperty("builtinEnabled")&&(n.log.builtinEnabled=e.log.builtinEnabled),e.log.hasOwnProperty("connector")&&(n.log.connector=e.log.connector),e.log.hasOwnProperty("level"))){var i=e.log.level,o="string"==typeof i?d.Levels[i]:i;o?n.log.level=o:n.logger.error('Invalid "level" parameter value: '+JSON.stringify(i))}try{n.loadConfig(e)}catch(e){throw n.status=u.UAStatus.STATUS_NOT_READY,n.error=r.C.CONFIGURATION_ERROR,e}return n.registerContext=new g.RegisterContext(n,e.registerOptions),n.registerContext.on("failed",n.emit.bind(n,"registrationFailed")),n.registerContext.on("registered",n.emit.bind(n,"registered")),n.registerContext.on("unregistered",n.emit.bind(n,"unregistered")),n.configuration.autostart&&n.start(),n}return i(r,t),Object.defineProperty(r.prototype,"transactionsCount",{get:function(){for(var e=0,t=0,r=["nist","nict","ist","ict"];t<r.length;t++){var n=r[t];e+=Object.keys(this.transactions[n]).length}return e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nictTransactionsCount",{get:function(){return Object.keys(this.transactions.nict).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nistTransactionsCount",{get:function(){return Object.keys(this.transactions.nist).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ictTransactionsCount",{get:function(){return Object.keys(this.transactions.ict).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"istTransactionsCount",{get:function(){return Object.keys(this.transactions.ist).length},enumerable:!0,configurable:!0}),r.prototype.register=function(e){return void 0===e&&(e={}),e.register&&(this.configuration.register=!0),this.registerContext.register(e),this},r.prototype.unregister=function(e){var t=this;return this.configuration.register=!1,this.transport&&this.transport.afterConnected(function(){t.registerContext.unregister(e)}),this},r.prototype.isRegistered=function(){return this.registerContext.registered},r.prototype.invite=function(e,t,r){var n=this,i=new y.InviteClientContext(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){i.invite(),n.emit("inviteSent",i)}),i},r.prototype.subscribe=function(e,t,r){var n=new T.Subscription(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){return n.subscribe()}),n},r.prototype.publish=function(e,t,r,n){var i=new f.PublishContext(this,e,t,n);return this.transport&&this.transport.afterConnected(function(){i.publish(r)}),i},r.prototype.message=function(e,t,r){if(void 0===r&&(r={}),void 0===t)throw new TypeError("Not enough arguments");return r.contentType=r.contentType||"text/plain",r.body=t,this.request(a.C.MESSAGE,e,r)},r.prototype.request=function(e,t,r){var n=new s.ClientContext(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){return n.send()}),n},r.prototype.stop=function(){var t=this;if(this.logger.log("user requested closure..."),this.status===u.UAStatus.STATUS_USER_CLOSED)return this.logger.warn("UA already closed"),this;for(var r in this.logger.log("closing registerContext"),this.registerContext.close(),this.sessions)this.sessions[r]&&(this.logger.log("closing session "+r),this.sessions[r].terminate());for(var n in this.subscriptions)this.subscriptions[n]&&(this.logger.log("unsubscribing from subscription "+n),this.subscriptions[n].close());for(var i in this.earlySubscriptions)this.earlySubscriptions[i]&&(this.logger.log("unsubscribing from early subscription "+i),this.earlySubscriptions[i].close());for(var o in this.publishers)this.publishers[o]&&(this.logger.log("unpublish "+o),this.publishers[o].close());for(var s in this.applicants)this.applicants[s]&&this.applicants[s].close();if(this.status=u.UAStatus.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount&&this.transport)this.transport.disconnect();else{var a=function(){0===t.nistTransactionsCount&&0===t.nictTransactionsCount&&(t.removeListener("transactionDestroyed",a),t.transport&&t.transport.disconnect())};this.on("transactionDestroyed",a)}return"function"==typeof A.removeEventListener&&(e.chrome&&e.chrome.app&&e.chrome.app.runtime||A.removeEventListener("unload",this.environListener)),this},r.prototype.start=function(){var t=this;if(this.logger.log("user requested startup..."),this.status===u.UAStatus.STATUS_INIT){if(this.status=u.UAStatus.STATUS_STARTING,!this.configuration.transportConstructor)throw new l.Exceptions.TransportError("Transport constructor not set");this.transport=new this.configuration.transportConstructor(this.getLogger("sip.transport"),this.configuration.transportOptions),this.setTransportListeners(),this.emit("transportCreated",this.transport),this.transport.connect()}else this.status===u.UAStatus.STATUS_USER_CLOSED?(this.logger.log("resuming"),this.status=u.UAStatus.STATUS_READY,this.transport&&this.transport.connect()):this.status===u.UAStatus.STATUS_STARTING?this.logger.log("UA is in STARTING status, not opening new connection"):this.status===u.UAStatus.STATUS_READY?this.logger.log("UA is in READY status, not resuming"):this.logger.error("Connection is down. Auto-Recovery system is trying to connect");return this.configuration.autostop&&"function"==typeof A.addEventListener&&(e.chrome&&e.chrome.app&&e.chrome.app.runtime||(this.environListener=this.stop,A.addEventListener("unload",function(){return t.environListener()}))),this},r.prototype.normalizeTarget=function(e){return w.Utils.normalizeTarget(e,this.configuration.hostportParams)},r.prototype.getLogger=function(e,t){return this.log.getLogger(e,t)},r.prototype.getLoggerFactory=function(){return this.log},r.prototype.newTransaction=function(e){this.transactions[e.kind][e.id]=e,this.emit("newTransaction",{transaction:e})},r.prototype.destroyTransaction=function(e){delete this.transactions[e.kind][e.id],this.emit("transactionDestroyed",{transaction:e})},r.prototype.findSession=function(e){return this.sessions[e.callId+e.fromTag]||this.sessions[e.callId+e.toTag]||void 0},r.prototype.on=function(e,r){return t.prototype.on.call(this,e,r)},r.prototype.saveCredentials=function(e){return this.cache.credentials[e.realm]=this.cache.credentials[e.realm]||{},this.cache.credentials[e.realm][e.uri]=e,this},r.prototype.getCredentials=function(e){var t=e.ruri.type===u.TypeStrings.URI?e.ruri.host:"";if(t&&this.cache.credentials[t]&&this.cache.credentials[t][e.ruri.toString()]){var r=this.cache.credentials[t][e.ruri.toString()];return r.method=e.method,r}},r.prototype.onTransportError=function(){this.status!==u.UAStatus.STATUS_USER_CLOSED&&(this.error&&this.error===r.C.NETWORK_ERROR||(this.status=u.UAStatus.STATUS_NOT_READY,this.error=r.C.NETWORK_ERROR))},r.prototype.setTransportListeners=function(){var e=this;this.transport&&(this.transport.on("connected",function(){return e.onTransportConnected()}),this.transport.on("message",function(t){return e.onTransportReceiveMsg(t)}),this.transport.on("transportError",function(){return e.onTransportError()}))},r.prototype.onTransportConnected=function(){var e=this;this.configuration.register&&Promise.resolve().then(function(){return e.registerContext.register()})},r.prototype.onTransportReceiveMsg=function(e){var t=p.Parser.parseMessage(e,this);if(t)if(this.status===u.UAStatus.STATUS_USER_CLOSED&&t instanceof b.IncomingRequest)this.logger.warn("UA received message when status = USER_CLOSED - aborting");else if(this.transport){if(m.SanityCheck.sanityCheck(t,this,this.transport))if(t instanceof b.IncomingRequest)this.receiveRequestFromTransport(t);else{if(!(t instanceof b.IncomingResponse))throw new Error("Invalid message type.");this.receiveResponseFromTransport(t)}}else this.logger.warn("UA received message without transport - aborting");else this.logger.warn("UA failed to parse incoming SIP message - discarding.")},r.prototype.receiveRequestFromTransport=function(e){if(e.transport=this.transport,!(this.configuration.uri instanceof C.URI))throw new Error("Configuration URI not instance of URI.");if(!e.ruri)throw new Error("Request ruri undefined.");if(e.ruri.scheme===a.C.SIP){var t=e.ruri,r=function(e){return!!e&&e.user===t.user};if(!r(this.configuration.uri)&&!(r(this.contact.uri)||r(this.contact.pubGruu)||r(this.contact.tempGruu)))return this.logger.warn("Request-URI does not point to us"),void(e.method!==a.C.ACK&&e.reply_sl(404));var n=this.transactions.ist[e.viaBranch],i=this.transactions.nist[e.viaBranch];e.method!==a.C.CANCEL?e.method===a.C.ACK&&n&&n.state===S.TransactionState.Accepted?this.receiveRequest(e):n?n.receiveRequest(e):i?i.receiveRequest(e):this.receiveRequest(e):n||i?(e.reply_sl(200),n&&n.state===S.TransactionState.Proceeding&&this.receiveRequest(e)):e.reply_sl(481)}else e.reply_sl(416)},r.prototype.receiveResponseFromTransport=function(e){var t;switch(e.method){case a.C.INVITE:t=this.transactions.ict[e.viaBranch];break;case a.C.ACK:break;default:t=this.transactions.nict[e.viaBranch]}if(t)e.transaction=t,t.receiveResponse(e);else{var r="Discarding unmatched "+e.statusCode+" response to "+e.method+" "+e.viaBranch+".";this.logger.warn(r)}},r.prototype.receiveRequest=function(e){var t,n=this,i=e.method;if(i===a.C.OPTIONS){if(!(l=this.transport))throw new Error("Transport undefined.");var o={loggerFactory:this.getLoggerFactory(),onStateChange:function(e){e===S.TransactionState.Terminated&&n.destroyTransaction(s)},onTransportError:function(e){n.logger.error(e.message)}},s=new S.NonInviteServerTransaction(e,l,o);this.newTransaction(s),e.reply(200,void 0,["Allow: "+r.C.ALLOWED_METHODS.toString(),"Accept: "+r.C.ACCEPTED_BODY_TYPES.toString()])}else i===a.C.MESSAGE?((t=new v.ServerContext(this,e)).body=e.body,t.contentType=e.getHeader("Content-Type")||"text/plain",e.reply(200,void 0),this.emit("message",t)):i!==a.C.INVITE&&i!==a.C.ACK&&(t=new v.ServerContext(this,e));if(e.toTag){var c=this.findDialog(e);if(c){if(i===a.C.INVITE){var l;if(!(l=this.transport))throw new Error("Transport undefined.");o={loggerFactory:this.log,onStateChange:function(e){e===S.TransactionState.Terminated&&n.destroyTransaction(h)},onTransportError:function(e){n.logger.error(e.message),c.owner.onTransportError()}};var h=new S.InviteServerTransaction(e,l,o);this.newTransaction(h)}c.receiveRequest(e)}else if(i===a.C.NOTIFY){m=this.findSession(e);var d=this.findEarlySubscription(e);m?m.receiveRequest(e):d?d.receiveRequest(e):(this.logger.warn("received NOTIFY request for a non existent session or subscription"),e.reply(481,"Subscription does not exist"))}else i!==a.C.ACK&&e.reply(481)}else switch(i){case a.C.INVITE:var p=this.configuration.replaces!==a.C.supported.UNSUPPORTED&&e.parseHeader("replaces"),f=void 0;if(p){if(!(f=this.dialogs[p.call_id+p.replaces_to_tag+p.replaces_from_tag]))return void e.reply_sl(481,void 0);if(f.owner.type!==u.TypeStrings.Subscription&&f.owner.status===u.SessionStatus.STATUS_TERMINATED)return void e.reply_sl(603,void 0);if(f.state===u.DialogStatus.STATUS_CONFIRMED&&p.earlyOnly)return void e.reply_sl(486,void 0)}var g=new y.InviteServerContext(this,e);f&&f.owner.type!==u.TypeStrings.Subscription&&(g.replacee=f&&f.owner),this.emit("invite",g);break;case a.C.BYE:e.reply(481);break;case a.C.CANCEL:var m;(m=this.findSession(e))?m.receiveRequest(e):this.logger.warn("received CANCEL request for a non existent session");break;case a.C.ACK:break;case a.C.NOTIFY:this.configuration.allowLegacyNotifications&&this.listeners("notify").length>0?(e.reply(200,void 0),this.emit("notify",{request:e})):e.reply(481,"Subscription does not exist");break;case a.C.REFER:if(this.logger.log("Received an out of dialog refer"),this.configuration.allowOutOfDialogRefers){this.logger.log("Allow out of dialog refers is enabled on the UA");var b=new y.ReferServerContext(this,e);this.listeners("outOfDialogReferRequested").length?this.emit("outOfDialogReferRequested",b):(this.logger.log("No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer"),b.accept({followRefer:!0}));break}e.reply(405);break;default:e.reply(405)}},r.prototype.findDialog=function(e){return this.dialogs[e.callId+e.fromTag+e.toTag]||this.dialogs[e.callId+e.toTag+e.fromTag]||void 0},r.prototype.findEarlySubscription=function(e){return this.earlySubscriptions[e.callId+e.toTag+e.getHeader("event")]||void 0},r.prototype.checkAuthenticationFactory=function(e){if(e instanceof Function)return e.initialize||(e.initialize=function(){return Promise.resolve()}),e},r.prototype.loadConfig=function(e){var t=this,r={viaHost:w.Utils.createRandomToken(12)+".invalid",uri:new C.URI("sip","anonymous."+w.Utils.createRandomToken(6),"anonymous.invalid",void 0,void 0),custom:{},displayName:"",password:void 0,register:!0,registerOptions:{},transportConstructor:_.Transport,transportOptions:{},userAgentString:a.C.USER_AGENT,noAnswerTimeout:60,hackViaTcp:!1,hackIpInContact:!1,hackWssInTransport:!1,hackAllowUnregisteredOptionTags:!1,sessionDescriptionHandlerFactoryOptions:{constraints:{},peerConnectionOptions:{}},extraSupported:[],contactName:w.Utils.createRandomToken(8),contactTransport:"ws",forceRport:!1,autostart:!0,autostop:!0,rel100:a.C.supported.UNSUPPORTED,dtmfType:a.C.dtmfType.INFO,replaces:a.C.supported.UNSUPPORTED,sessionDescriptionHandlerFactory:E.SessionDescriptionHandler.defaultFactory,authenticationFactory:this.checkAuthenticationFactory(function(e){return new c.DigestAuthentication(e)}),allowLegacyNotifications:!1,allowOutOfDialogRefers:!1},n=this.getConfigurationCheck();for(var i in n.mandatory){if(!e.hasOwnProperty(i))throw new l.Exceptions.ConfigurationError(i);var o=e[i];if(void 0===(s=n.mandatory[i](o)))throw new l.Exceptions.ConfigurationError(i,o);r[i]=s}for(var i in n.optional)if(e.hasOwnProperty(i)){var s;if((o=e[i])instanceof Array&&0===o.length||null===o||""===o||void 0===o||"number"==typeof o&&isNaN(o))continue;if(void 0===(s=n.optional[i](o)))throw new l.Exceptions.ConfigurationError(i,o);r[i]=s}0===r.displayName&&(r.displayName="0"),r.sipjsId=w.Utils.createRandomToken(5);var u=r.uri.clone();if(u.user=void 0,r.hostportParams=u.toRaw().replace(/^sip:/i,""),r.authorizationUser||(r.authorizationUser=r.uri.user),r.noAnswerTimeout=1e3*r.noAnswerTimeout,r.hackIpInContact)if("boolean"==typeof r.hackIpInContact){var h=Math.floor(254*Math.random()+1);r.viaHost="192.0.2."+h}else"string"==typeof r.hackIpInContact&&(r.viaHost=r.hackIpInContact);r.hackWssInTransport&&(r.contactTransport="wss"),this.contact={pubGruu:void 0,tempGruu:void 0,uri:new C.URI("sip",r.contactName,r.viaHost,void 0,{transport:r.contactTransport}),toString:function(e){void 0===e&&(e={});var n=e.anonymous||!1,i=e.outbound||!1,o="<";return o+=n?(t.contact.tempGruu||"sip:anonymous@anonymous.invalid;transport="+r.contactTransport).toString():(t.contact.pubGruu||t.contact.uri).toString(),i&&(o+=";ob"),o+=">"}};var d={};for(var i in r)r.hasOwnProperty(i)&&(d[i]=r[i]);for(var i in Object.assign(this.configuration,d),this.logger.log("configuration parameters after validation:"),r)if(r.hasOwnProperty(i))switch(i){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log("\xb7 "+i+": "+r[i]);break;case"password":this.logger.log("\xb7 "+i+": NOT SHOWN");break;case"transportConstructor":this.logger.log("\xb7 "+i+": "+r[i].name);break;default:this.logger.log("\xb7 "+i+": "+JSON.stringify(r[i]))}},r.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{uri:function(e){/^sip:/i.test(e)||(e=a.C.SIP+":"+e);var t=h.Grammar.URIParse(e);return t&&t.user?t:void 0},transportConstructor:function(e){if(e instanceof Function)return e},transportOptions:function(e){if("object"==typeof e)return e},authorizationUser:function(e){return-1===h.Grammar.parse('"'+e+'"',"quoted_string")?void 0:e},displayName:function(e){return-1===h.Grammar.parse('"'+e+'"',"displayName")?void 0:e},dtmfType:function(e){switch(e){case a.C.dtmfType.RTP:return a.C.dtmfType.RTP;case a.C.dtmfType.INFO:default:return a.C.dtmfType.INFO}},hackViaTcp:function(e){if("boolean"==typeof e)return e},hackIpInContact:function(e){return"boolean"==typeof e?e:"string"==typeof e&&-1!==h.Grammar.parse(e,"host")?e:void 0},hackWssInTransport:function(e){if("boolean"==typeof e)return e},hackAllowUnregisteredOptionTags:function(e){if("boolean"==typeof e)return e},contactTransport:function(e){if("string"==typeof e)return e},extraSupported:function(e){if(e instanceof Array){for(var t=0,r=e;t<r.length;t++){if("string"!=typeof r[t])return}return e}},forceRport:function(e){if("boolean"==typeof e)return e},noAnswerTimeout:function(e){if(w.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},password:function(e){return String(e)},rel100:function(e){return e===a.C.supported.REQUIRED?a.C.supported.REQUIRED:e===a.C.supported.SUPPORTED?a.C.supported.SUPPORTED:a.C.supported.UNSUPPORTED},replaces:function(e){return e===a.C.supported.REQUIRED?a.C.supported.REQUIRED:e===a.C.supported.SUPPORTED?a.C.supported.SUPPORTED:a.C.supported.UNSUPPORTED},register:function(e){if("boolean"==typeof e)return e},registerOptions:function(e){if("object"==typeof e)return e},userAgentString:function(e){if("string"==typeof e)return e},autostart:function(e){if("boolean"==typeof e)return e},autostop:function(e){if("boolean"==typeof e)return e},sessionDescriptionHandlerFactory:function(e){if(e instanceof Function)return e},sessionDescriptionHandlerFactoryOptions:function(e){if("object"==typeof e)return e},authenticationFactory:this.checkAuthenticationFactory,allowLegacyNotifications:function(e){if("boolean"==typeof e)return e},custom:function(e){if("object"==typeof e)return e},contactName:function(e){if("string"==typeof e)return e}}}},r.C={STATUS_INIT:0,STATUS_STARTING:1,STATUS_READY:2,STATUS_USER_CLOSED:3,STATUS_NOT_READY:4,CONFIGURATION_ERROR:1,NETWORK_ERROR:2,ALLOWED_METHODS:["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"],ACCEPTED_BODY_TYPES:["application/sdp","application/dtmf-relay"],MAX_FORWARDS:70,TAG_LENGTH:10},r}(o.EventEmitter);t.UA=x,function(e){!function(e){e.RTP="rtp",e.INFO="info"}(e.DtmfType||(e.DtmfType={}))}(x=t.UA||(t.UA={})),t.UA=x}).call(this,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){for(var r,n=[],i=e.split(/\r\n/),o=0;o<i.length;){var s=i[o];if(/^m=(?:audio|video)/.test(s))r={index:o,stripped:[]},n.push(r);else if(r){var a=/^a=rtpmap:(\d+) ([^\/]+)\//.exec(s);if(a&&t===a[2]){i.splice(o,1),r.stripped.push(a[1]);continue}}o++}for(var c=0,u=n;c<u.length;c++){for(var l=u[c],h=i[l.index].split(" "),d=3;d<h.length;)-1===l.stripped.indexOf(h[d])?d++:h.splice(d,1);i[l.index]=h.join(" ")}return i.join("\r\n")},i=function(e,t){var r=new RegExp("m="+t+".*$","gm"),n=new RegExp("^a=group:.*$","gm");if(r.test(e)){var i,o=(e=e.split(/^m=/gm).filter(function(e){if(e.substr(0,t.length)===t){if(i=e.match(/^a=mid:.*$/gm)){var r=i[0].match(/:.+$/g);r&&(i=r[0].substr(1))}return!1}return!0}).join("m=")).match(n);if(o&&1===o.length){var s=o[0],a=new RegExp(" *"+i+"[^ ]*","g");s=s.replace(a,""),e=e.split(n).join(s)}}return e};t.stripTcpCandidates=function(e){return e.sdp=(e.sdp||"").replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/gim,""),Promise.resolve(e)},t.stripTelephoneEvent=function(e){return e.sdp=n(e.sdp||"","telephone-event"),Promise.resolve(e)},t.cleanJitsiSdpImageattr=function(e){return e.sdp=(e.sdp||"").replace(/^(a=imageattr:.*?)(x|y)=\[0-/gm,"$1$2=[1:"),Promise.resolve(e)},t.stripG722=function(e){return e.sdp=n(e.sdp||"","G722"),Promise.resolve(e)},t.stripRtpPayload=function(e){return function(t){return t.sdp=n(t.sdp||"",e),Promise.resolve(t)}},t.stripVideo=function(e){return e.sdp=i(e.sdp||"","video"),Promise.resolve(e)},t.addMidLines=function(e){var t=e.sdp||"";if(-1===t.search(/^a=mid.*$/gm)){var r=t.match(/^m=.*$/gm),n=t.split(/^m=.*$/gm);r&&r.forEach(function(e,t){r[t]=e+"\na=mid:"+t}),n.forEach(function(e,t){r&&r[t]&&(n[t]=e+r[t])}),t=n.join(""),e.sdp=t}return Promise.resolve(e)}},function(e,t,r){"use strict";(function(t){var n=r(4).EventEmitter,i=r(0),o=r(11),s=r(18),a=r(6),c=function(){};function u(e,t,r){c(e,t);var i=this;n.call(this),setTimeout(function(){i._start(e,t,r)},0)}i(u,n),u.prototype._start=function(e,r,n){c("_start");var i=this,s=new t.XDomainRequest;r=a.addQuery(r,"t="+ +new Date),s.onerror=function(){c("onerror"),i._error()},s.ontimeout=function(){c("ontimeout"),i._error()},s.onprogress=function(){c("progress",s.responseText),i.emit("chunk",200,s.responseText)},s.onload=function(){c("load"),i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd(function(){i._cleanup(!0)});try{this.xdr.open(e,r),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(e){this._error()}},u.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},u.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},u.prototype.close=function(){c("close"),this._cleanup(!0)},u.enabled=!(!t.XDomainRequest||!s.hasDomain()),e.exports=u}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(53),o=r(31);e.exports=function(e){function r(t,r){i.call(this,e.transportName,t,r)}return n(r,i),r.enabled=function(r,n){if(!t.document)return!1;var s=o.extend({},n);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},r.transportName="iframe-"+e.transportName,r.needBody=!0,r.roundTrips=i.roundTrips+e.roundTrips-1,r.facadeTransport=e,r}}).call(this,r(1))},function(e,t,r){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,i=arguments.length;n<i;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}}},function(e,t,r){"use strict";function n(e){this.type=e}n.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,e.exports=n},function(e){e.exports={name:"ccbar.js",title:"CCBAR.js",description:"A simple, intuitive, and powerful JavaScript signaling library",version:"1.0.12-0",license:"MIT",main:"./lib/index.js",types:"./lib/index.d.ts",homepage:"https://github.com/JacketZeng/ccbar#readme",author:"JacketZeng",repository:{type:"git",url:"https://github.com/JacketZeng/ccbar.git"},keywords:["ccbar","webrtc","library","websocket","javascript","typescript"],dependencies:{"@stomp/stompjs":"^5.4.2","crypto-js":"^3.1.9-1",jquery:"^3.4.1",rxjs:"^6.5.2","sockjs-client":"^1.3.0"},devDependencies:{"@types/jasmine":"^3.3.11","@types/jquery":"^3.3.30","@types/node":"^11.11.6","circular-dependency-plugin":"^5.0.2","jasmine-core":"^3.3.0",karma:"^4.0.1","karma-chrome-launcher":"^2.2.0","karma-cli":"^2.0.0","karma-jasmine":"^2.0.1","karma-jasmine-html-reporter":"^1.4.0","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^3.0.5",pegjs:"^0.10.0","ts-loader":"^5.3.3","ts-pegjs":"0.2.2",tslint:"^5.14.0",typescript:"^3.3.4000",webpack:"^4.29.6","webpack-cli":"^3.3.0"},engines:{node:">=8.0"},scripts:{prebuild:"tslint -p tsconfig-base.json -c tslint.json","generate-grammar":"node build/grammarGenerator.js","build-reg-bundle":"webpack --progress --config build/webpack.config.js --env.buildType reg","build-min-bundle":"webpack --progress --config build/webpack.config.js --env.buildType min","build-bundles":"npm run build-reg-bundle && npm run build-min-bundle","build-lib":"tsc -p src","build-test":"tsc -p test","copy-demo-files":"cp dist/ccbar.min.js ../demo/api/js/ccbar.js && cp dist/ccbar.min.js ../demo/example/js/ccbar.js","copy-dist-files":"cp dist/ccbar.min.js dist/ccbar-$npm_package_version.js && cp dist/ccbar.min.js dist/ccbar-$npm_package_version.min.js",build:"npm run generate-grammar && npm run build-lib && npm run build-bundles && npm run copy-dist-files && npm run copy-demo-files",browserTest:"npm run build-test && sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run",commandLineTest:"npm run build-test && karma start --reporters mocha --browsers ChromeHeadless --single-run",buildAndTest:"npm run build && npm run commandLineTest",buildAndBrowserTest:"npm run build && npm run browserTest"}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=function(e){function t(t,r,n){var i=e.call(this,n)||this;if(i.type=o.TypeStrings.NameAddrHeader,!t||t.type!==o.TypeStrings.URI)throw new TypeError('missing or invalid "uri" parameter');return i.uri=t,i._displayName=r,i}return i(t,e),Object.defineProperty(t.prototype,"friendlyName",{get:function(){return this.displayName||this.uri.aor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._displayName},set:function(e){this._displayName=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))},t.prototype.toString=function(){var e=this.displayName||"0"===this.displayName?'"'+this.displayName+'" ':"";for(var t in e+="<"+this.uri.toString()+">",this.parameters)this.parameters.hasOwnProperty(t)&&(e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]));return e},t}(r(22).Parameters);t.NameAddrHeader=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(63),i=r(2),o=r(5),s=function(){function e(e){this.type=i.TypeStrings.DigestAuthentication,this.logger=e.getLogger("sipjs.digestauthentication"),this.username=e.configuration.authorizationUser,this.password=e.configuration.password,this.nc=0,this.ncHex="00000000"}return e.prototype.authenticate=function(e,t,r){if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=e.method,this.uri=e.ruri,this.cnonce=o.Utils.createRandomToken(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(r),!0},e.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")},e.prototype.updateNcHex=function(){var e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e},e.prototype.calculateResponse=function(e){var t,r=n(this.username+":"+this.realm+":"+this.password);"auth"===this.qop?(t=n(this.method+":"+this.uri),this.response=n(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+t)):"auth-int"===this.qop?(t=n(this.method+":"+this.uri+":"+n(e||"")),this.response=n(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+t)):void 0===this.qop&&(t=n(this.method+":"+this.uri),this.response=n(r+":"+this.nonce+":"+t))},e}();t.DigestAuthentication=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2);!function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"}(n=t.Levels||(t.Levels={}));var o=function(){function e(){this.builtinEnabled=!0,this._level=n.log,this.loggers={},this.type=i.TypeStrings.LoggerFactory,this.logger=this.getLogger("sip:loggerfactory")}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){e>=0&&e<=3?this._level=e:e>3?this._level=3:n.hasOwnProperty(e)?this._level=e:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connector",{get:function(){return this._connector},set:function(e){e?"function"==typeof e?this._connector=e:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(e)):this._connector=void 0},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){if(t&&3===this.level)return new s(this,e,t);if(this.loggers[e])return this.loggers[e];var r=new s(this,e);return this.loggers[e]=r,r},e.prototype.genericLog=function(e,t,r,i){this.level>=e&&this.builtinEnabled&&this.print(console[n[e]],t,r,i),this.connector&&this.connector(n[e],t,r,i)},e.prototype.print=function(e,t,r,n){if("string"==typeof n){var i=[new Date,t];r&&i.push(r),n=i.concat(n).join(" | ")}e.call(console,n)},e}();t.LoggerFactory=o;var s=function(){function e(e,t,r){this.type=i.TypeStrings.Logger,this.logger=e,this.category=t,this.label=r}return e.prototype.error=function(e){this.genericLog(n.error,e)},e.prototype.warn=function(e){this.genericLog(n.warn,e)},e.prototype.log=function(e){this.genericLog(n.log,e)},e.prototype.debug=function(e){this.genericLog(n.debug,e)},e.prototype.genericLog=function(e,t){this.logger.genericLog(e,this.category,this.label,t)},e}();t.Logger=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(9),o=r(13);!function(e){function t(e,t){var r=t,n=0,i=0;if(e.substring(r,r+2).match(/(^\r\n)/))return-2;for(;0===n;){if(-1===(i=e.indexOf("\r\n",r)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?r=i+2:n=i}return n}function r(e,t,r,o){var s,a=t.indexOf(":",r),c=t.substring(r,a).trim(),u=t.substring(a+1,o).trim();switch(c.toLowerCase()){case"via":case"v":e.addHeader("via",u),1===e.getHeaders("via").length?(s=e.parseHeader("Via"))&&(e.via=s,e.viaBranch=s.branch):s=0;break;case"from":case"f":e.setHeader("from",u),(s=e.parseHeader("from"))&&(e.from=s,e.fromTag=s.getParam("tag"));break;case"to":case"t":e.setHeader("to",u),(s=e.parseHeader("to"))&&(e.to=s,e.toTag=s.getParam("tag"));break;case"record-route":if(-1===(s=i.Grammar.parse(u,"Record_Route"))){s=void 0;break}for(var l in s)s[l]&&(e.addHeader("record-route",u.substring(s[l].position,s[l].offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=s[l].parsed);break;case"call-id":case"i":e.setHeader("call-id",u),(s=e.parseHeader("call-id"))&&(e.callId=u);break;case"contact":case"m":if(-1===(s=i.Grammar.parse(u,"Contact"))){s=void 0;break}if(!(s instanceof Array)){s=void 0;break}s.forEach(function(t){e.addHeader("contact",u.substring(t.position,t.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=t.parsed});break;case"content-length":case"l":e.setHeader("content-length",u),s=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",u),s=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",u),(s=e.parseHeader("cseq"))&&(e.cseq=s.value),e.type===n.TypeStrings.IncomingResponse&&(e.method=s.method);break;case"max-forwards":e.setHeader("max-forwards",u),s=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",u),s=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",u),s=e.parseHeader("proxy-authenticate");break;case"refer-to":case"r":e.setHeader("refer-to",u),(s=e.parseHeader("refer-to"))&&(e.referTo=s);break;default:e.setHeader(c,u),s=0}return void 0!==s||{error:"error parsing header '"+c+"'"}}e.getHeader=t,e.parseHeader=r,e.parseMessage=function(e,n){var s=0,a=e.indexOf("\r\n"),c=n.getLogger("sip.parser");if(-1!==a){var u,l=e.substring(0,a),h=i.Grammar.parse(l,"Request_Response");if(-1!==h){var d;for(h.status_code?((u=new o.IncomingResponse(n)).statusCode=h.status_code,u.reasonPhrase=h.reason_phrase):((u=new o.IncomingRequest(n)).method=h.method,u.ruri=h.uri),u.data=e,s=a+2;;){if(-2===(a=t(e,s))){d=s+2;break}if(-1===a)return void c.error("malformed message");if(!0!==r(u,e,s,a))return void c.error(h.error);s=a+2}return u.hasHeader("content-length")?u.body=e.substr(d,Number(u.getHeader("content-length"))):u.body=e.substring(d),u}c.warn('error parsing first line of SIP message: "'+l+'"')}else c.warn("no CRLF found, not a SIP message, discarded")}}(t.Parser||(t.Parser={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(3),a=r(2),c=r(8),u=r(13),l=r(5),h=function(e){function t(t,r,n,i){void 0===i&&(i={});var o=this;if(i.extraHeaders=(i.extraHeaders||[]).slice(),i.contentType=i.contentType||"text/plain","number"!=typeof i.expires||i.expires%1!=0?i.expires=3600:i.expires=Number(i.expires),"boolean"!=typeof i.unpublishOnClose&&(i.unpublishOnClose=!0),null==r||""===r)throw new c.Exceptions.MethodParameterError("Publish","Target",r);if(void 0===(r=t.normalizeTarget(r)))throw new c.Exceptions.MethodParameterError("Publish","Target",r);if((o=e.call(this,t,s.C.PUBLISH,r,i)||this).type=a.TypeStrings.PublishContext,o.options=i,o.target=r,null==n||""===n)throw new c.Exceptions.MethodParameterError("Publish","Event",n);return o.event=n,o.logger=t.getLogger("sip.publish"),o.pubRequestExpires=o.options.expires,t.on("transportCreated",function(e){e.on("transportError",function(){return o.onTransportError()})}),o}return i(t,e),t.prototype.publish=function(e){this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.options.body=e,this.pubRequestBody=this.options.body,0===this.pubRequestExpires&&(this.pubRequestExpires=this.options.expires,this.pubRequestEtag=void 0),this.ua.publishers[this.target.toString()+":"+this.event]||(this.ua.publishers[this.target.toString()+":"+this.event]=this),this.sendPublishRequest()},t.prototype.unpublish=function(){this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,void 0!==this.pubRequestEtag&&this.sendPublishRequest()},t.prototype.close=function(){this.options.unpublishOnClose?this.unpublish():(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,this.pubRequestEtag=void 0),this.ua.publishers[this.target.toString()+":"+this.event]&&delete this.ua.publishers[this.target.toString()+":"+this.event]},t.prototype.onRequestTimeout=function(){e.prototype.onRequestTimeout.call(this),this.emit("unpublished",void 0,s.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){e.prototype.onTransportError.call(this),this.emit("unpublished",void 0,s.C.causes.CONNECTION_ERROR)},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode||0,n=l.Utils.getReasonPhrase(r);switch(!0){case/^1[0-9]{2}$/.test(r.toString()):this.emit("progress",e,n);break;case/^2[0-9]{2}$/.test(r.toString()):if(e.hasHeader("SIP-ETag")?this.pubRequestEtag=e.getHeader("SIP-ETag"):this.logger.warn("SIP-ETag header missing in a 200-class response to PUBLISH"),e.hasHeader("Expires")){var i=Number(e.getHeader("Expires"));"number"==typeof i&&i>=0&&i<=this.pubRequestExpires?this.pubRequestExpires=i:this.logger.warn("Bad Expires header in a 200-class response to PUBLISH")}else this.logger.warn("Expires header missing in a 200-class response to PUBLISH");0!==this.pubRequestExpires?(this.publishRefreshTimer=setTimeout(function(){return t.refreshRequest()},900*this.pubRequestExpires),this.emit("published",e,n)):this.emit("unpublished",e,n);break;case/^412$/.test(r.toString()):void 0!==this.pubRequestEtag&&0!==this.pubRequestExpires?(this.logger.warn("412 response to PUBLISH, recovering"),this.pubRequestEtag=void 0,this.emit("progress",e,n),this.publish(this.options.body)):(this.logger.warn("412 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n));break;case/^423$/.test(r.toString()):if(0!==this.pubRequestExpires&&e.hasHeader("Min-Expires")){var o=Number(e.getHeader("Min-Expires"));"number"==typeof o||o>this.pubRequestExpires?(this.logger.warn("423 code in response to PUBLISH, adjusting the Expires value and trying to recover"),this.pubRequestExpires=o,this.emit("progress",e,n),this.publish(this.options.body)):(this.logger.warn("Bad 423 response Min-Expires header received for PUBLISH"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n))}else this.logger.warn("423 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n);break;default:this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n)}0===this.pubRequestExpires&&(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestEtag=void 0)},t.prototype.refreshRequest=function(){if(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,void 0===this.pubRequestEtag)throw new c.Exceptions.MethodParameterError("Publish","Body",void 0);if(0===this.pubRequestExpires)throw new c.Exceptions.MethodParameterError("Publish","Expire",this.pubRequestExpires);this.sendPublishRequest()},t.prototype.sendPublishRequest=function(){var e=Object.create(this.options||Object.prototype);e.extraHeaders=(this.options.extraHeaders||[]).slice(),e.extraHeaders.push("Event: "+this.event),e.extraHeaders.push("Expires: "+this.pubRequestExpires),void 0!==this.pubRequestEtag&&e.extraHeaders.push("SIP-If-Match: "+this.pubRequestEtag),this.request=new u.OutgoingRequest(s.C.PUBLISH,this.target,this.ua,this.options.params,e.extraHeaders),void 0!==this.pubRequestBody&&(this.request.body={body:this.pubRequestBody,contentType:this.options.contentType}),this.send()},t}(o.ClientContext);t.PublishContext=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(14),a=r(3),c=r(2),u=r(8),l=r(9),h=r(5);function d(e){var t={expires:600,extraContactHeaderParams:[],instanceId:void 0,params:{},regId:void 0,registrar:void 0},r={mandatory:{},optional:{expires:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},extraContactHeaderParams:function(e){if(e instanceof Array)return e.filter(function(e){return"string"==typeof e})},instanceId:function(e){if("string"==typeof e)return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===l.Grammar.parse(e,"uuid")?void 0:e},params:function(e){if("object"==typeof e)return e},regId:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},registrar:function(e){if("string"==typeof e){/^sip:/i.test(e)||(e=a.C.SIP+":"+e);var t=l.Grammar.URIParse(e);return t?t.user?void 0:t:void 0}}}};for(var n in r.mandatory){if(!e.hasOwnProperty(n))throw new u.Exceptions.ConfigurationError(n);var i=e[n];if(void 0===(o=r.mandatory[n](i)))throw new u.Exceptions.ConfigurationError(n,i);t[n]=o}for(var n in r.optional)if(e.hasOwnProperty(n)){var o;if((i=e[n])instanceof Array&&0===i.length)continue;if(null===i||""===i||void 0===i||"number"==typeof i&&isNaN(i))continue;if(void 0===(o=r.optional[n](i)))throw new u.Exceptions.ConfigurationError(n,i);t[n]=o}return t}var p=function(e){function t(t,r){void 0===r&&(r={});var n=this,i=d(r);if(i.regId&&!i.instanceId?i.instanceId=h.Utils.newUUID():!i.regId&&i.instanceId&&(i.regId=1),i.params.toUri=i.params.toUri||t.configuration.uri,i.params.toDisplayName=i.params.toDisplayName||t.configuration.displayName,i.params.callId=i.params.callId||h.Utils.createRandomToken(22),i.params.cseq=i.params.cseq||Math.floor(1e4*Math.random()),!i.registrar){var o={};"object"==typeof t.configuration.uri?(o=t.configuration.uri.clone()).user=void 0:o=t.configuration.uri,i.registrar=o}for(var s in(n=e.call(this,t,a.C.REGISTER,i.registrar,i)||this).type=c.TypeStrings.RegisterContext,n.options=i,n.logger=t.getLogger("sip.registercontext"),n.logger.log("configuration parameters for RegisterContext after validation:"),i)i.hasOwnProperty(s)&&n.logger.log("\xb7 "+s+": "+JSON.stringify(i[s]));return n.expires=i.expires,n.cseq=i.params.cseq,n.contact=t.contact.toString(),n.registered=!1,t.on("transportCreated",function(e){e.on("disconnected",function(){return n.onTransportDisconnected()})}),n}return i(t,e),t.prototype.register=function(e){var t=this;void 0===e&&(e={}),this.options=o({},this.options,e);var r=(this.options.extraHeaders||[]).slice();r.push("Contact: "+this.generateContactHeader(this.expires)),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.closeHeaders=this.options.closeWithHeaders?(this.options.extraHeaders||[]).slice():[],this.receiveResponse=function(e){if(e.cseq===t.cseq){void 0!==t.registrationTimer&&(clearTimeout(t.registrationTimer),t.registrationTimer=void 0);var r=(e.statusCode||0).toString();switch(!0){case/^1[0-9]{2}$/.test(r):t.emit("progress",e);break;case/^2[0-9]{2}$/.test(r):t.emit("accepted",e);var n=void 0;e.hasHeader("expires")&&(n=Number(e.getHeader("expires"))),void 0!==t.registrationExpiredTimer&&(clearTimeout(t.registrationExpiredTimer),t.registrationExpiredTimer=void 0);var i=e.getHeaders("contact").length;if(!i){t.logger.warn("no Contact header in response to REGISTER, response ignored");break}for(var o=void 0;i--;){if((o=e.parseHeader("contact",i)).uri.user===t.ua.contact.uri.user){n=o.getParam("expires");break}o=void 0}if(!o){t.logger.warn("no Contact header pointing to us, response ignored");break}void 0===n&&(n=t.expires),t.registrationTimer=setTimeout(function(){t.registrationTimer=void 0,t.register(t.options)},1e3*n-3e3),t.registrationExpiredTimer=setTimeout(function(){t.logger.warn("registration expired"),t.registered&&t.unregistered(void 0,a.C.causes.EXPIRES)},1e3*n),o.hasParam("temp-gruu")&&(t.ua.contact.tempGruu=l.Grammar.URIParse(o.getParam("temp-gruu").replace(/"/g,""))),o.hasParam("pub-gruu")&&(t.ua.contact.pubGruu=l.Grammar.URIParse(o.getParam("pub-gruu").replace(/"/g,""))),t.registered=!0,t.emit("registered",e||void 0);break;case/^423$/.test(r):e.hasHeader("min-expires")?(t.expires=Number(e.getHeader("min-expires")),t.register(t.options)):(t.logger.warn("423 response received for REGISTER without Min-Expires"),t.registrationFailure(e,a.C.causes.SIP_FAILURE_CODE));break;default:t.registrationFailure(e,h.Utils.sipErrorCause(e.statusCode||0))}}},this.onRequestTimeout=function(){t.registrationFailure(void 0,a.C.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){t.registrationFailure(void 0,a.C.causes.CONNECTION_ERROR)},this.cseq++,this.request&&(this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=r),this.send()},t.prototype.close=function(){var e={all:!1,extraHeaders:this.closeHeaders};this.registeredBefore=this.registered,this.registered&&this.unregister(e)},t.prototype.unregister=function(e){var t=this;void 0===e&&(e={}),this.registered||e.all||this.logger.warn("Already unregistered, but sending an unregister anyways.");var r=(e.extraHeaders||[]).slice();this.registered=!1,void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),e.all?(r.push("Contact: *"),r.push("Expires: 0")):r.push("Contact: "+this.generateContactHeader(0)),this.receiveResponse=function(e){var r=e&&e.statusCode?e.statusCode.toString():"";switch(!0){case/^1[0-9]{2}$/.test(r):t.emit("progress",e);break;case/^2[0-9]{2}$/.test(r):t.emit("accepted",e),void 0!==t.registrationExpiredTimer&&(clearTimeout(t.registrationExpiredTimer),t.registrationExpiredTimer=void 0),t.unregistered(e);break;default:t.unregistered(e,h.Utils.sipErrorCause(e.statusCode||0))}},this.onRequestTimeout=function(){},this.cseq++,this.request&&(this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=r),this.send()},t.prototype.unregistered=function(e,t){this.registered=!1,this.emit("unregistered",e||void 0,t||void 0)},t.prototype.registrationFailure=function(e,t){this.emit("failed",e||void 0,t||void 0)},t.prototype.onTransportDisconnected=function(){this.registeredBefore=this.registered,void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),void 0!==this.registrationExpiredTimer&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0),this.registered&&this.unregistered(void 0,a.C.causes.CONNECTION_ERROR)},t.prototype.generateContactHeader=function(e){void 0===e&&(e=0);var t=this.contact;return this.options.regId&&this.options.instanceId&&(t+=";reg-id="+this.options.regId,t+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(function(e){t+=";"+e}),t+=";expires="+e},t}(s.ClientContext);t.RegisterContext=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(2),o=r(5);!function(e){function t(e,t,r){for(var n=o.Utils.buildStatusLine(e),i=0,s=t.getHeaders("via");i<s.length;i++){n+="Via: "+s[i]+"\r\n"}var a=t.getHeader("To")||"";t.toTag||(a+=";tag="+o.Utils.newTag()),n+="To: "+a+"\r\n",n+="From: "+t.getHeader("From")+"\r\n",n+="Call-ID: "+t.callId+"\r\n",n+="CSeq: "+t.cseq+" "+t.method+"\r\n",n+="\r\n",r.send(n)}function r(e,r,n){return!(!e.ruri||"sip"!==e.ruri.scheme)||(t(416,e,n),!1)}function s(e,r,n){return!(!e.toTag&&e.callId.substr(0,5)===r.configuration.sipjsId)||(t(482,e,n),!1)}function a(e,r,n){var i=o.Utils.str_utf8_length(e.body),s=e.getHeader("content-length");return!(s&&i<Number(s))||(t(400,e,n),!1)}function c(e,r,i){var o=e.fromTag,s=e.callId,a=e.cseq;if(!e.toTag)if(e.method===n.C.INVITE){if(r.transactions.ist[e.viaBranch])return!0;for(var c in r.transactions.ist){if(r.transactions.ist.hasOwnProperty(c))if((u=r.transactions.ist[c])&&u.request.fromTag===o&&u.request.callId===s&&u.request.cseq===a)return t(482,e,i),!1}}else{if(r.transactions.nist[e.viaBranch])return!0;for(var c in r.transactions.nist){var u;if(r.transactions.nist.hasOwnProperty(c))if((u=r.transactions.nist[c])&&u.request.fromTag===o&&u.request.callId===s&&u.request.cseq===a)return t(482,e,i),!1}}return!0}function u(e,t){return!(e.getHeaders("via").length>1)||(t.getLogger("sip.sanitycheck").warn("More than one Via header field present in the response. Dropping the response"),!1)}function l(e,t){return e.via.host===t.configuration.viaHost&&void 0===e.via.port||(t.getLogger("sip.sanitycheck").warn("Via sent-by in the response does not match UA Via host value. Dropping the response"),!1)}function h(e,t){var r=o.Utils.str_utf8_length(e.body),n=e.getHeader("content-length");return!(n&&r<Number(n))||(t.getLogger("sip.sanitycheck").warn("Message body length is lower than the value in Content-Length header field. Dropping the response"),!1)}function d(e,t){for(var r=0,n=["from","to","call_id","cseq","via"];r<n.length;r++){var i=n[r];if(!e.hasHeader(i))return t.getLogger("sip.sanitycheck").warn("Missing mandatory header field : "+i+". Dropping the response"),!1}return!0}e.reply=t,e.rfc3261_8_2_2_1=r,e.rfc3261_16_3_4=s,e.rfc3261_18_3_request=a,e.rfc3261_8_2_2_2=c,e.rfc3261_8_1_3_3=u,e.rfc3261_18_1_2=l,e.rfc3261_18_3_response=h,e.minimumHeaders=d,e.sanityCheck=function(e,t,n){for(var o=[r,s,a,c],p=[u,l,h],f=0,g=[d];f<g.length;f++)if(!(0,g[f])(e,t,n))return!1;if(e.type===i.TypeStrings.IncomingRequest){for(var m=0,v=o;m<v.length;m++)if(!(0,v[m])(e,t,n))return!1}else if(e.type===i.TypeStrings.IncomingResponse)for(var y=0,b=p;y<b.length;y++)if(!(0,b[y])(e,t,n))return!1;return!0}}(t.SanityCheck||(t.SanityCheck={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(14),a=r(3),c=r(25),u=r(2),l=r(8),h=r(9),d=r(20),p=r(26),f=r(65),g=r(13),m=r(21),v=r(12),y=r(5),b=function(e){function t(r){var n=e.call(this)||this;if(n.data={},n.type=u.TypeStrings.Session,!r)throw new l.Exceptions.SessionDescriptionHandlerError("A session description handler is required for the session to function");return n.status=t.C.STATUS_NULL,n.dialog=void 0,n.pendingReinvite=!1,n.earlyDialogs={},n.sessionDescriptionHandlerFactory=r,n.hasOffer=!1,n.hasAnswer=!1,n.timers={ackTimer:void 0,expiresTimer:void 0,invite2xxTimer:void 0,userNoAnswerTimer:void 0,rel1xxTimer:void 0,prackTimer:void 0},n.startTime=void 0,n.endTime=void 0,n.tones=void 0,n.localHold=!1,n.earlySdp=void 0,n.rel100=a.C.supported.UNSUPPORTED,n.originalReceiveRequest=n.receiveRequest,n}return i(t,e),t.prototype.dtmf=function(e,t){var r=this;if(void 0===t&&(t={}),this.status!==u.SessionStatus.STATUS_CONFIRMED&&this.status!==u.SessionStatus.STATUS_WAITING_FOR_ACK)throw new l.Exceptions.InvalidStateError(this.status);if(!e||!e.toString().match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);var n=function(){if(r.status!==u.SessionStatus.STATUS_TERMINATED&&r.tones&&0!==r.tones.length){var e,i=r.tones.shift();","===i.tone?e=2e3:(i.on("failed",function(){r.tones=void 0}),i.send(t),e=i.duration+i.interToneGap),setTimeout(n,e)}else r.tones=void 0};e=e.toString();var i=this.ua.configuration.dtmfType;this.sessionDescriptionHandler&&i===a.C.dtmfType.RTP&&(this.sessionDescriptionHandler.sendDtmf(e,t)||(this.logger.warn("Attempt to use dtmfType 'RTP' has failed, falling back to INFO packet method"),i=a.C.dtmfType.INFO));if(i===a.C.dtmfType.INFO){for(var o=[],s=e.split("");s.length>0;)o.push(new f.DTMF(this,s.shift(),t));if(this.tones)return this.tones=this.tones.concat(o),this;this.tones=o,n()}return this},t.prototype.bye=function(e){if(void 0===e&&(e={}),this.status===u.SessionStatus.STATUS_TERMINATED)return this.logger.error("Error: Attempted to send BYE in a terminated session."),this;this.logger.log("terminating Session");var t=e.statusCode;if(t&&(t<200||t>=700))throw new TypeError("Invalid statusCode: "+t);return e.receiveResponse=function(){},this.sendRequest(a.C.BYE,e).terminated()},t.prototype.refer=function(e,t){if(void 0===t&&(t={}),this.status!==u.SessionStatus.STATUS_CONFIRMED)throw new l.Exceptions.InvalidStateError(this.status);return this.referContext=new C(this.ua,this,e,t),this.emit("referRequested",this.referContext),this.referContext.refer(t),this.referContext},t.prototype.sendRequest=function(e,t){var r=this;if(void 0===t&&(t={}),t=t||{},!this.dialog)throw new Error("sending request without a dialog");var n=new g.OutgoingRequest(e,this.dialog.remoteTarget,this.ua,{cseq:t.cseq||(this.dialog.localSeqnum+=1),callId:this.dialog.id.callId,fromUri:this.dialog.localUri,fromTag:this.dialog.id.localTag,ToUri:this.dialog.remoteUri,toTag:this.dialog.id.remoteTag,routeSet:this.dialog.routeSet,statusCode:t.statusCode,reasonPhrase:t.reasonPhrase},t.extraHeaders||[],t.body);return new d.RequestSender({request:n,onRequestTimeout:function(){return r.onRequestTimeout()},onTransportError:function(){return r.onTransportError()},receiveResponse:function(e){return(t.receiveResponse||r.receiveNonInviteResponse.bind(r))(e)}},this.ua).send(),this.emit(e.toLowerCase(),n),this},t.prototype.close=function(){if(this.status===u.SessionStatus.STATUS_TERMINATED)return this;for(var e in this.logger.log("closing INVITE session "+this.id),this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.timers)this.timers[e]&&clearTimeout(this.timers[e]);for(var t in this.dialog&&(this.dialog.terminate(),delete this.dialog),this.earlyDialogs)this.earlyDialogs.hasOwnProperty(t)&&(this.earlyDialogs[t].terminate(),delete this.earlyDialogs[t]);return this.status=u.SessionStatus.STATUS_TERMINATED,this.ua.transport&&this.ua.transport.removeListener("transportError",this.errorListener),delete this.ua.sessions[this.id],this},t.prototype.createDialog=function(e,t,r){void 0===r&&(r=!1);var n,i=e["UAS"===t?"toTag":"fromTag"],o=e["UAS"===t?"fromTag":"toTag"],s=e.callId+i+o;if(r)return!!this.earlyDialogs[s]||((n=new c.Dialog(this,e,t,c.Dialog.C.STATUS_EARLY)).error?(this.logger.error(n.error),this.failed(e,a.C.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[s]=n,!0));if(n=this.earlyDialogs[s]){for(var u in n.update(e,t),this.dialog=n,delete this.earlyDialogs[s],this.earlyDialogs)this.earlyDialogs.hasOwnProperty(u)&&(this.earlyDialogs[u].terminate(),delete this.earlyDialogs[u]);return!0}var l=new c.Dialog(this,e,t);return l.error?(this.logger.error(l.error),this.failed(e,a.C.causes.INTERNAL_ERROR),!1):(this.toTag=e.toTag,this.dialog=l,!0)},t.prototype.hold=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=[]),this.status!==u.SessionStatus.STATUS_WAITING_FOR_ACK&&this.status!==u.SessionStatus.STATUS_CONFIRMED)throw new l.Exceptions.InvalidStateError(this.status);this.localHold?this.logger.log("Session is already on hold, cannot put it on hold again"):(e.modifiers=t,this.sessionDescriptionHandler&&e.modifiers.push(this.sessionDescriptionHandler.holdModifier),this.localHold=!0,this.sendReinvite(e))},t.prototype.unhold=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=[]),this.status!==u.SessionStatus.STATUS_WAITING_FOR_ACK&&this.status!==u.SessionStatus.STATUS_CONFIRMED)throw new l.Exceptions.InvalidStateError(this.status);this.localHold?(e.modifiers=t,this.localHold=!1,this.sendReinvite(e)):this.logger.log("Session is not on hold, cannot unhold it")},t.prototype.reinvite=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=[]),e.modifiers=t,this.sendReinvite(e)},t.prototype.receiveRequest=function(e){switch(e.method){case a.C.BYE:e.reply(200),this.status===u.SessionStatus.STATUS_CONFIRMED&&(this.emit("bye",e),this.terminated(e,a.C.BYE));break;case a.C.INVITE:this.status===u.SessionStatus.STATUS_CONFIRMED&&(this.logger.log("re-INVITE received"),this.receiveReinvite(e));break;case a.C.INFO:if(this.status===u.SessionStatus.STATUS_CONFIRMED||this.status===u.SessionStatus.STATUS_WAITING_FOR_ACK){if(this.onInfo)return this.onInfo(e);var t=e.getHeader("content-type");if(t)if(t.match(/^application\/dtmf-relay/i)){if(e.body){var r=e.body.split("\r\n",2);if(2===r.length){var n=void 0,i=void 0,o=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/;o.test(r[0])&&(n=r[0].replace(o,"$2"));var s=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;s.test(r[1])&&(i=parseInt(r[1].replace(s,"$2"),10)),n&&i&&new f.DTMF(this,n,{duration:i}).init_incoming(e)}}}else e.reply(415,void 0,["Accept: application/dtmf-relay"])}break;case a.C.REFER:if(this.status===u.SessionStatus.STATUS_CONFIRMED)if(this.logger.log("REFER received"),this.referContext=new w(this.ua,e),this.listeners("referRequested").length)this.emit("referRequested",this.referContext);else{this.logger.log("No referRequested listeners, automatically accepting and following the refer");var c={followRefer:!0};this.passedOptions&&(c.inviteOptions=this.passedOptions),this.referContext.accept(c,this.modifiers)}break;case a.C.NOTIFY:if(this.referContext&&this.referContext.type===u.TypeStrings.ReferClientContext&&e.hasHeader("event")&&/^refer(;.*)?$/.test(e.getHeader("event")))return void this.referContext.receiveNotify(e);e.reply(200,"OK"),this.emit("notify",e)}},t.prototype.terminate=function(e){return this},t.prototype.onTransportError=function(){this.status!==u.SessionStatus.STATUS_CONFIRMED&&this.status!==u.SessionStatus.STATUS_TERMINATED&&this.failed(void 0,a.C.causes.CONNECTION_ERROR)},t.prototype.onRequestTimeout=function(){this.status===u.SessionStatus.STATUS_CONFIRMED?this.terminated(void 0,a.C.causes.REQUEST_TIMEOUT):this.status!==u.SessionStatus.STATUS_TERMINATED&&(this.failed(void 0,a.C.causes.REQUEST_TIMEOUT),this.terminated(void 0,a.C.causes.REQUEST_TIMEOUT))},t.prototype.onDialogError=function(e){this.status===u.SessionStatus.STATUS_CONFIRMED?this.terminated(e,a.C.causes.DIALOG_ERROR):this.status!==u.SessionStatus.STATUS_TERMINATED&&(this.failed(e,a.C.causes.DIALOG_ERROR),this.terminated(e,a.C.causes.DIALOG_ERROR))},t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t.prototype.receiveReinvite=function(e){var t,r=this;if(this.emit("reinvite",this,e),e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=h.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),this.sessionDescriptionHandler){if("0"!==e.getHeader("Content-Length")||e.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||""))return e.reply(415),void this.emit("reinviteFailed",this);t=this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers))}else t=this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers);this.receiveRequest=function(e){e.method===a.C.ACK&&r.status===u.SessionStatus.STATUS_WAITING_FOR_ACK?r.sessionDescriptionHandler&&r.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(r.hasAnswer=!0,r.sessionDescriptionHandler.setDescription(e.body,r.sessionDescriptionHandlerOptions,r.modifiers).then(function(){clearTimeout(r.timers.ackTimer),clearTimeout(r.timers.invite2xxTimer),r.status=u.SessionStatus.STATUS_CONFIRMED,r.emit("confirmed",e)})):(clearTimeout(r.timers.ackTimer),clearTimeout(r.timers.invite2xxTimer),r.status=u.SessionStatus.STATUS_CONFIRMED,r.emit("confirmed",e)):r.originalReceiveRequest(e)},t.catch(function(t){var n;throw t.type===u.TypeStrings.SessionDescriptionHandlerError?n=500:t.type===u.TypeStrings.RenegotiationError?(r.emit("renegotiationError",t),r.logger.warn(t.toString()),n=488):(r.logger.error(t),n=488),e.reply(n),r.emit("reinviteFailed",r),t}).then(function(t){var n=["Contact: "+r.contact];e.reply(200,void 0,n,t),r.status=u.SessionStatus.STATUS_WAITING_FOR_ACK,r.setACKTimer(),r.emit("reinviteAccepted",r)})}else this.logger.warn("No SessionDescriptionHandler to reinvite")},t.prototype.sendReinvite=function(e){var t=this;if(void 0===e&&(e={}),this.pendingReinvite)this.logger.warn("Reinvite in progress. Please wait until complete, then try again.");else if(this.sessionDescriptionHandler){this.pendingReinvite=!0,e.modifiers=e.modifiers||[];var r=(e.extraHeaders||[]).slice();r.push("Contact: "+this.contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(e){t.sendRequest(a.C.INVITE,{extraHeaders:r,body:e,receiveResponse:function(e){return t.receiveReinviteResponse(e)}})}).catch(function(e){if(e.type===u.TypeStrings.RenegotiationError)throw t.pendingReinvite=!1,t.emit("renegotiationError",e),t.logger.warn("Renegotiation Error"),t.logger.warn(e.toString()),e;throw t.logger.error("sessionDescriptionHandler error"),t.logger.error(e),e})}else this.logger.warn("No SessionDescriptionHandler, can't reinvite..")},t.prototype.receiveReinviteResponse=function(e){var t=this;if(this.status!==u.SessionStatus.STATUS_TERMINATED)if(this.pendingReinvite){var r=e&&e.statusCode?e.statusCode.toString():"";switch(!0){case/^1[0-9]{2}$/.test(r):break;case/^2[0-9]{2}$/.test(r):if(this.status=u.SessionStatus.STATUS_CONFIRMED,this.emit("ack",e.ack()),this.pendingReinvite=!1,clearTimeout(this.timers.invite2xxTimer),!this.sessionDescriptionHandler||!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.logger.error("2XX response received to re-invite but did not have a description"),this.emit("reinviteFailed",this),this.emit("renegotiationError",new l.Exceptions.RenegotiationError("2XX response received to re-invite but did not have a description"));break}this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch(function(e){throw t.logger.error("Could not set the description in 2XX response"),t.logger.error(e),t.emit("reinviteFailed",t),t.emit("renegotiationError",e),t.sendRequest(a.C.BYE,{extraHeaders:["Reason: "+y.Utils.getReasonHeaderValue(488,"Not Acceptable Here")]}),t.terminated(void 0,a.C.causes.INCOMPATIBLE_SDP),e}).then(function(){t.emit("reinviteAccepted",t)});break;default:this.pendingReinvite=!1,this.logger.log("Received a non 1XX or 2XX response to a re-invite"),this.emit("reinviteFailed",this),this.emit("renegotiationError",new l.Exceptions.RenegotiationError("Invalid response to a re-invite"))}}else this.logger.error("Received reinvite response, but have no pending reinvite");else this.logger.error("Received reinvite response, but in STATUS_TERMINATED")},t.prototype.acceptAndTerminate=function(e,t,r){var n=[];return t&&n.push("Reason: "+y.Utils.getReasonHeaderValue(t,r)),(this.dialog||this.createDialog(e,"UAC"))&&(this.emit("ack",e.ack()),this.sendRequest(a.C.BYE,{extraHeaders:n})),this},t.prototype.setInvite2xxTimer=function(e,t){var r=this,n=m.Timers.T1,i=function(){if(r.status===u.SessionStatus.STATUS_WAITING_FOR_ACK){r.logger.log("no ACK received, attempting to retransmit OK");var o=["Contact: "+r.contact];e.reply(200,void 0,o,t),n=Math.min(2*n,m.Timers.T2),r.timers.invite2xxTimer=setTimeout(i,n)}};this.timers.invite2xxTimer=setTimeout(i,n)},t.prototype.setACKTimer=function(){var e=this;this.timers.ackTimer=setTimeout(function(){e.status===u.SessionStatus.STATUS_WAITING_FOR_ACK&&(e.logger.log("no ACK received for an extended period of time, terminating the call"),clearTimeout(e.timers.invite2xxTimer),e.sendRequest(a.C.BYE),e.terminated(void 0,a.C.causes.NO_ACK))},m.Timers.TIMER_H)},t.prototype.failed=function(e,t){return this.status===u.SessionStatus.STATUS_TERMINATED?this:(this.emit("failed",e,t),this)},t.prototype.rejected=function(e,t){return this.emit("rejected",e,t),this},t.prototype.canceled=function(){return this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.emit("cancel"),this},t.prototype.accepted=function(e,t){return e instanceof String||(t=y.Utils.getReasonPhrase(e&&e.statusCode||0,t)),this.startTime=new Date,this.replacee&&(this.replacee.emit("replaced",this),this.replacee.terminate()),this.emit("accepted",e,t),this},t.prototype.terminated=function(e,t){return this.status===u.SessionStatus.STATUS_TERMINATED?this:(this.endTime=new Date,this.close(),this.emit("terminated",e,t),this)},t.prototype.connecting=function(e){return this.emit("connecting",{request:e}),this},t.prototype.receiveNonInviteResponse=function(e){},t.C=u.SessionStatus,t}(o.EventEmitter);t.Session=b;var T=function(e){function t(t,r){var n=this;if(!t.configuration.sessionDescriptionHandlerFactory)throw t.logger.warn("Can't build ISC without SDH Factory"),new Error("ISC Constructor Failed");n=e.call(this,t.configuration.sessionDescriptionHandlerFactory)||this,p.ServerContext.initializer(n,t,r),n.type=u.TypeStrings.InviteServerContext;var i=r.parseHeader("Content-Disposition");i&&"render"===i.type&&(n.renderbody=r.body,n.rendertype=r.getHeader("Content-Type")),n.status=u.SessionStatus.STATUS_INVITE_RECEIVED,n.fromTag=r.fromTag,n.id=r.callId+n.fromTag,n.request=r,n.contact=n.ua.contact.toString(),n.receiveNonInviteResponse=function(){},n.logger=t.getLogger("sip.inviteservercontext",n.id),n.ua.sessions[n.id]=n;var o=function(e,t){r.hasHeader(e)&&r.getHeader(e).toLowerCase().indexOf("100rel")>=0&&(n.rel100=t)};if(o("require",a.C.supported.REQUIRED),o("supported",a.C.supported.SUPPORTED),r.toTag=y.Utils.newTag(),n.createDialog(r,"UAS",!0)){var s={extraHeaders:["Contact: "+n.contact]};if(n.rel100!==a.C.supported.REQUIRED&&n.progress(s),n.status=u.SessionStatus.STATUS_WAITING_FOR_ANSWER,n.timers.userNoAnswerTimer=setTimeout(function(){r.reply(408),n.failed(r,a.C.causes.NO_ANSWER),n.terminated(r,a.C.causes.NO_ANSWER)},n.ua.configuration.noAnswerTimeout||60),r.hasHeader("expires")){var c=1e3*Number(r.getHeader("expires")||0);n.timers.expiresTimer=setTimeout(function(){n.status===u.SessionStatus.STATUS_WAITING_FOR_ANSWER&&(r.reply(487),n.failed(r,a.C.causes.EXPIRES),n.terminated(r,a.C.causes.EXPIRES))},c)}return n.errorListener=n.onTransportError.bind(n),t.transport&&t.transport.on("transportError",n.errorListener),n}r.reply(500,"Missing Contact header field")}return i(t,e),t.prototype.reject=function(e){var t=this;if(void 0===e&&(e={}),this.status===u.SessionStatus.STATUS_TERMINATED)throw new l.Exceptions.InvalidStateError(this.status);this.logger.log("rejecting RTCSession");var r=e.statusCode||480,n=y.Utils.getReasonPhrase(r,e.reasonPhrase),i=e.extraHeaders||[];if(r<300||r>699)throw new TypeError("Invalid statusCode: "+r);var o=this.request.reply(r,n,i,e.body);return["rejected","failed"].forEach(function(e){t.emit(e,o,n)}),this.terminated()},t.prototype.reply=function(e){return void 0===e&&(e={}),this},t.prototype.terminate=function(e){var t=this;void 0===e&&(e={});var r=(e.extraHeaders||[]).slice();if(this.status===u.SessionStatus.STATUS_WAITING_FOR_ACK&&this.request.transaction&&this.request.transaction.state!==v.TransactionState.Terminated){var n=this.dialog;this.receiveRequest=function(e){e.method===a.C.ACK&&(t.sendRequest(a.C.BYE,{extraHeaders:r}),t.dialog&&t.dialog.terminate())},this.request.transaction.on("stateChanged",function(){t.request.transaction&&t.request.transaction.state===v.TransactionState.Terminated&&t.dialog&&(t.bye(),t.dialog.terminate())}),this.emit("bye",this.request),this.terminated(),this.dialog=n,this.dialog&&(this.ua.dialogs[this.dialog.id.toString()]=this.dialog)}else this.status===u.SessionStatus.STATUS_CONFIRMED?this.bye(e):this.reject(e);return this},t.prototype.progress=function(e){var t=this;void 0===e&&(e={});var r=e.statusCode||180,n=(e.extraHeaders||[]).slice();if(r<100||r>199)throw new TypeError("Invalid statusCode: "+r);if(this.status===u.SessionStatus.STATUS_TERMINATED)return this;var i,o=function(){var r=e.statusCode||183;t.status=u.SessionStatus.STATUS_WAITING_FOR_PRACK,n.push("Contact: "+t.contact),n.push("Require: 100rel"),n.push("RSeq: "+Math.floor(1e4*Math.random())),t.sessionDescriptionHandler?t.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(i){if(t.status!==u.SessionStatus.STATUS_TERMINATED){t.earlySdp=i.body,t[t.hasOffer?"hasAnswer":"hasOffer"]=!0;var o=m.Timers.T1,s=function(){t.request.reply(r,void 0,n,i),o*=2,t.timers.rel1xxTimer=setTimeout(s,o)};t.timers.rel1xxTimer=setTimeout(s,o),t.timers.prackTimer=setTimeout(function(){t.status===u.SessionStatus.STATUS_WAITING_FOR_PRACK&&(t.logger.log("no PRACK received, rejecting the call"),clearTimeout(t.timers.rel1xxTimer),t.request.reply(504),t.terminated(void 0,a.C.causes.NO_PRACK))},64*m.Timers.T1);var c=t.request.reply(r,e.reasonPhrase,n,i);t.emit("progress",c,e.reasonPhrase)}},function(){t.request.reply(480),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR)}):t.logger.warn("No SessionDescriptionHandler, can't do 100rel")};return 100!==e.statusCode&&(this.rel100===a.C.supported.REQUIRED||this.rel100===a.C.supported.SUPPORTED&&e.rel100||this.rel100===a.C.supported.SUPPORTED&&this.ua.configuration.rel100===a.C.supported.REQUIRED)?(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")||"")?(this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,e.sessionDescriptionHandlerOptions,e.modifiers).then(o).catch(function(e){throw t.logger.warn("invalid description"),t.logger.warn(e),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR),e})):o()):(i=t.request.reply(r,e.reasonPhrase,n,e.body),t.emit("progress",i,e.reasonPhrase)),this},t.prototype.accept=function(e){var t=this;void 0===e&&(e={}),this.onInfo=e.onInfo;var r=(e.extraHeaders||[]).slice(),n=function(e){r.push("Contact: "+t.contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.hasOffer?t.hasAnswer=!0:t.hasOffer=!0;var n=t.request.reply(200,void 0,r,e);t.status=u.SessionStatus.STATUS_WAITING_FOR_ACK,t.setInvite2xxTimer(t.request,e),t.setACKTimer(),t.accepted(n,y.Utils.getReasonPhrase(200))},i=function(e){throw e.type===u.TypeStrings.SessionDescriptionHandlerError&&(t.logger.log(e.message),e.error&&t.logger.log(e.error)),t.request.reply(480),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR),e};if(this.status===u.SessionStatus.STATUS_WAITING_FOR_PRACK)return this.status=u.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK,this;if(this.status===u.SessionStatus.STATUS_WAITING_FOR_ANSWER)this.status=u.SessionStatus.STATUS_ANSWERED;else if(this.status!==u.SessionStatus.STATUS_EARLY_MEDIA)throw new l.Exceptions.InvalidStateError(this.status);if(!this.createDialog(this.request,"UAS"))return this.request.reply(500,"Missing Contact header field"),this;if(clearTimeout(this.timers.userNoAnswerTimer),this.status===u.SessionStatus.STATUS_EARLY_MEDIA)n({});else if(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),"0"!==this.request.getHeader("Content-Length")||this.request.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")||""))return this.request.reply(415),this;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,e.sessionDescriptionHandlerOptions,e.modifiers).then(function(){if(!t.sessionDescriptionHandler)throw new Error("No SDH");return t.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers)}).catch(i).then(n)}else this.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).catch(i).then(n);return this},t.prototype.receiveRequest=function(e){var t=this,r=function(){clearTimeout(t.timers.ackTimer),clearTimeout(t.timers.invite2xxTimer),t.status=u.SessionStatus.STATUS_CONFIRMED;var r=e.getHeader("Content-Disposition");r&&"render"===r.type&&(t.renderbody=e.body,t.rendertype=e.getHeader("Content-Type")),t.emit("confirmed",e)};switch(e.method){case a.C.CANCEL:this.status!==u.SessionStatus.STATUS_WAITING_FOR_ANSWER&&this.status!==u.SessionStatus.STATUS_WAITING_FOR_PRACK&&this.status!==u.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&this.status!==u.SessionStatus.STATUS_EARLY_MEDIA&&this.status!==u.SessionStatus.STATUS_ANSWERED||(this.status=u.SessionStatus.STATUS_CANCELED,this.request.reply(487),this.canceled(),this.rejected(e,a.C.causes.CANCELED),this.failed(e,a.C.causes.CANCELED),this.terminated(e,a.C.causes.CANCELED));break;case a.C.ACK:this.status===u.SessionStatus.STATUS_WAITING_FOR_ACK&&(this.status=u.SessionStatus.STATUS_CONFIRMED,this.sessionDescriptionHandler&&this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch(function(r){throw t.logger.warn(r),t.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),t.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION),r}).then(function(){return r()})):r());break;case a.C.PRACK:this.status===u.SessionStatus.STATUS_WAITING_FOR_PRACK||this.status===u.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK?this.hasAnswer?(clearTimeout(this.timers.rel1xxTimer),clearTimeout(this.timers.prackTimer),e.reply(200),this.status===u.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=u.SessionStatus.STATUS_EARLY_MEDIA,this.accept()),this.status=u.SessionStatus.STATUS_EARLY_MEDIA):(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){clearTimeout(t.timers.rel1xxTimer),clearTimeout(t.timers.prackTimer),e.reply(200),t.status===u.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&(t.status=u.SessionStatus.STATUS_EARLY_MEDIA,t.accept()),t.status=u.SessionStatus.STATUS_EARLY_MEDIA},function(r){t.logger.warn(r),t.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),t.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})):(this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION))):this.status===u.SessionStatus.STATUS_EARLY_MEDIA&&e.reply(200);break;default:b.prototype.receiveRequest.apply(this,[e])}},t.prototype.setupSessionDescriptionHandler=function(){return this.sessionDescriptionHandler?this.sessionDescriptionHandler:this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions)},t}(b);t.InviteServerContext=T;var S=function(e){function t(t,r,n,i){void 0===n&&(n={}),void 0===i&&(i=[]);var o=this;if(!t.configuration.sessionDescriptionHandlerFactory)throw t.logger.warn("Can't build ISC without SDH Factory"),new Error("ICC Constructor Failed");n.params=n.params||{};var c=n.anonymous||!1,h=y.Utils.newTag();n.params.fromTag=h;var d=t.contact.toString({anonymous:c,outbound:c?!t.contact.tempGruu:!t.contact.pubGruu}),p=(n.extraHeaders||[]).slice();if(c&&t.configuration.uri&&(n.params.from_displayName="Anonymous",n.params.from_uri="sip:anonymous@anonymous.invalid",p.push("P-Preferred-Identity: "+t.configuration.uri.toString()),p.push("Privacy: id")),p.push("Contact: "+d),p.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.configuration.rel100===a.C.supported.REQUIRED&&p.push("Require: 100rel"),t.configuration.replaces===a.C.supported.REQUIRED&&p.push("Require: replaces"),n.extraHeaders=p,o=e.call(this,t.configuration.sessionDescriptionHandlerFactory)||this,s.ClientContext.initializer(o,t,a.C.INVITE,r,n),o.type=u.TypeStrings.InviteClientContext,o.passedOptions=n,o.sessionDescriptionHandlerOptions=n.sessionDescriptionHandlerOptions||{},o.modifiers=i,o.inviteWithoutSdp=n.inviteWithoutSdp||!1,o.anonymous=n.anonymous||!1,o.renderbody=n.renderbody||void 0,o.rendertype=n.rendertype||"text/plain",o.fromTag=h,o.contact=d,o.status!==u.SessionStatus.STATUS_NULL)throw new l.Exceptions.InvalidStateError(o.status);return o.isCanceled=!1,o.received100=!1,o.method=a.C.INVITE,o.logger=t.getLogger("sip.inviteclientcontext"),t.applicants[o.toString()]=o,o.id=o.request.callId+o.fromTag,o.onInfo=n.onInfo,o.errorListener=o.onTransportError.bind(o),t.transport&&t.transport.on("transportError",o.errorListener),o}return i(t,e),t.prototype.receiveNonInviteResponse=function(e){this.receiveInviteResponse(e)},t.prototype.receiveResponse=function(e){this.receiveInviteResponse(e)},t.prototype.send=function(){return new d.RequestSender(this,this.ua).send(),this},t.prototype.invite=function(){var e=this;return this.ua.sessions[this.id]=this,Promise.resolve().then(function(){e.inviteWithoutSdp?(e.request.body=e.renderbody,e.status=u.SessionStatus.STATUS_INVITE_SENT,e.send()):(e.sessionDescriptionHandler=e.sessionDescriptionHandlerFactory(e,e.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),e.emit("SessionDescriptionHandler-created",e.sessionDescriptionHandler),e.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(t){e.isCanceled||e.status===u.SessionStatus.STATUS_TERMINATED||(e.hasOffer=!0,e.request.body=t,e.status=u.SessionStatus.STATUS_INVITE_SENT,e.send())},function(t){t.type===u.TypeStrings.SessionDescriptionHandlerError&&(e.logger.log(t.message),t.error&&e.logger.log(t.error)),e.status!==u.SessionStatus.STATUS_TERMINATED&&(e.failed(void 0,a.C.causes.WEBRTC_ERROR),e.terminated(void 0,a.C.causes.WEBRTC_ERROR))}))}),this},t.prototype.receiveInviteResponse=function(e){var t=this;if(this.status!==u.SessionStatus.STATUS_TERMINATED&&e.method===a.C.INVITE){var r=e.callId+e.fromTag+e.toTag,n=[];if(this.dialog&&e.statusCode&&e.statusCode>=200&&e.statusCode<=299){if(r!==this.dialog.id.toString()){if(!this.createDialog(e,"UAC",!0))return;return this.emit("ack",e.ack({body:y.Utils.generateFakeSDP(e.body)})),this.earlyDialogs[r].sendRequest(this,a.C.BYE),void(this.status!==u.SessionStatus.STATUS_CONFIRMED&&(this.failed(e,a.C.causes.WEBRTC_ERROR),this.terminated(e,a.C.causes.WEBRTC_ERROR)))}if(this.status===u.SessionStatus.STATUS_CONFIRMED)return void this.emit("ack",e.ack(e));if(!this.hasAnswer)return}var i=e&&e.statusCode;if(this.dialog&&i&&i<200){var o=e.getHeader("rseq");if(o&&(-1!==this.dialog.pracked.indexOf(o)||Number(this.dialog.pracked[this.dialog.pracked.length-1])>=Number(o)&&this.dialog.pracked.length>0))return;if(!this.earlyDialogs[r]&&!this.createDialog(e,"UAC",!0))return;if(-1!==this.earlyDialogs[r].pracked.indexOf(e.getHeader("rseq"))||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=Number(o)&&this.earlyDialogs[r].pracked.length>0)return;return n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[r].pracked.push(e.getHeader("rseq")),void this.earlyDialogs[r].sendRequest(this,a.C.PRACK,{extraHeaders:n,body:y.Utils.generateFakeSDP(e.body)})}if(this.isCanceled){if(i&&i>=100&&i<200)this.request.cancel(this.cancelReason,n),this.canceled();else if(i&&i>=200&&i<299)this.acceptAndTerminate(e),this.emit("bye",this.request);else if(i&&i>=300){var s=a.C.REASON_PHRASE[e.statusCode||0]||a.C.causes.CANCELED;this.rejected(e,s),this.failed(e,s),this.terminated(e,s)}}else{var c=i?i.toString():"";switch(!0){case/^100$/.test(c):this.received100=!0,this.emit("progress",e);break;case/^1[0-9]{2}$/.test(c):if(!e.toTag){this.logger.warn("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this.createDialog(e,"UAC",!0))break;if(this.status=u.SessionStatus.STATUS_1XX_RECEIVED,e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=h.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),e.hasHeader("require")&&-1!==e.getHeader("require").indexOf("100rel")){if(this.dialog||!this.earlyDialogs[r])break;var l=e.getHeader("rseq");if(-1!==this.earlyDialogs[r].pracked.indexOf(l)||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=Number(l)&&this.earlyDialogs[r].pracked.length>0)return;if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||""))if(this.hasOffer){if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,void 0!==this.dialog&&l&&this.dialog.pracked.push(l),this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),t.sendRequest(a.C.PRACK,{extraHeaders:n,receiveResponse:function(){}}),t.status=u.SessionStatus.STATUS_EARLY_MEDIA,t.emit("progress",e)},function(r){t.logger.warn(r),t.acceptAndTerminate(e,488,"Not Acceptable Here"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})}else{var d=this.earlyDialogs[r];d.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",d.sessionDescriptionHandler),l&&d.pracked.push(l),d.sessionDescriptionHandler&&d.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){return d.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}).then(function(r){n.push("RAck: "+l+" "+e.getHeader("cseq")),d.sendRequest(t,a.C.PRACK,{extraHeaders:n,body:r}),t.status=u.SessionStatus.STATUS_EARLY_MEDIA,t.emit("progress",e)}).catch(function(e){if(l&&e.type===u.TypeStrings.SessionDescriptionHandlerError){if(d.pracked.push(l),t.status===u.SessionStatus.STATUS_TERMINATED)return;t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR)}else l&&d.pracked.splice(d.pracked.indexOf(l),1),t.logger.warn("invalid description"),t.logger.warn(e)})}else n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[r].pracked.push(e.getHeader("rseq")),this.earlyDialogs[r].sendRequest(this,a.C.PRACK,{extraHeaders:n}),this.emit("progress",e)}else this.emit("progress",e);break;case/^2[0-9]{2}$/.test(c):if(this.request.cseq+" "+this.request.method!==e.getHeader("cseq"))break;if(e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=h.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),this.status===u.SessionStatus.STATUS_EARLY_MEDIA&&this.dialog){this.status=u.SessionStatus.STATUS_CONFIRMED;var p={};this.renderbody&&(n.push("Content-Type: "+this.rendertype),p.extraHeaders=n,p.body=this.renderbody),this.emit("ack",e.ack(p)),this.accepted(e);break}if(this.dialog)break;if(this.hasOffer)if(this.hasAnswer){p={};this.renderbody&&(n.push("Content-Type: "+this.rendertype),p.extraHeaders=n,p.body=this.renderbody),this.emit("ack",e.ack(p))}else{if(!this.sessionDescriptionHandler||!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){var r={};t.status=u.SessionStatus.STATUS_CONFIRMED,t.renderbody&&(n.push("Content-Type: "+t.rendertype),r.extraHeaders=n,r.body=t.renderbody),t.emit("ack",e.ack(r)),t.accepted(e)},function(r){t.logger.warn(r),t.acceptAndTerminate(e,488,"Not Acceptable Here"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})}else if(this.earlyDialogs[r]&&this.earlyDialogs[r].sessionDescriptionHandler){if(this.hasOffer=!0,this.hasAnswer=!0,this.sessionDescriptionHandler=this.earlyDialogs[r].sessionDescriptionHandler,!this.createDialog(e,"UAC"))break;this.status=u.SessionStatus.STATUS_CONFIRMED,this.emit("ack",e.ack()),this.accepted(e)}else{if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){return t.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}).then(function(r){t.isCanceled||t.status===u.SessionStatus.STATUS_TERMINATED||(t.status=u.SessionStatus.STATUS_CONFIRMED,t.hasAnswer=!0,t.emit("ack",e.ack({body:r})),t.accepted(e))}).catch(function(r){if(r.type!==u.TypeStrings.SessionDescriptionHandlerError)throw r;t.logger.warn("invalid description"),t.logger.warn(r.toString()),t.acceptAndTerminate(e,488,"Invalid session description"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})}break;default:s=y.Utils.sipErrorCause(i||0);this.rejected(e,s),this.failed(e,s),this.terminated(e,s)}}}},t.prototype.cancel=function(e){if(void 0===e&&(e={}),e.extraHeaders=(e.extraHeaders||[]).slice(),this.isCanceled)throw new l.Exceptions.InvalidStateError(u.SessionStatus.STATUS_CANCELED);if(this.status===u.SessionStatus.STATUS_TERMINATED||this.status===u.SessionStatus.STATUS_CONFIRMED)throw new l.Exceptions.InvalidStateError(this.status);this.logger.log("canceling RTCSession"),this.isCanceled=!0;var t=y.Utils.getCancelReason(e.statusCode,e.reasonPhrase);return this.status===u.SessionStatus.STATUS_NULL||this.status===u.SessionStatus.STATUS_INVITE_SENT&&!this.received100?this.cancelReason=t:this.status!==u.SessionStatus.STATUS_INVITE_SENT&&this.status!==u.SessionStatus.STATUS_1XX_RECEIVED&&this.status!==u.SessionStatus.STATUS_EARLY_MEDIA||this.request.cancel(t,e.extraHeaders),this.canceled()},t.prototype.terminate=function(e){return this.status===u.SessionStatus.STATUS_TERMINATED?this:(this.status===u.SessionStatus.STATUS_WAITING_FOR_ACK||this.status===u.SessionStatus.STATUS_CONFIRMED?this.bye(e):this.cancel(e),this)},t.prototype.receiveRequest=function(t){return t.method,a.C.CANCEL,t.method===a.C.ACK&&this.status===u.SessionStatus.STATUS_WAITING_FOR_ACK&&(clearTimeout(this.timers.ackTimer),clearTimeout(this.timers.invite2xxTimer),this.status=u.SessionStatus.STATUS_CONFIRMED,this.accepted()),e.prototype.receiveRequest.call(this,t)},t}(b);t.InviteClientContext=S;var C=function(e){function t(t,r,n,i){void 0===i&&(i={});var o=this;if(void 0===t||void 0===r||void 0===n)throw new TypeError("Not enough arguments");if((o=e.call(this,t,a.C.REFER,r.remoteIdentity.uri.toString(),i)||this).type=u.TypeStrings.ReferClientContext,o.options=i,o.extraHeaders=(o.options.extraHeaders||[]).slice(),o.applicant=r,"string"==typeof n||n.type!==u.TypeStrings.InviteServerContext&&n.type!==u.TypeStrings.InviteClientContext){var s=h.Grammar.parse(n,"Refer_To");o.target=s&&s.uri?s.uri:n;var c=o.ua.normalizeTarget(o.target);if(!c)throw new TypeError("Invalid target: "+n);o.target=c}else{var l=n.dialog;if(!l)throw new TypeError("Invalid target due to no dialog: "+n);o.target='"'+n.remoteIdentity.friendlyName+'" <'+l.remoteTarget.toString()+"?Replaces="+encodeURIComponent(l.id.callId+";to-tag="+l.id.remoteTag+";from-tag="+l.id.localTag)+">"}return o.ua&&o.extraHeaders.push("Referred-By: <"+o.ua.configuration.uri+">"),o.extraHeaders.push("Contact: "+r.contact),o.extraHeaders.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),o.extraHeaders.push("Refer-To: "+o.target),o.errorListener=o.onTransportError.bind(o),t.transport&&t.transport.on("transportError",o.errorListener),o}return i(t,e),t.prototype.refer=function(e){var t=this;void 0===e&&(e={});var r=(this.extraHeaders||[]).slice();return e.extraHeaders&&r.concat(e.extraHeaders),this.applicant.sendRequest(a.C.REFER,{extraHeaders:this.extraHeaders,receiveResponse:function(r){var n=r&&r.statusCode?r.statusCode.toString():"";/^1[0-9]{2}$/.test(n)?t.emit("referRequestProgress",t):/^2[0-9]{2}$/.test(n)?t.emit("referRequestAccepted",t):/^[4-6][0-9]{2}$/.test(n)&&t.emit("referRequestRejected",t),e.receiveResponse&&e.receiveResponse(r)}}),this},t.prototype.receiveNotify=function(e){var t=e.hasHeader("Content-Type")?e.getHeader("Content-Type"):void 0;if(t&&-1!==t.search(/^message\/sipfrag/)){var r=h.Grammar.parse(e.body,"sipfrag");if(-1===r)return void e.reply(489,"Bad Event");switch(!0){case/^1[0-9]{2}$/.test(r.status_code):this.emit("referProgress",this);break;case/^2[0-9]{2}$/.test(r.status_code):this.emit("referAccepted",this),!this.options.activeAfterTransfer&&this.applicant.terminate&&this.applicant.terminate();break;default:this.emit("referRejected",this)}return e.reply(200),void this.emit("notify",e)}e.reply(489,"Bad Event")},t}(s.ClientContext);t.ReferClientContext=C;var w=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=u.TypeStrings.ReferServerContext,n.ua=t,n.status=u.SessionStatus.STATUS_INVITE_RECEIVED,n.fromTag=r.fromTag,n.id=r.callId+n.fromTag,n.request=r,n.contact=n.ua.contact.toString(),n.logger=t.getLogger("sip.referservercontext",n.id),n.cseq=Math.floor(1e4*Math.random()),n.callId=n.request.callId,n.fromUri=n.request.to.uri,n.fromTag=n.request.to.parameters.tag,n.remoteTarget=n.request.headers.Contact[0].parsed.uri,n.toUri=n.request.from.uri,n.toTag=n.request.fromTag,n.routeSet=n.request.getHeaders("record-route"),n.request.hasHeader("refer-to")?(n.referTo=n.request.parseHeader("refer-to"),n.referredSession=n.ua.findSession(r),n.request.hasHeader("referred-by")&&(n.referredBy=n.request.getHeader("referred-by")),n.referTo.uri.hasHeader("replaces")&&(n.replaces=n.referTo.uri.getHeader("replaces")),n.errorListener=n.onTransportError.bind(n),t.transport&&t.transport.on("transportError",n.errorListener),n.status=u.SessionStatus.STATUS_WAITING_FOR_ANSWER,n):(n.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting refer."),n.reject(),n)}return i(t,e),t.prototype.receiveNonInviteResponse=function(e){},t.prototype.progress=function(){if(this.status!==u.SessionStatus.STATUS_WAITING_FOR_ANSWER)throw new l.Exceptions.InvalidStateError(this.status);this.request.reply(100)},t.prototype.reject=function(t){if(void 0===t&&(t={}),this.status===u.SessionStatus.STATUS_TERMINATED)throw new l.Exceptions.InvalidStateError(this.status);this.logger.log("Rejecting refer"),this.status=u.SessionStatus.STATUS_TERMINATED,e.prototype.reject.call(this,t),this.emit("referRequestRejected",this)},t.prototype.accept=function(e,t){var r=this;if(void 0===e&&(e={}),this.status!==u.SessionStatus.STATUS_WAITING_FOR_ANSWER)throw new l.Exceptions.InvalidStateError(this.status);if(this.status=u.SessionStatus.STATUS_ANSWERED,this.request.reply(202,"Accepted"),this.emit("referRequestAccepted",this),e.followRefer){this.logger.log("Accepted refer, attempting to automatically follow it");var n=this.referTo.uri;if(!n.scheme||!n.scheme.match("^sips?$"))return this.logger.error("SIP.js can only automatically follow SIP refer target"),void this.reject();var i=e.inviteOptions||{},o=(i.extraHeaders||[]).slice();if(this.replaces&&o.push("Replaces: "+decodeURIComponent(this.replaces)),this.referredBy&&o.push("Referred-By: "+this.referredBy),i.extraHeaders=o,n.clearHeaders(),this.targetSession=this.ua.invite(n.toString(),i,t),this.emit("referInviteSent",this),this.targetSession){this.targetSession.once("progress",function(e){var t=e.statusCode||100,n=e.reasonPhrase;r.sendNotify(("SIP/2.0 "+t+" "+n).trim()),r.emit("referProgress",r),r.referredSession&&r.referredSession.emit("referProgress",r)}),this.targetSession.once("accepted",function(){r.logger.log("Successfully followed the refer"),r.sendNotify("SIP/2.0 200 OK"),r.emit("referAccepted",r),r.referredSession&&r.referredSession.emit("referAccepted",r)});var s=function(e){if(r.status!==u.SessionStatus.STATUS_TERMINATED){if(r.logger.log("Refer was not successful. Resuming session"),e&&429===e.statusCode)return r.logger.log("Alerting referrer that identity is required."),void r.sendNotify("SIP/2.0 429 Provide Referrer Identity");r.sendNotify("SIP/2.0 603 Declined"),r.status=u.SessionStatus.STATUS_TERMINATED,r.emit("referRejected",r),r.referredSession&&r.referredSession.emit("referRejected")}};this.targetSession.once("rejected",s),this.targetSession.once("failed",s)}}else this.logger.log("Accepted refer, but did not automatically follow it"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)},t.prototype.sendNotify=function(e){if(this.status!==u.SessionStatus.STATUS_ANSWERED)throw new l.Exceptions.InvalidStateError(this.status);if(-1===h.Grammar.parse(e,"sipfrag"))throw new Error("sipfrag body is required to send notify for refer");var t=new g.OutgoingRequest(a.C.NOTIFY,this.remoteTarget,this.ua,{cseq:this.cseq+=1,callId:this.callId,fromUri:this.fromUri,fromTag:this.fromTag,toUri:this.toUri,toTag:this.toTag,routeSet:this.routeSet},["Event: refer","Subscription-State: terminated","Content-Type: message/sipfrag"],e);new d.RequestSender({request:t,onRequestTimeout:function(){},onTransportError:function(){},receiveResponse:function(){}},this.ua).send()},t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t}(p.ServerContext);t.ReferServerContext=w},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(3),a=r(25),c=r(2),u=r(21),l=r(5),h=function(e){function t(t,r,n,i){void 0===i&&(i={});var o,a=this;if(!n)throw new TypeError("Event necessary to create a subscription.");return i.extraHeaders=(i.extraHeaders||[]).slice(),"number"!=typeof i.expires?(t.logger.warn("expires must be a number. Using default of 3600."),o=3600):o=i.expires,i.extraHeaders.push("Event: "+n),i.extraHeaders.push("Expires: "+o),i.extraHeaders.push("Contact: "+t.contact.toString()),i.extraHeaders.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),(a=e.call(this,t,s.C.SUBSCRIBE,r,i)||this).type=c.TypeStrings.Subscription,a.event=n,a.requestedExpires=o,a.state="init",a.contact=t.contact.toString(),a.extraHeaders=i.extraHeaders,a.logger=t.getLogger("sip.subscription"),a.expires=o,a.timers={N:void 0,subDuration:void 0},a.errorCodes=[404,405,410,416,480,481,482,483,484,485,489,501,604],a}return i(t,e),t.prototype.subscribe=function(){var e=this;return"active"===this.state?(this.refresh(),this):"notify_wait"===this.state?this:(clearTimeout(this.timers.subDuration),clearTimeout(this.timers.N),this.timers.N=setTimeout(function(){return e.timer_fire()},u.Timers.TIMER_N),this.request&&this.request.from&&(this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event]=this),this.send(),this.state="notify_wait",this)},t.prototype.refresh=function(){"terminated"!==this.state&&"pending"!==this.state&&"notify_wait"!==this.state&&this.dialog&&this.dialog.sendRequest(this,s.C.SUBSCRIBE,{extraHeaders:this.extraHeaders,body:this.body})},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode?e.statusCode:0,n=l.Utils.getReasonPhrase(r);if("notify_wait"===this.state&&r>=300||"notify_wait"!==this.state&&-1!==this.errorCodes.indexOf(r))this.failed(e,void 0);else if(/^2[0-9]{2}$/.test(r.toString())){this.emit("accepted",e,n);var i=e.getHeader("Expires");i&&Number(i)<=this.requestedExpires?(this.expires=Number(i),this.timers.subDuration=setTimeout(function(){return t.refresh()},900*Number(i))):i?(this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),this.failed(e,"Invalid Expires Header")):(this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE"),this.failed(e,"Expires Header Missing"))}else r>300&&(this.emit("failed",e,n),this.emit("rejected",e,n))},t.prototype.unsubscribe=function(){var e=this,t=[];this.state="terminated",t.push("Event: "+this.event),t.push("Expires: 0"),t.push("Contact: "+this.contact),t.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.receiveResponse=function(){},this.dialog&&this.dialog.sendRequest(this,s.C.SUBSCRIBE,{extraHeaders:t,body:this.body}),clearTimeout(this.timers.subDuration),clearTimeout(this.timers.N),this.timers.N=setTimeout(function(){return e.timer_fire()},u.Timers.TIMER_N),this.emit("terminated")},t.prototype.receiveRequest=function(e){var t,r=this,n=function(){t.expires&&(clearTimeout(r.timers.subDuration),t.expires=Math.min(r.expires,Math.max(t.expires,0)),r.timers.subDuration=setTimeout(function(){return r.refresh()},900*t.expires))};if(this.matchEvent(e))if(this.dialog||this.createConfirmedDialog(e,"UAS")&&this.dialog&&(this.id=this.dialog.id.toString(),this.request&&this.request.from&&(delete this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event],this.ua.subscriptions[this.id||""]=this)),t=e.parseHeader("Subscription-State"),e.reply(200),clearTimeout(this.timers.N),this.emit("notify",{request:e}),"terminated"!==this.state)switch(t.state){case"active":this.state="active",n();break;case"pending":"notify_wait"===this.state&&n(),this.state="pending";break;case"terminated":if(clearTimeout(this.timers.subDuration),t.reason)switch(this.logger.log("terminating subscription with reason "+t.reason),t.reason){case"deactivated":case"timeout":return void this.subscribe();case"probation":case"giveup":return void(t.params&&t.params["retry-after"]?this.timers.subDuration=setTimeout(function(){return r.subscribe()},t.params["retry-after"]):this.subscribe())}this.close()}else"terminated"===t.state&&(this.terminateDialog(),clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),delete this.ua.subscriptions[this.id||""]);else e.reply(489)},t.prototype.close=function(){"notify_wait"===this.state?(this.state="terminated",clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),this.receiveResponse=function(){},this.request&&this.request.from&&delete this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event],this.emit("terminated")):"terminated"!==this.state&&this.unsubscribe()},t.prototype.onDialogError=function(e){this.failed(e,s.C.causes.DIALOG_ERROR)},t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t.prototype.timer_fire=function(){"terminated"===this.state?(this.terminateDialog(),clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),delete this.ua.subscriptions[this.id||""]):"notify_wait"===this.state||"pending"===this.state?this.close():this.refresh()},t.prototype.createConfirmedDialog=function(e,t){this.terminateDialog();var r=new a.Dialog(this,e,t);return this.request&&(r.inviteSeqnum=this.request.cseq,r.localSeqnum=this.request.cseq),!r.error&&(this.dialog=r,!0)},t.prototype.terminateDialog=function(){this.dialog&&(delete this.ua.subscriptions[this.id||""],this.dialog.terminate(),delete this.dialog)},t.prototype.failed=function(e,t){return this.close(),this.emit("failed",e,t),this.emit("rejected",e,t),this},t.prototype.matchEvent=function(e){if(!e.hasHeader("Event"))return this.logger.warn("missing Event header"),!1;if(!e.hasHeader("Subscription-State"))return this.logger.warn("missing Subscription-State header"),!1;var t=e.parseHeader("event").event;return this.event===t||(this.logger.warn("event match failed"),e.reply(481,"Event Match Failed"),!1)},t}(o.ClientContext);t.Subscription=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(2),a=function(e){function t(t,r){var n=e.call(this)||this;return n.type=s.TypeStrings.Transport,n.logger=t,n}return i(t,e),t.prototype.connect=function(e){var t=this;return void 0===e&&(e={}),this.connectPromise(e).then(function(e){e.overrideEvent||t.emit("connected")})},t.prototype.send=function(e,t){var r=this;return void 0===t&&(t={}),this.sendPromise(e).then(function(e){e.overrideEvent||r.emit("messageSent",e.msg)})},t.prototype.disconnect=function(e){var t=this;return void 0===e&&(e={}),this.disconnectPromise(e).then(function(e){e.overrideEvent||t.emit("disconnected")})},t.prototype.afterConnected=function(e){this.isConnected()?e():this.once("connected",e)},t.prototype.waitForConnected=function(){var e=this;return console.warn("DEPRECATION WARNING Transport.waitForConnected(): use afterConnected() instead"),new Promise(function(t){e.afterConnected(t)})},t}(o.EventEmitter);t.Transport=a},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(2),a=r(8),c=r(5),u=r(28),l=r(66),h=function(t){function r(r,n,i){var o=t.call(this)||this;o.type=s.TypeStrings.SessionDescriptionHandler,o.options=i||{},o.logger=r,o.observer=n,o.dtmfSender=void 0,o.shouldAcquireMedia=!0,o.CONTENT_TYPE="application/sdp",o.C={DIRECTION:{NULL:null,SENDRECV:"sendrecv",SENDONLY:"sendonly",RECVONLY:"recvonly",INACTIVE:"inactive"}},o.logger.log("SessionDescriptionHandlerOptions: "+JSON.stringify(o.options)),o.direction=o.C.DIRECTION.NULL,o.modifiers=o.options.modifiers||[],Array.isArray(o.modifiers)||(o.modifiers=[o.modifiers]);var a=e.window||e;return o.WebRTC={MediaStream:a.MediaStream,getUserMedia:a.navigator.mediaDevices.getUserMedia.bind(a.navigator.mediaDevices),RTCPeerConnection:a.RTCPeerConnection},o.iceGatheringTimeout=!1,o.initPeerConnection(o.options.peerConnectionOptions),o.constraints=o.checkAndDefaultConstraints(o.options.constraints),o}return i(r,t),r.defaultFactory=function(e,t){return new r(e.ua.getLogger("sip.invitecontext.sessionDescriptionHandler",e.id),new l.SessionDescriptionHandlerObserver(e,t),t)},r.prototype.close=function(){this.logger.log("closing PeerConnection"),this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(this.peerConnection.getSenders?this.peerConnection.getSenders().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getLocalStreams which is deprecated"),this.peerConnection.getLocalStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.peerConnection.getReceivers?this.peerConnection.getReceivers().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getRemoteStreams which is deprecated"),this.peerConnection.getRemoteStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.resetIceGatheringComplete(),this.peerConnection.close())},r.prototype.getDescription=function(e,t){var r=this;void 0===e&&(e={}),void 0===t&&(t=[]),e.peerConnectionOptions&&this.initPeerConnection(e.peerConnectionOptions);var n=Object.assign({},this.constraints,e.constraints);return n=this.checkAndDefaultConstraints(n),JSON.stringify(n)!==JSON.stringify(this.constraints)&&(this.constraints=n,this.shouldAcquireMedia=!0),Array.isArray(t)||(t=[t]),t=t.concat(this.modifiers),Promise.resolve().then(function(){if(r.shouldAcquireMedia)return r.acquire(r.constraints).then(function(){r.shouldAcquireMedia=!1})}).then(function(){return r.createOfferOrAnswer(e.RTCOfferOptions,t)}).then(function(e){if(void 0===e.sdp)throw new a.Exceptions.SessionDescriptionHandlerError("getDescription",void 0,"SDP undefined");return r.emit("getDescription",e),{body:e.sdp,contentType:r.CONTENT_TYPE}})},r.prototype.hasDescription=function(e){return e===this.CONTENT_TYPE},r.prototype.holdModifier=function(e){return e.sdp?(/a=(sendrecv|sendonly|recvonly|inactive)/.test(e.sdp)?(e.sdp=e.sdp.replace(/a=sendrecv\r\n/g,"a=sendonly\r\n"),e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")):e.sdp=e.sdp.replace(/(m=[^\r]*\r\n)/g,"$1a=sendonly\r\n"),Promise.resolve(e)):Promise.resolve(e)},r.prototype.setDescription=function(e,t,r){var n=this;void 0===t&&(t={}),void 0===r&&(r=[]),t.peerConnectionOptions&&this.initPeerConnection(t.peerConnectionOptions),Array.isArray(r)||(r=[r]),r=r.concat(this.modifiers);var i={type:this.hasOffer("local")?"answer":"offer",sdp:e};return Promise.resolve().then(function(){if(n.shouldAcquireMedia&&n.options.alwaysAcquireMediaFirst)return n.acquire(n.constraints).then(function(){n.shouldAcquireMedia=!1})}).then(function(){return c.Utils.reducePromises(r,i)}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("setDescription",e,"The modifiers did not resolve successfully");throw n.logger.error(t.message),n.emit("peerConnection-setRemoteDescriptionFailed",t),t}).then(function(e){return n.emit("setDescription",e),n.peerConnection.setRemoteDescription(e)}).catch(function(i){if(i.type===s.TypeStrings.SessionDescriptionHandlerError)throw i;if(/^m=video.+$/gm.test(e)&&!t.disableAudioFallback)return t.disableAudioFallback=!0,n.setDescription(e,t,[u.stripVideo].concat(r));var o=new a.Exceptions.SessionDescriptionHandlerError("setDescription",i);throw o.error&&n.logger.error(o.error),n.emit("peerConnection-setRemoteDescriptionFailed",o),o}).then(function(){n.peerConnection.getReceivers?n.emit("setRemoteDescription",n.peerConnection.getReceivers()):n.emit("setRemoteDescription",n.peerConnection.getRemoteStreams()),n.emit("confirmed",n)})},r.prototype.sendDtmf=function(e,t){if(void 0===t&&(t={}),!this.dtmfSender&&this.hasBrowserGetSenderSupport()){var r=this.peerConnection.getSenders();r.length>0&&(this.dtmfSender=r[0].dtmf)}if(!this.dtmfSender&&this.hasBrowserTrackSupport()){var n=this.peerConnection.getLocalStreams();if(n.length>0){var i=n[0].getAudioTracks();i.length>0&&(this.dtmfSender=this.peerConnection.createDTMFSender(i[0]))}}if(!this.dtmfSender)return!1;try{this.dtmfSender.insertDTMF(e,t.duration,t.interToneGap)}catch(e){if("InvalidStateError"===e.type||"InvalidCharacterError"===e.type)return this.logger.error(e),!1;throw e}return this.logger.log("DTMF sent via RTP: "+e.toString()),!0},r.prototype.getDirection=function(){return this.direction},r.prototype.on=function(e,r){return t.prototype.on.call(this,e,r)},r.prototype.createOfferOrAnswer=function(e,t){var r=this;void 0===e&&(e={}),void 0===t&&(t=[]);var n=this.hasOffer("remote")?"createAnswer":"createOffer",i=this.peerConnection;return this.logger.log(n),i[n](e).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e,"peerConnection-"+n+"Failed");throw r.emit("peerConnection-"+n+"Failed",t),t}).then(function(e){return c.Utils.reducePromises(t,r.createRTCSessionDescriptionInit(e))}).then(function(e){return r.resetIceGatheringComplete(),r.logger.log("Setting local sdp."),r.logger.log("sdp is "+e.sdp||!1),i.setLocalDescription(e)}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e,"peerConnection-SetLocalDescriptionFailed");throw r.emit("peerConnection-SetLocalDescriptionFailed",t),t}).then(function(){return r.waitForIceGatheringComplete()}).then(function(){var e=r.createRTCSessionDescriptionInit(r.peerConnection.localDescription);return c.Utils.reducePromises(t,e)}).then(function(e){return r.setDirection(e.sdp||""),e}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e);throw r.logger.error(t.toString()),t})},r.prototype.createRTCSessionDescriptionInit=function(e){return{type:e.type,sdp:e.sdp}},r.prototype.addDefaultIceCheckingTimeout=function(e){return void 0===e.iceCheckingTimeout&&(e.iceCheckingTimeout=500),e},r.prototype.addDefaultIceServers=function(e){return e.iceServers||(e.iceServers=[{urls:"stun:stun.l.google.com:19302"}]),e},r.prototype.checkAndDefaultConstraints=function(e){var t={audio:!0,video:!this.options.alwaysAcquireMediaFirst};return e=e||t,0===Object.keys(e).length&&e.constructor===Object?t:e},r.prototype.hasBrowserTrackSupport=function(){return Boolean(this.peerConnection.addTrack)},r.prototype.hasBrowserGetSenderSupport=function(){return Boolean(this.peerConnection.getSenders)},r.prototype.initPeerConnection=function(e){var t=this;void 0===e&&(e={}),(e=this.addDefaultIceCheckingTimeout(e)).rtcConfiguration=e.rtcConfiguration||{},e.rtcConfiguration=this.addDefaultIceServers(e.rtcConfiguration),this.logger.log("initPeerConnection"),this.peerConnection&&(this.logger.log("Already have a peer connection for this session. Tearing down."),this.resetIceGatheringComplete(),this.peerConnection.close()),this.peerConnection=new this.WebRTC.RTCPeerConnection(e.rtcConfiguration),this.logger.log("New peer connection created"),"ontrack"in this.peerConnection?this.peerConnection.addEventListener("track",function(e){t.logger.log("track added"),t.observer.trackAdded(),t.emit("addTrack",e)}):(this.logger.warn("Using onaddstream which is deprecated"),this.peerConnection.onaddstream=function(e){t.logger.log("stream added"),t.emit("addStream",e)}),this.peerConnection.onicecandidate=function(e){t.emit("iceCandidate",e),e.candidate?t.logger.log("ICE candidate received: "+(null===e.candidate.candidate?null:e.candidate.candidate.trim())):null===e.candidate&&(t.logger.log("ICE candidate gathering complete"),t.triggerIceGatheringComplete())},this.peerConnection.onicegatheringstatechange=function(){switch(t.logger.log("RTCIceGatheringState changed: "+t.peerConnection.iceGatheringState),t.peerConnection.iceGatheringState){case"gathering":t.emit("iceGathering",t),!t.iceGatheringTimer&&e.iceCheckingTimeout&&(t.iceGatheringTimeout=!1,t.iceGatheringTimer=setTimeout(function(){t.logger.log("RTCIceChecking Timeout Triggered after "+e.iceCheckingTimeout+" milliseconds"),t.iceGatheringTimeout=!0,t.triggerIceGatheringComplete()},e.iceCheckingTimeout));break;case"complete":t.triggerIceGatheringComplete()}},this.peerConnection.oniceconnectionstatechange=function(){var e;switch(t.peerConnection.iceConnectionState){case"new":e="iceConnection";break;case"checking":e="iceConnectionChecking";break;case"connected":e="iceConnectionConnected";break;case"completed":e="iceConnectionCompleted";break;case"failed":e="iceConnectionFailed";break;case"disconnected":e="iceConnectionDisconnected";break;case"closed":e="iceConnectionClosed";break;default:return void t.logger.warn("Unknown iceConnection state: "+t.peerConnection.iceConnectionState)}t.logger.log("ICE Connection State changed to "+e),t.emit(e,t)}},r.prototype.acquire=function(e){var t=this;return e=this.checkAndDefaultConstraints(e),new Promise(function(r,n){t.logger.log("acquiring local media"),t.emit("userMediaRequest",e),e.audio||e.video?t.WebRTC.getUserMedia(e).then(function(e){t.observer.trackAdded(),t.emit("userMedia",e),r(e)}).catch(function(e){t.emit("userMediaFailed",e),n(e)}):r([])}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"unable to acquire streams");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r}).then(function(e){t.logger.log("acquired local media streams");try{return t.peerConnection.removeTrack&&t.peerConnection.getSenders().forEach(function(e){t.peerConnection.removeTrack(e)}),e}catch(e){return Promise.reject(e)}}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"error removing streams");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r}).then(function(e){try{(e=[].concat(e)).forEach(function(e){t.peerConnection.addTrack?e.getTracks().forEach(function(r){t.peerConnection.addTrack(r,e)}):t.peerConnection.addStream(e)})}catch(e){return Promise.reject(e)}return Promise.resolve()}).catch(function(e){if(e.type===s.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"error adding stream");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r})},r.prototype.hasOffer=function(e){var t="have-"+e+"-offer";return this.peerConnection.signalingState===t},r.prototype.isIceGatheringComplete=function(){return"complete"===this.peerConnection.iceGatheringState||this.iceGatheringTimeout},r.prototype.resetIceGatheringComplete=function(){this.iceGatheringTimeout=!1,this.logger.log("resetIceGatheringComplete"),this.iceGatheringTimer&&(clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=void 0),this.iceGatheringDeferred&&(this.iceGatheringDeferred.reject(),this.iceGatheringDeferred=void 0)},r.prototype.setDirection=function(e){var t=e.match(/a=(sendrecv|sendonly|recvonly|inactive)/);if(null===t)return this.direction=this.C.DIRECTION.NULL,void this.observer.directionChanged();var r=t[1];switch(r){case this.C.DIRECTION.SENDRECV:case this.C.DIRECTION.SENDONLY:case this.C.DIRECTION.RECVONLY:case this.C.DIRECTION.INACTIVE:this.direction=r;break;default:this.direction=this.C.DIRECTION.NULL}this.observer.directionChanged()},r.prototype.triggerIceGatheringComplete=function(){this.isIceGatheringComplete()&&(this.emit("iceGatheringComplete",this),this.iceGatheringTimer&&(clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=void 0),this.iceGatheringDeferred&&(this.iceGatheringDeferred.resolve(),this.iceGatheringDeferred=void 0))},r.prototype.waitForIceGatheringComplete=function(){return this.logger.log("waitForIceGatheringComplete"),this.isIceGatheringComplete()?(this.logger.log("ICE is already complete. Return resolved."),Promise.resolve()):(this.iceGatheringDeferred||(this.iceGatheringDeferred=c.Utils.defer()),this.logger.log("ICE is not complete. Returning promise"),this.iceGatheringDeferred?this.iceGatheringDeferred.promise:Promise.resolve())},r}(o.EventEmitter);t.SessionDescriptionHandler=h}).call(this,r(1))},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(2),a=r(8),c=r(9),u=r(43),l=r(5);!function(e){e[e.STATUS_CONNECTING=0]="STATUS_CONNECTING",e[e.STATUS_OPEN=1]="STATUS_OPEN",e[e.STATUS_CLOSING=2]="STATUS_CLOSING",e[e.STATUS_CLOSED=3]="STATUS_CLOSED"}(o=t.TransportStatus||(t.TransportStatus={}));var h=function(t){function r(r,n){void 0===n&&(n={});var i=t.call(this,r,n)||this;return i.WebSocket=(e.window||e).WebSocket,i.type=s.TypeStrings.Transport,i.reconnectionAttempts=0,i.status=o.STATUS_CONNECTING,i.configuration=i.loadConfig(n),i.server=i.configuration.wsServers[0],i}return i(r,t),r.prototype.isConnected=function(){return this.status===o.STATUS_OPEN},r.prototype.sendPromise=function(e,t){if(void 0===t&&(t={}),!this.statusAssert(o.STATUS_OPEN,t.force))return this.onError("unable to send message - WebSocket not open"),Promise.reject();var r=e.toString();return this.ws?(!0===this.configuration.traceSip&&this.logger.log("sending WebSocket message:\n\n"+r+"\n"),this.ws.send(r),Promise.resolve({msg:r})):(this.onError("unable to send message - WebSocket does not exist"),Promise.reject())},r.prototype.disconnectPromise=function(e){var t=this;return void 0===e&&(e={}),this.disconnectionPromise?this.disconnectionPromise:(e.code=e.code||1e3,this.statusTransition(o.STATUS_CLOSING,e.force)?(this.emit("disconnecting"),this.disconnectionPromise=new Promise(function(r,n){t.disconnectDeferredResolve=r,t.reconnectTimer&&(clearTimeout(t.reconnectTimer),t.reconnectTimer=void 0),t.ws?(t.stopSendingKeepAlives(),t.logger.log("closing WebSocket "+t.server.wsUri),t.ws.close(e.code,e.reason)):n("Attempted to disconnect but the websocket doesn't exist")}),this.disconnectionPromise):this.status===o.STATUS_CLOSED?Promise.resolve({overrideEvent:!0}):this.connectionPromise?this.connectionPromise.then(function(){return Promise.reject("The websocket did not disconnect")}).catch(function(){return Promise.resolve({overrideEvent:!0})}):Promise.reject("The websocket did not disconnect"))},r.prototype.connectPromise=function(e){var t=this;return void 0===e&&(e={}),this.status!==o.STATUS_CLOSING||e.force?this.connectionPromise?this.connectionPromise:(this.server=this.server||this.getNextWsServer(e.force),this.connectionPromise=new Promise(function(r,n){if((t.status===o.STATUS_OPEN||t.status===o.STATUS_CLOSING)&&!e.force)return t.logger.warn("WebSocket "+t.server.wsUri+" is already connected"),void n("Failed status check - attempted to open a connection but already open/closing");t.connectDeferredResolve=r,t.status=o.STATUS_CONNECTING,t.emit("connecting"),t.logger.log("connecting to WebSocket "+t.server.wsUri),t.disposeWs();try{t.ws=new WebSocket(t.server.wsUri,"sip")}catch(e){return t.ws=null,t.status=o.STATUS_CLOSED,t.onError("error connecting to WebSocket "+t.server.wsUri+":"+e),void n("Failed to create a websocket")}t.ws?(t.connectionTimeout=setTimeout(function(){t.statusTransition(o.STATUS_CLOSED),t.logger.warn("took too long to connect - exceeded time set in configuration.connectionTimeout: "+t.configuration.connectionTimeout+"s"),t.emit("disconnected",{code:1e3}),t.connectionPromise=void 0,n("Connection timeout")},1e3*t.configuration.connectionTimeout),t.boundOnOpen=t.onOpen.bind(t),t.boundOnMessage=t.onMessage.bind(t),t.boundOnClose=t.onClose.bind(t),t.boundOnError=t.onWebsocketError.bind(t),t.ws.addEventListener("open",t.boundOnOpen),t.ws.addEventListener("message",t.boundOnMessage),t.ws.addEventListener("close",t.boundOnClose),t.ws.addEventListener("error",t.boundOnError)):n("Unexpected instance websocket not set")}),this.connectionPromise):Promise.reject("WebSocket "+this.server.wsUri+" is closing")},r.prototype.onMessage=function(e){var t,r=e.data;if(/^(\r\n)+$/.test(r))return this.clearKeepAliveTimeout(),void(!0===this.configuration.traceSip&&this.logger.log("received WebSocket message with CRLF Keep Alive response"));if(r){if("string"!=typeof r){try{t=String.fromCharCode.apply(null,new Uint8Array(r))}catch(e){return void this.logger.warn("received WebSocket binary message failed to be converted into string, message discarded")}!0===this.configuration.traceSip&&this.logger.log("received WebSocket binary message:\n\n"+r+"\n")}else!0===this.configuration.traceSip&&this.logger.log("received WebSocket text message:\n\n"+r+"\n"),t=r;this.emit("message",t)}else this.logger.warn("received empty message, message discarded")},r.prototype.onOpen=function(){if(this.status===o.STATUS_CLOSED){var e=this.ws;return this.disposeWs(),void e.close(1e3)}this.status=o.STATUS_OPEN,this.emit("connected"),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0),this.logger.log("WebSocket "+this.server.wsUri+" connected"),void 0!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=void 0),this.reconnectionAttempts=0,this.disconnectionPromise=void 0,this.disconnectDeferredResolve=void 0,this.startSendingKeepAlives(),this.connectDeferredResolve?this.connectDeferredResolve({overrideEvent:!0}):this.logger.warn("Unexpected websocket.onOpen with no connectDeferredResolve")},r.prototype.onClose=function(e){if(this.logger.log("WebSocket disconnected (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),this.status!==o.STATUS_CLOSING&&(this.logger.warn("WebSocket closed without SIP.js requesting it"),this.emit("transportError")),this.stopSendingKeepAlives(),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0,this.connectionPromise=void 0,this.connectDeferredResolve=void 0,this.disconnectDeferredResolve)return this.disconnectDeferredResolve({overrideEvent:!0}),this.statusTransition(o.STATUS_CLOSED),void(this.disconnectDeferredResolve=void 0);this.status=o.STATUS_CLOSED,this.emit("disconnected",{code:e.code,reason:e.reason}),this.reconnect()},r.prototype.disposeWs=function(){this.ws&&(this.ws.removeEventListener("open",this.boundOnOpen),this.ws.removeEventListener("message",this.boundOnMessage),this.ws.removeEventListener("close",this.boundOnClose),this.ws.removeEventListener("error",this.boundOnError),this.ws=void 0)},r.prototype.onError=function(e){this.logger.warn("Transport error: "+e),this.emit("transportError")},r.prototype.onWebsocketError=function(){this.onError("The Websocket had an error")},r.prototype.reconnect=function(){var e=this;if(this.reconnectionAttempts>0&&this.logger.log("Reconnection attempt "+this.reconnectionAttempts+" failed"),this.noAvailableServers())return this.logger.warn("attempted to get next ws server but there are no available ws servers left"),this.logger.warn("no available ws servers left - going to closed state"),this.status=o.STATUS_CLOSED,this.emit("closed"),void this.resetServerErrorStatus();this.isConnected()&&(this.logger.warn("attempted to reconnect while connected - forcing disconnect"),this.disconnect({force:!0})),this.reconnectionAttempts+=1,this.reconnectionAttempts>this.configuration.maxReconnectionAttempts?(this.logger.warn("maximum reconnection attempts for WebSocket "+this.server.wsUri),this.logger.log("transport "+this.server.wsUri+" failed | connection state set to 'error'"),this.server.isError=!0,this.emit("transportError"),this.noAvailableServers()||(this.server=this.getNextWsServer()),this.reconnectionAttempts=0,this.reconnect()):(this.logger.log("trying to reconnect to WebSocket "+this.server.wsUri+" (reconnection attempt "+this.reconnectionAttempts+")"),this.reconnectTimer=setTimeout(function(){e.connect(),e.reconnectTimer=void 0},1===this.reconnectionAttempts?0:1e3*this.configuration.reconnectionTimeout))},r.prototype.resetServerErrorStatus=function(){for(var e=0,t=this.configuration.wsServers;e<t.length;e++){t[e].isError=!1}},r.prototype.getNextWsServer=function(e){if(void 0===e&&(e=!1),this.noAvailableServers())throw this.logger.warn("attempted to get next ws server but there are no available ws servers left"),new Error("Attempted to get next ws server, but there are no available ws servers left.");for(var t=[],r=0,n=this.configuration.wsServers;r<n.length;r++){var i=n[r];i.isError&&!e||(0===t.length?t.push(i):i.weight>t[0].weight?t=[i]:i.weight===t[0].weight&&t.push(i))}return t[Math.floor(Math.random()*t.length)]},r.prototype.noAvailableServers=function(){for(var e=0,t=this.configuration.wsServers;e<t.length;e++){if(!t[e].isError)return!1}return!0},r.prototype.sendKeepAlive=function(){var e=this;if(!this.keepAliveDebounceTimeout)return this.keepAliveDebounceTimeout=setTimeout(function(){e.emit("keepAliveDebounceTimeout"),e.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send("\r\n\r\n")},r.prototype.clearKeepAliveTimeout=function(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0},r.prototype.startSendingKeepAlives=function(){var e,t,r=this;this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(function(){r.sendKeepAlive(),r.startSendingKeepAlives()},(e=this.configuration.keepAliveInterval,t=.8*e,1e3*(Math.random()*(e-t)+t))))},r.prototype.stopSendingKeepAlives=function(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0},r.prototype.statusAssert=function(e,t){return e===this.status||(t?(this.logger.warn("Attempted to assert "+Object.keys(o)[this.status]+" as "+Object.keys(o)[e]+"- continuing with option: 'force'"),!0):(this.logger.warn("Tried to assert "+Object.keys(o)[e]+" but is currently "+Object.keys(o)[this.status]),!1))},r.prototype.statusTransition=function(e,t){return void 0===t&&(t=!1),this.logger.log("Attempting to transition status from "+Object.keys(o)[this.status]+" to "+Object.keys(o)[e]),e===o.STATUS_CONNECTING&&this.statusAssert(o.STATUS_CLOSED,t)||e===o.STATUS_OPEN&&this.statusAssert(o.STATUS_CONNECTING,t)||e===o.STATUS_CLOSING&&this.statusAssert(o.STATUS_OPEN,t)||e===o.STATUS_CLOSED?(this.status=e,!0):(this.logger.warn("Status transition failed - result: no-op - reason: either gave an nonexistent status or attempted illegal transition"),!1)},r.prototype.loadConfig=function(e){var t={wsServers:[{scheme:"WSS",sipUri:"<sip:edge.sip.onsip.com;transport=ws;lr>",weight:0,wsUri:"wss://edge.sip.onsip.com",isError:!1}],connectionTimeout:5,maxReconnectionAttempts:3,reconnectionTimeout:4,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!1},r=this.getConfigurationCheck();for(var n in r.mandatory){if(!e.hasOwnProperty(n))throw new a.Exceptions.ConfigurationError(n);var i=e[n];if(void 0===(o=r.mandatory[n](i)))throw new a.Exceptions.ConfigurationError(n,i);t[n]=o}for(var n in r.optional)if(e.hasOwnProperty(n)){var o;if((i=e[n])instanceof Array&&0===i.length||null===i||""===i||void 0===i||"number"==typeof i&&isNaN(i))continue;if(void 0===(o=r.optional[n](i)))throw new a.Exceptions.ConfigurationError(n,i);t[n]=o}var s={};for(var n in t)t.hasOwnProperty(n)&&(s[n]={value:t[n]});var c=Object.defineProperties({},s);for(var n in this.logger.log("configuration parameters after validation:"),t)t.hasOwnProperty(n)&&this.logger.log("\xb7 "+n+": "+JSON.stringify(t[n]));return c},r.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{wsServers:function(e){if("string"==typeof e)e=[{wsUri:e}];else{if(!(e instanceof Array))return;for(var t=0;t<e.length;t++)"string"==typeof e[t]&&(e[t]={wsUri:e[t]})}if(0===e.length)return!1;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!i.wsUri)return;if(i.weight&&!Number(i.weight))return;var o=c.Grammar.parse(i.wsUri,"absoluteURI");if(-1===o)return;if(["wss","ws","udp"].indexOf(o.scheme)<0)return;i.sipUri="<sip:"+o.host+(o.port?":"+o.port:"")+";transport="+o.scheme.replace(/^wss$/i,"ws")+";lr>",i.weight||(i.weight=0),i.isError=!1,i.scheme=o.scheme.toUpperCase()}return e},keepAliveInterval:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},keepAliveDebounce:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},traceSip:function(e){if("boolean"==typeof e)return e},connectionTimeout:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},maxReconnectionAttempts:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},reconnectionTimeout:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}}}}},r.C=o,r}(u.Transport);t.Transport=h}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n=r(77),i=r(78),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(a,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function h(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},s=typeof(e=e||n);if("blob:"===e.protocol)i=new p(unescape(e.pathname),{});else if("string"===s)for(r in i=new p(e,{}),l)delete i[r];else if("object"===s){for(r in e)r in l||(i[r]=e[r]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}function d(e){e=c(e);var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,r){if(e=c(e),!(this instanceof p))return new p(e,t,r);var o,s,a,l,f,g,m=u.slice(),v=typeof t,y=this,b=0;for("object"!==v&&"string"!==v&&(r=t,t=null),r&&"function"!=typeof r&&(r=i.parse),t=h(t),o=!(s=d(e||"")).protocol&&!s.slashes,y.slashes=s.slashes||o&&t.slashes,y.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(m[3]=[/(.*)/,"pathname"]);b<m.length;b++)"function"!=typeof(l=m[b])?(a=l[0],g=l[1],a!=a?y[g]=e:"string"==typeof a?~(f=e.indexOf(a))&&("number"==typeof l[2]?(y[g]=e.slice(0,f),e=e.slice(f+l[2])):(y[g]=e.slice(f),e=e.slice(0,f))):(f=a.exec(e))&&(y[g]=f[1],e=e.slice(0,f.index)),y[g]=y[g]||o&&l[3]&&t[g]||"",l[4]&&(y[g]=y[g].toLowerCase())):e=l(e);r&&(y.query=r(y.query)),o&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(o=!0),r.splice(n,1),s--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(y.pathname,t.pathname)),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(l=y.auth.split(":"),y.username=l[0]||"",y.password=l[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(e,t,r){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;default:o[e]=t}for(var a=0;a<u.length;a++){var c=u[a];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}},p.extractProtocol=d,p.location=h,p.trimLeft=c,p.qs=i,e.exports=p}).call(this,r(1))},function(e,t,r){"use strict";function n(){this._listeners={}}n.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===r.indexOf(t)&&(r=r.concat([t])),this._listeners[e]=r},n.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var n=r.indexOf(t);-1===n||(r.length>1?this._listeners[e]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[e])}},n.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var n=this._listeners[t],i=0;i<n.length;i++)n[i].apply(this,r)},e.exports=n},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(81),s=r(82),a=function(){};function c(e,t,r,n,c){var u=i.addPath(e,t);a(u);var l=this;o.call(this,e,r),this.poll=new s(n,u,c),this.poll.on("message",function(e){a("poll message",e),l.emit("message",e)}),this.poll.once("close",function(e,t){a("poll close",e,t),l.poll=null,l.emit("close",e,t),l.close()})}n(c,o),c.prototype.close=function(){o.prototype.close.call(this),a("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=c},function(e,t,r){"use strict";(function(t){var n=r(4).EventEmitter,i=r(0),o=r(11),s=r(6),a=t.XMLHttpRequest,c=function(){};function u(e,t,r,i){c(e,t);var o=this;n.call(this),setTimeout(function(){o._start(e,t,r,i)},0)}i(u,n),u.prototype._start=function(e,t,r,n){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){c("unload cleanup"),i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(n&&n.noCredentials||!u.supportsCORS||(c("withCredentials"),this.xhr.withCredentials=!0),n&&n.headers)for(var l in n.headers)this.xhr.setRequestHeader(l,n.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,r=i.xhr;switch(c("readyState",r.readyState),r.readyState){case 3:try{t=r.status,e=r.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),i.emit("chunk",t,e));break;case 4:t=r.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,r.responseText),i.emit("finish",t,r.responseText),i._cleanup(!1)}}};try{i.xhr.send(r)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},u.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},u.prototype.close=function(){c("close"),this._cleanup(!0)},u.enabled=!!a;var l=["Active"].concat("Object").join("X");!u.enabled&&l in t&&(c("overriding xmlhttprequest"),a=function(){try{return new t[l]("Microsoft.XMLHTTP")}catch(e){return null}},u.enabled=!!new a);var h=!1;try{h="withCredentials"in new a}catch(e){}u.supportsCORS=h,e.exports=u}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(23),s=r(29);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}n(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(s.enabled&&e.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(83),s=r(24),a=r(52);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}n(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},function(e,t,r){(function(t){e.exports=t.EventSource}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(4).EventEmitter,s=r(54),a=r(6),c=r(19),u=r(11),l=r(15),h=function(){};function d(e,t,r){if(!d.enabled())throw new Error("Transport created when disabled");o.call(this);var n=this;this.origin=a.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var i=a.addPath(r,"/iframe.html")+"#"+this.windowId;h(e,t,i),this.iframeObj=c.createIframe(i,function(e){h("err callback"),n.emit("close",1006,"Unable to load an iframe ("+e+")"),n.close()}),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}n(d,o),d.prototype.close=function(){if(h("close"),this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(h("message",e.data),a.isOriginEqual(e.origin,this.origin)){var t;try{t=i.parse(e.data)}catch(t){return void h("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=i.parse(t.data)}catch(e){return void h("bad json",t.data)}this.emit("close",r[0],r[1]),this.close()}else h("mismatched window id",t.windowId,this.windowId)}else h("not same origin",e.origin,this.origin)},d.prototype.postMessage=function(e,t){h("postMessage",e,t),this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){h("send",e),this.postMessage("m",e)},d.enabled=function(){return c.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},function(e,t){e.exports="1.3.0"},function(e,t,r){"use strict";var n=r(0),i=r(86),o=r(17),s=r(16);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}n(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(23),s=r(24),a=r(17);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}n(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},function(e,t,r){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(4).EventEmitter,o=r(10),s=r(17),a=r(59);function c(e){var t=this;i.call(this),this.ir=new a(e,s),this.ir.once("finish",function(e,r){t.ir=null,t.emit("message",o.stringify([e,r]))})}n(c,i),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=c},function(e,t,r){"use strict";var n=r(4).EventEmitter,i=r(0),o=r(10),s=r(31),a=function(){};function c(e,t){n.call(this);var r=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var n,c;if(200===e){if(c=+new Date-i,t)try{n=o.parse(t)}catch(e){a("bad json",t)}s.isObject(n)||(n={})}r.emit("finish",n,c),r.removeAllListeners()})}i(c,n),c.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61);t.SIP=n;var i=r(69);t.CORE=i;var o=r(33),s=o.title;t.name=s;var a=o.version;t.version=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14);t.ClientContext=n.ClientContext;var i=r(3);t.C=i.C;var o=r(25);t.Dialog=o.Dialog;var s=r(35);t.DigestAuthentication=s.DigestAuthentication;var a=r(2);t.DialogStatus=a.DialogStatus,t.SessionStatus=a.SessionStatus,t.TypeStrings=a.TypeStrings,t.UAStatus=a.UAStatus;var c=r(8);t.Exceptions=c.Exceptions;var u=r(9);t.Grammar=u.Grammar;var l=r(36);t.LoggerFactory=l.LoggerFactory;var h=r(34);t.NameAddrHeader=h.NameAddrHeader;var d=r(37);t.Parser=d.Parser;var p=r(38);t.PublishContext=p.PublishContext;var f=r(39);t.RegisterContext=f.RegisterContext;var g=r(20);t.RequestSender=g.RequestSender;var m=r(40).SanityCheck.sanityCheck;t.sanityCheck=m;var v=r(26);t.ServerContext=v.ServerContext;var y=r(41);t.InviteClientContext=y.InviteClientContext,t.InviteServerContext=y.InviteServerContext,t.ReferClientContext=y.ReferClientContext,t.ReferServerContext=y.ReferServerContext,t.Session=y.Session;var b=r(13);t.IncomingRequest=b.IncomingRequest,t.IncomingResponse=b.IncomingResponse,t.OutgoingRequest=b.OutgoingRequest;var T=r(42);t.Subscription=T.Subscription;var S=r(21);t.Timers=S.Timers;var C=r(12),w={InviteClientTransaction:C.InviteClientTransaction,InviteServerTransaction:C.InviteServerTransaction,NonInviteClientTransaction:C.NonInviteClientTransaction,NonInviteServerTransaction:C.NonInviteServerTransaction};t.Transactions=w;var E=r(43);t.Transport=E.Transport;var _=r(27);t.UA=_.UA;var A=r(22);t.URI=A.URI;var x=r(5);t.Utils=x.Utils;var R=r(67);t.Web=R},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(34),s=r(22),a=function(e){function t(r,n,i,o){var s=e.call(this)||this;return s.message=r,s.expected=n,s.found=i,s.location=o,s.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s,t),s}return i(t,e),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){switch(e.type){case"literal":return'"'+n(e.text)+'"';case"class":var t=e.parts.map(function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)});return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,r,n=e.map(o);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+((s=t)?'"'+n(s)+'"':"end of input")+" found.";var s},t}(Error);t.SyntaxError=a,t.parse=function(e,t){t=void 0!==t?t:{};var r,n={},i={Contact:Ba,Name_Addr_Header:function(){var e,t,r,i,o,s,a;for(e=vs,t=[],r=Va();r!==n;)t.push(r),r=Va();if(t!==n)if((r=ra())!==n)if(da()!==n)if(ta()!==n){for(i=[],o=vs,(s=ia())!==n&&(a=za())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=ia())!==n&&(a=za())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?(ys=e,t=Wn(),e=t):(vs=e,e=n)}else vs=e,e=n;else vs=e,e=n;else vs=e,e=n;else vs=e,e=n;return e},Record_Route:function(){var e,t,r,i,o,s;if(e=vs,(t=sc())!==n){for(r=[],i=vs,(o=na())!==n&&(s=sc())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=na())!==n&&(s=sc())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=_i(),e=t):(vs=e,e=n)}else vs=e,e=n;return e},Request_Response:Na,SIP_URI:da,Subscription_State:function(){var t,r,i,o,s,a;if(t=vs,(r=function(){var t,r;return t=vs,e.substr(vs,6).toLowerCase()===Bi?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(Wi)),r===n&&(e.substr(vs,7).toLowerCase()===Gi?(r=e.substr(vs,7),vs+=7):(r=n,0===Cs&&Is(Vi)),r===n&&(e.substr(vs,10).toLowerCase()===Ki?(r=e.substr(vs,10),vs+=10):(r=n,0===Cs&&Is(Yi)),r===n&&(r=Js()))),r!==n&&(ys=t,r=zi()),t=r}())!==n){for(i=[],o=vs,(s=ia())!==n&&(a=cc())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=ia())!==n&&(a=cc())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t},Supported:function(){var e,t,r,i,o,s,a;if(e=vs,t=vs,(r=Js())!==n){for(i=[],o=vs,(s=na())!==n&&(a=Js())!==n?(ys=o,s=qi(r,a),o=s):(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=na())!==n&&(a=Js())!==n?(ys=o,s=qi(r,a),o=s):(vs=o,o=n);i!==n?(ys=t,r=Mi(r,i),t=r):(vs=t,t=n)}else vs=t,t=n;return t===n&&(t=null),t!==n&&(ys=e,t=vo(t)),e=t},Require:function(){var e,t,r,i,o,s,a;if(e=vs,t=vs,(r=Js())!==n){for(i=[],o=vs,(s=na())!==n&&(a=Js())!==n?(ys=o,s=qi(r,a),o=s):(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=na())!==n&&(a=Js())!==n?(ys=o,s=qi(r,a),o=s):(vs=o,o=n);i!==n?(ys=t,r=Mi(r,i),t=r):(vs=t,t=n)}else vs=t,t=n;return t===n&&(t=null),t!==n&&(ys=e,t=Fi(t)),e=t},Via:function(){var e,t,r,i,o,s;if(e=vs,(t=lc())!==n){for(r=[],i=vs,(o=na())!==n&&(s=lc())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=na())!==n&&(s=lc())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?e=t=[t,r]:(vs=e,e=n)}else vs=e,e=n;return e},absoluteURI:Da,Call_ID:Fa,Content_Disposition:function(){var t,r,i,o,s,a;if(t=vs,(r=function(){var t,r;return t=vs,e.substr(vs,6).toLowerCase()===rn?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(nn)),r===n&&(e.substr(vs,7).toLowerCase()===on?(r=e.substr(vs,7),vs+=7):(r=n,0===Cs&&Is(sn)),r===n&&(e.substr(vs,4).toLowerCase()===an?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(cn)),r===n&&(e.substr(vs,5).toLowerCase()===un?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(ln)),r===n&&(r=Js())))),r!==n&&(ys=t,r=hn()),t=r}())!==n){for(i=[],o=vs,(s=ia())!==n&&(a=$a())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=ia())!==n&&(a=$a())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t},Content_Length:function(){var e,t,r;if(e=vs,t=[],(r=Ds())!==n)for(;r!==n;)t.push(r),r=Ds();else t=n;return t!==n&&(ys=e,t=yn(t)),e=t},Content_Type:function(){var t,r;return t=vs,(r=function(){var t,r,i,o,s,a,c,u;if(t=vs,(r=function(){var t;return(t=function(){var t;return e.substr(vs,4).toLowerCase()===Tn?(t=e.substr(vs,4),vs+=4):(t=n,0===Cs&&Is(Sn)),t===n&&(e.substr(vs,5).toLowerCase()===Cn?(t=e.substr(vs,5),vs+=5):(t=n,0===Cs&&Is(wn)),t===n&&(e.substr(vs,5).toLowerCase()===En?(t=e.substr(vs,5),vs+=5):(t=n,0===Cs&&Is(_n)),t===n&&(e.substr(vs,5).toLowerCase()===An?(t=e.substr(vs,5),vs+=5):(t=n,0===Cs&&Is(xn)),t===n&&(e.substr(vs,11).toLowerCase()===Rn?(t=e.substr(vs,11),vs+=11):(t=n,0===Cs&&Is(In)),t===n&&(t=Ja()))))),t}())===n&&(t=function(){var t;return e.substr(vs,7).toLowerCase()===On?(t=e.substr(vs,7),vs+=7):(t=n,0===Cs&&Is(Nn)),t===n&&(e.substr(vs,9).toLowerCase()===Dn?(t=e.substr(vs,9),vs+=9):(t=n,0===Cs&&Is(Pn)),t===n&&(t=Ja())),t}()),t}())!==n)if((i=Zs())!==n)if((o=function(){var e;return(e=Ja())===n&&(e=Js()),e}())!==n){for(s=[],a=vs,(c=ia())!==n&&(u=Xa())!==n?a=c=[c,u]:(vs=a,a=n);a!==n;)s.push(a),a=vs,(c=ia())!==n&&(u=Xa())!==n?a=c=[c,u]:(vs=a,a=n);s!==n?t=r=[r,i,o,s]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t}())!==n&&(ys=t,r=bn()),t=r},CSeq:function(){var e,t,r,i;return e=vs,(t=function(){var e,t,r;if(e=vs,t=[],(r=Ds())!==n)for(;r!==n;)t.push(r),r=Ds();else t=n;return t!==n&&(ys=e,t=Hn(t)),e=t}())!==n&&(r=Vs())!==n&&(i=Ma())!==n?e=t=[t,r,i]:(vs=e,e=n),e},displayName:Va,Event:function(){var e,t,r,i,o,s;if(e=vs,(t=Qa())!==n){for(r=[],i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=jn(t),e=t):(vs=e,e=n)}else vs=e,e=n;return e},From:function(){var e,t,r,i,o,s;if(e=vs,(t=ha())===n&&(t=Ga()),t!==n){for(r=[],i=vs,(o=ia())!==n&&(s=Za())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=Za())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=Ln(),e=t):(vs=e,e=n)}else vs=e,e=n;return e},host:va,Max_Forwards:function(){var e,t,r;if(e=vs,t=[],(r=Ds())!==n)for(;r!==n;)t.push(r),r=Ds();else t=n;return t!==n&&(ys=e,t=Bn(t)),e=t},Min_SE:function(){var e,t,r,i,o,s;if(e=vs,(t=Ya())!==n){for(r=[],i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=Xo(t),e=t):(vs=e,e=n)}else vs=e,e=n;return e},Proxy_Authenticate:function(){return tc()},quoted_string:aa,Refer_To:function(){var e,t,r,i,o,s;if(e=vs,(t=ha())===n&&(t=Ga())===n&&(t=vs,(r=ra())===n&&(r=null),r!==n&&(i=Da())!==n?((o=ta())===n&&(o=null),o!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n)),t!==n){for(r=[],i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=za())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=xi(),e=t):(vs=e,e=n)}else vs=e,e=n;return e},Replaces:function(){var e,t,r,i,o,s;if(e=vs,(t=function(){var e,t;return e=vs,(t=Fa())!==n&&(ys=e,t=Ii()),e=t}())!==n){for(r=[],i=vs,(o=ia())!==n&&(s=ac())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=ac())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=Ri(),e=t):(vs=e,e=n)}else vs=e,e=n;return e},Session_Expires:function(){var e,t,r,i,o,s;if(e=vs,(t=Ya())!==n){for(r=[],i=vs,(o=ia())!==n&&(s=fc())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=fc())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=Wo(t),e=t):(vs=e,e=n)}else vs=e,e=n;return e},stun_URI:function(){var t,r,i,o;return t=vs,(r=function(){var t,r;return t=vs,e.substr(vs,5).toLowerCase()===Qo?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(Zo)),r===n&&(e.substr(vs,4).toLowerCase()===es?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(ts))),r!==n&&(ys=t,r=rs(r)),t=r}())!==n?(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i!==n&&(o=gc())!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t},To:function(){var e,t,r,i,o,s;if(e=vs,(t=ha())===n&&(t=Ga()),t!==n){for(r=[],i=vs,(o=ia())!==n&&(s=uc())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=uc())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,t=yo(),e=t):(vs=e,e=n)}else vs=e,e=n;return e},turn_URI:function(){var t,r,i,o,s,a,c;return t=vs,(r=function(){var t,r;return t=vs,e.substr(vs,5).toLowerCase()===ss?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(as)),r===n&&(e.substr(vs,4).toLowerCase()===cs?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(us))),r!==n&&(ys=t,r=rs(r)),t=r}())!==n?(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i!==n&&(o=gc())!==n?(s=vs,e.substr(vs,11)===is?(a=is,vs+=11):(a=n,0===Cs&&Is(os)),a!==n&&(c=dc())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?t=r=[r,i,o,s]:(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t},uuid:function(){var t,r,i,o,s,a;return t=vs,(r=function(){var e,t,r;return e=vs,(t=mc())!==n&&(r=mc())!==n?e=t=[t,r]:(vs=e,e=n),e}())!==n?(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i!==n&&mc()!==n?(45===e.charCodeAt(vs)?(o=Y,vs++):(o=n,0===Cs&&Is(z)),o!==n&&mc()!==n?(45===e.charCodeAt(vs)?(s=Y,vs++):(s=n,0===Cs&&Is(z)),s!==n&&mc()!==n?(45===e.charCodeAt(vs)?(a=Y,vs++):(a=n,0===Cs&&Is(z)),a!==n&&function(){var e,t,r,i;return e=vs,(t=mc())!==n&&(r=mc())!==n&&(i=mc())!==n?e=t=[t,r,i]:(vs=e,e=n),e}()!==n?(ys=t,r=ls(),t=r):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t},WWW_Authenticate:function(){return tc()},challenge:tc,sipfrag:function(){var e,t,r,i,o,s;if(e=vs,(t=Na())!==n){for(r=[],i=Ia();i!==n;)r.push(i),i=Ia();r!==n?(i=vs,(o=Ns())!==n&&(s=function(){var e,t;for(e=[],t=Hs();t!==n;)e.push(t),t=Hs();return e}())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?e=t=[t,r,i]:(vs=e,e=n)):(vs=e,e=n)}else vs=e,e=n;return e},Referred_By:function(){var t,r,i,o,s,a,c,u;if(t=vs,e.substr(vs,11)===hs?(r=hs,vs+=11):(r=n,0===Cs&&Is(ds)),r===n&&(98===e.charCodeAt(vs)?(r=ps,vs++):(r=n,0===Cs&&Is(fs))),r!==n)if((i=Ys())!==n)if((o=function(){var e;return(e=Ga())===n&&(e=ha()),e}())!==n){for(s=[],a=vs,(c=ia())!==n?((u=vc())===n&&(u=za()),u!==n?a=c=[c,u]:(vs=a,a=n)):(vs=a,a=n);a!==n;)s.push(a),a=vs,(c=ia())!==n?((u=vc())===n&&(u=za()),u!==n?a=c=[c,u]:(vs=a,a=n)):(vs=a,a=n);s!==n?t=r=[r,i,o,s]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t}},c=Ba,u="\r\n",l=_s("\r\n",!1),h=/^[0-9]/,d=As([["0","9"]],!1,!1),p=/^[a-zA-Z]/,f=As([["a","z"],["A","Z"]],!1,!1),g=/^[0-9a-fA-F]/,m=As([["0","9"],["a","f"],["A","F"]],!1,!1),v=/^[\0-\xFF]/,y=As([["\0","\xff"]],!1,!1),b=/^["]/,T=As(['"'],!1,!1),S=" ",C=_s(" ",!1),w="\t",E=_s("\t",!1),_=/^[a-zA-Z0-9]/,A=As([["a","z"],["A","Z"],["0","9"]],!1,!1),x=";",R=_s(";",!1),I="/",O=_s("/",!1),N="?",D=_s("?",!1),P=":",k=_s(":",!1),U="@",H=_s("@",!1),j="&",L=_s("&",!1),q="=",M=_s("=",!1),F="+",B=_s("+",!1),W="$",G=_s("$",!1),V=",",K=_s(",",!1),Y="-",z=_s("-",!1),$="_",J=_s("_",!1),X=".",Q=_s(".",!1),Z="!",ee=_s("!",!1),te="~",re=_s("~",!1),ne="*",ie=_s("*",!1),oe="'",se=_s("'",!1),ae="(",ce=_s("(",!1),ue=")",le=_s(")",!1),he="%",de=_s("%",!1),pe=function(){return" "},fe=function(){return":"},ge=(As([["!","~"]],!1,!1),/^[\x80-\uFFFF]/),me=As([["\x80","\uffff"]],!1,!1),ve=/^[\x80-\xBF]/,ye=As([["\x80","\xbf"]],!1,!1),be=(As([["a","f"]],!1,!1),"`"),Te=_s("`",!1),Se="<",Ce=_s("<",!1),we=">",Ee=_s(">",!1),_e="\\",Ae=_s("\\",!1),xe="[",Re=_s("[",!1),Ie="]",Oe=_s("]",!1),Ne="{",De=_s("{",!1),Pe="}",ke=_s("}",!1),Ue=function(){return"*"},He=function(){return"/"},je=function(){return"="},Le=function(){return">"},qe=function(){return"<"},Me=function(){return","},Fe=function(){return";"},Be=function(){return":"},We=function(){return'"'},Ge=(As([["!","'"]],!1,!1),As([["*","["]],!1,!1),/^[\]-~]/),Ve=As([["]","~"]],!1,!1),Ke=function(e){return e},Ye=/^[#-[]/,ze=As([["#","["]],!1,!1),$e=/^[\0-\t]/,Je=As([["\0","\t"]],!1,!1),Xe=/^[\x0B-\f]/,Qe=As([["\v","\f"]],!1,!1),Ze=/^[\x0E-\x7F]/,et=As([["\x0e","\x7f"]],!1,!1),tt=function(){(t=t||{data:{}}).data.uri=new s.URI(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},rt=function(){(t=t||{data:{}}).data.uri=new s.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,"SIP_URI"===t.startRule&&(t.data=t.data.uri)},nt="sips",it=_s("sips",!0),ot="sip",st=_s("sip",!0),at=function(e){(t=t||{data:{}}).data.scheme=e},ct=function(){(t=t||{data:{}}).data.user=decodeURIComponent(ws().slice(0,-1))},ut=function(){(t=t||{data:{}}).data.password=ws()},lt=function(){return(t=t||{data:{}}).data.host=ws(),t.data.host},ht=function(){return(t=t||{data:{}}).data.host_type="domain",ws()},dt=/^[a-zA-Z0-9_\-]/,pt=As([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),ft=/^[a-zA-Z0-9\-]/,gt=As([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),mt=function(){return(t=t||{data:{}}).data.host_type="IPv6",ws()},vt="::",yt=_s("::",!1),bt=function(){return(t=t||{data:{}}).data.host_type="IPv6",ws()},Tt=function(){return(t=t||{data:{}}).data.host_type="IPv4",ws()},St="25",Ct=_s("25",!1),wt=/^[0-5]/,Et=As([["0","5"]],!1,!1),_t="2",At=_s("2",!1),xt=/^[0-4]/,Rt=As([["0","4"]],!1,!1),It="1",Ot=_s("1",!1),Nt=/^[1-9]/,Dt=As([["1","9"]],!1,!1),Pt=function(e){return t=t||{data:{}},e=parseInt(e.join("")),t.data.port=e,e},kt="transport=",Ut=_s("transport=",!0),Ht="udp",jt=_s("udp",!0),Lt="tcp",qt=_s("tcp",!0),Mt="sctp",Ft=_s("sctp",!0),Bt="tls",Wt=_s("tls",!0),Gt=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=e.toLowerCase()},Vt="user=",Kt=_s("user=",!0),Yt="phone",zt=_s("phone",!0),$t="ip",Jt=_s("ip",!0),Xt=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=e.toLowerCase()},Qt="method=",Zt=_s("method=",!0),er=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=e},tr="ttl=",rr=_s("ttl=",!0),nr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.ttl=e},ir="maddr=",or=_s("maddr=",!0),sr=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=e},ar="lr",cr=_s("lr",!0),ur=function(){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},lr=function(e,r){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),r=null===r?void 0:r[1],t.data.uri_params[e.toLowerCase()]=r},hr=function(e,r){e=e.join("").toLowerCase(),r=r.join(""),(t=t||{data:{}}).data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[e]?t.data.uri_headers[e].push(r):t.data.uri_headers[e]=[r]},dr=function(){"Refer_To"===(t=t||{data:{}}).startRule&&(t.data.uri=new s.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},pr="//",fr=_s("//",!1),gr=function(){(t=t||{data:{}}).data.scheme=ws()},mr=_s("SIP",!0),vr=function(){(t=t||{data:{}}).data.sip_version=ws()},yr="INVITE",br=_s("INVITE",!1),Tr="ACK",Sr=_s("ACK",!1),Cr=(_s("VXACH",!1),"OPTIONS"),wr=_s("OPTIONS",!1),Er="BYE",_r=_s("BYE",!1),Ar="CANCEL",xr=_s("CANCEL",!1),Rr="REGISTER",Ir=_s("REGISTER",!1),Or="SUBSCRIBE",Nr=_s("SUBSCRIBE",!1),Dr="NOTIFY",Pr=_s("NOTIFY",!1),kr="REFER",Ur=_s("REFER",!1),Hr="PUBLISH",jr=_s("PUBLISH",!1),Lr=function(){return(t=t||{data:{}}).data.method=ws(),t.data.method},qr=function(e){(t=t||{data:{}}).data.status_code=parseInt(e.join(""))},Mr=function(){(t=t||{data:{}}).data.reason_phrase=ws()},Fr=function(){(t=t||{data:{}}).data=ws()},Br=function(){var e,r;for(r=(t=t||{data:{}}).data.multi_header.length,e=0;e<r;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},Wr=function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:vs,offset:Es().start.offset,parsed:e})},Gr=function(e){'"'===(e=ws().trim())[0]&&(e=e.substring(1,e.length-1)),(t=t||{data:{}}).data.displayName=e},Vr="q",Kr=_s("q",!0),Yr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.q=e},zr="expires",$r=_s("expires",!0),Jr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.expires=e},Xr=function(e){return parseInt(e.join(""))},Qr="0",Zr=_s("0",!1),en=function(){return parseFloat(ws())},tn=function(e,r){(t=t||{data:{}}).data.params||(t.data.params={}),r=null===r?void 0:r[1],t.data.params[e.toLowerCase()]=r},rn="render",nn=_s("render",!0),on="session",sn=_s("session",!0),an="icon",cn=_s("icon",!0),un="alert",ln=_s("alert",!0),hn=function(){"Content_Disposition"===(t=t||{data:{}}).startRule&&(t.data.type=ws().toLowerCase())},dn="handling",pn=_s("handling",!0),fn="optional",gn=_s("optional",!0),mn="required",vn=_s("required",!0),yn=function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},bn=function(){(t=t||{data:{}}).data=ws()},Tn="text",Sn=_s("text",!0),Cn="image",wn=_s("image",!0),En="audio",_n=_s("audio",!0),An="video",xn=_s("video",!0),Rn="application",In=_s("application",!0),On="message",Nn=_s("message",!0),Dn="multipart",Pn=_s("multipart",!0),kn="x-",Un=_s("x-",!0),Hn=function(e){(t=t||{data:{}}).data.value=parseInt(e.join(""))},jn=function(e){(t=t||{data:{}}).data.event=e.toLowerCase()},Ln=function(){var e=(t=t||{data:{}}).data.tag;t.data=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},qn="tag",Mn=_s("tag",!0),Fn=function(e){(t=t||{data:{}}).data.tag=e},Bn=function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},Wn=function(){(t=t||{data:{}}).data=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},Gn="digest",Vn=_s("Digest",!0),Kn="realm",Yn=_s("realm",!0),zn=function(e){(t=t||{data:{}}).data.realm=e},$n="domain",Jn=_s("domain",!0),Xn="nonce",Qn=_s("nonce",!0),Zn=function(e){(t=t||{data:{}}).data.nonce=e},ei="opaque",ti=_s("opaque",!0),ri=function(e){(t=t||{data:{}}).data.opaque=e},ni="stale",ii=_s("stale",!0),oi="true",si=_s("true",!0),ai=function(){(t=t||{data:{}}).data.stale=!0},ci="false",ui=_s("false",!0),li=function(){(t=t||{data:{}}).data.stale=!1},hi="algorithm",di=_s("algorithm",!0),pi="md5",fi=_s("MD5",!0),gi="md5-sess",mi=_s("MD5-sess",!0),vi=function(e){(t=t||{data:{}}).data.algorithm=e.toUpperCase()},yi="qop",bi=_s("qop",!0),Ti="auth-int",Si=_s("auth-int",!0),Ci="auth",wi=_s("auth",!0),Ei=function(e){(t=t||{data:{}}).data.qop||(t.data.qop=[]),t.data.qop.push(e.toLowerCase())},_i=function(){var e,r;for(r=(t=t||{data:{}}).data.multi_header.length,e=0;e<r;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},Ai=function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:vs,offset:Es().start.offset,parsed:e})},xi=function(){(t=t||{data:{}}).data=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},Ri=function(){(t=t||{data:{}}).data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},Ii=function(){(t=t||{data:{}}).data={call_id:t.data}},Oi="from-tag",Ni=_s("from-tag",!0),Di=function(e){(t=t||{data:{}}).data.replaces_from_tag=e},Pi="to-tag",ki=_s("to-tag",!0),Ui=function(e){(t=t||{data:{}}).data.replaces_to_tag=e},Hi="early-only",ji=_s("early-only",!0),Li=function(){(t=t||{data:{}}).data.early_only=!0},qi=function(e,t){return t},Mi=function(e,t){return function(e,t){return[e].concat(t)}(e,t)},Fi=function(e){"Require"===(t=t||{data:{}}).startRule&&(t.data=e||[])},Bi="active",Wi=_s("active",!0),Gi="pending",Vi=_s("pending",!0),Ki="terminated",Yi=_s("terminated",!0),zi=function(){(t=t||{data:{}}).data.state=ws()},$i="reason",Ji=_s("reason",!0),Xi=function(e){t=t||{data:{}},void 0!==e&&(t.data.reason=e)},Qi=function(e){t=t||{data:{}},void 0!==e&&(t.data.expires=e)},Zi="retry_after",eo=_s("retry_after",!0),to=function(e){t=t||{data:{}},void 0!==e&&(t.data.retry_after=e)},ro="deactivated",no=_s("deactivated",!0),io="probation",oo=_s("probation",!0),so="rejected",ao=_s("rejected",!0),co="timeout",uo=_s("timeout",!0),lo="giveup",ho=_s("giveup",!0),po="noresource",fo=_s("noresource",!0),go="invariant",mo=_s("invariant",!0),vo=function(e){"Supported"===(t=t||{data:{}}).startRule&&(t.data=e||[])},yo=function(){var e=(t=t||{data:{}}).data.tag;t.data=new o.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},bo="ttl",To=_s("ttl",!0),So=function(e){(t=t||{data:{}}).data.ttl=e},Co="maddr",wo=_s("maddr",!0),Eo=function(e){(t=t||{data:{}}).data.maddr=e},_o="received",Ao=_s("received",!0),xo=function(e){(t=t||{data:{}}).data.received=e},Ro="branch",Io=_s("branch",!0),Oo=function(e){(t=t||{data:{}}).data.branch=e},No="rport",Do=_s("rport",!0),Po=function(e){t=t||{data:{}},void 0!==e&&(t.data.rport=e.join(""))},ko=function(e){(t=t||{data:{}}).data.protocol=e},Uo=_s("UDP",!0),Ho=_s("TCP",!0),jo=_s("TLS",!0),Lo=_s("SCTP",!0),qo=function(e){(t=t||{data:{}}).data.transport=e},Mo=function(){(t=t||{data:{}}).data.host=ws()},Fo=function(e){(t=t||{data:{}}).data.port=parseInt(e.join(""))},Bo=function(e){return parseInt(e.join(""))},Wo=function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.deltaSeconds=e)},Go="refresher",Vo=_s("refresher",!1),Ko="uas",Yo=_s("uas",!1),zo="uac",$o=_s("uac",!1),Jo=function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.refresher=e)},Xo=function(e){"Min_SE"===(t=t||{data:{}}).startRule&&(t.data=e)},Qo="stuns",Zo=_s("stuns",!0),es="stun",ts=_s("stun",!0),rs=function(e){(t=t||{data:{}}).data.scheme=e},ns=function(e){(t=t||{data:{}}).data.host=e},is="?transport=",os=_s("?transport=",!1),ss="turns",as=_s("turns",!0),cs="turn",us=_s("turn",!0),ls=function(){(t=t||{data:{}}).data=ws()},hs="Referred-By",ds=_s("Referred-By",!1),ps="b",fs=_s("b",!1),gs="cid",ms=_s("cid",!1),vs=0,ys=0,bs=[{line:1,column:1}],Ts=0,Ss=[],Cs=0;if(void 0!==t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=i[t.startRule]}function ws(){return e.substring(ys,vs)}function Es(){return Rs(ys,vs)}function _s(e,t){return{type:"literal",text:e,ignoreCase:t}}function As(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function xs(t){var r,n=bs[t];if(n)return n;for(r=t-1;!bs[r];)r--;for(n={line:(n=bs[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return bs[t]=n,n}function Rs(e,t){var r=xs(e),n=xs(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Is(e){vs<Ts||(vs>Ts&&(Ts=vs,Ss=[]),Ss.push(e))}function Os(e,t,r){return new a(a.buildMessage(e,t),e,t,r)}function Ns(){var t;return e.substr(vs,2)===u?(t=u,vs+=2):(t=n,0===Cs&&Is(l)),t}function Ds(){var t;return h.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(d)),t}function Ps(){var t;return p.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(f)),t}function ks(){var t;return g.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(m)),t}function Us(){var e;return(e=Ls())===n&&(e=qs()),e}function Hs(){var t;return v.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(y)),t}function js(){var t;return b.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(T)),t}function Ls(){var t;return 32===e.charCodeAt(vs)?(t=S,vs++):(t=n,0===Cs&&Is(C)),t}function qs(){var t;return 9===e.charCodeAt(vs)?(t=w,vs++):(t=n,0===Cs&&Is(E)),t}function Ms(){var t;return _.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(A)),t}function Fs(){var t;return 59===e.charCodeAt(vs)?(t=x,vs++):(t=n,0===Cs&&Is(R)),t===n&&(47===e.charCodeAt(vs)?(t=I,vs++):(t=n,0===Cs&&Is(O)),t===n&&(63===e.charCodeAt(vs)?(t=N,vs++):(t=n,0===Cs&&Is(D)),t===n&&(58===e.charCodeAt(vs)?(t=P,vs++):(t=n,0===Cs&&Is(k)),t===n&&(64===e.charCodeAt(vs)?(t=U,vs++):(t=n,0===Cs&&Is(H)),t===n&&(38===e.charCodeAt(vs)?(t=j,vs++):(t=n,0===Cs&&Is(L)),t===n&&(61===e.charCodeAt(vs)?(t=q,vs++):(t=n,0===Cs&&Is(M)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)),t===n&&(44===e.charCodeAt(vs)?(t=V,vs++):(t=n,0===Cs&&Is(K))))))))))),t}function Bs(){var e;return(e=Ms())===n&&(e=Ws()),e}function Ws(){var t;return 45===e.charCodeAt(vs)?(t=Y,vs++):(t=n,0===Cs&&Is(z)),t===n&&(95===e.charCodeAt(vs)?(t=$,vs++):(t=n,0===Cs&&Is(J)),t===n&&(46===e.charCodeAt(vs)?(t=X,vs++):(t=n,0===Cs&&Is(Q)),t===n&&(33===e.charCodeAt(vs)?(t=Z,vs++):(t=n,0===Cs&&Is(ee)),t===n&&(126===e.charCodeAt(vs)?(t=te,vs++):(t=n,0===Cs&&Is(re)),t===n&&(42===e.charCodeAt(vs)?(t=ne,vs++):(t=n,0===Cs&&Is(ie)),t===n&&(39===e.charCodeAt(vs)?(t=oe,vs++):(t=n,0===Cs&&Is(se)),t===n&&(40===e.charCodeAt(vs)?(t=ae,vs++):(t=n,0===Cs&&Is(ce)),t===n&&(41===e.charCodeAt(vs)?(t=ue,vs++):(t=n,0===Cs&&Is(le)))))))))),t}function Gs(){var t,r,i,o,s;return t=vs,r=vs,37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i!==n&&(o=ks())!==n&&(s=ks())!==n?r=i=[i,o,s]:(vs=r,r=n),t=r!==n?e.substring(t,vs):r}function Vs(){var e,t,r,i;for(e=vs,t=vs,r=[],i=Us();i!==n;)r.push(i),i=Us();if(r!==n&&(i=Ns())!==n?t=r=[r,i]:(vs=t,t=n),t===n&&(t=null),t!==n){if(r=[],(i=Us())!==n)for(;i!==n;)r.push(i),i=Us();else r=n;r!==n?(ys=e,e=t=pe()):(vs=e,e=n)}else vs=e,e=n;return e}function Ks(){var e;return(e=Vs())===n&&(e=null),e}function Ys(){var t,r,i;for(t=vs,r=[],(i=Ls())===n&&(i=qs());i!==n;)r.push(i),(i=Ls())===n&&(i=qs());return r!==n?(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i!==n&&Ks()!==n?(ys=t,t=r=fe()):(vs=t,t=n)):(vs=t,t=n),t}function zs(){var t;return ge.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(me)),t}function $s(){var t;return ve.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(ye)),t}function Js(){var t,r,i;if(t=vs,r=[],(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(46===e.charCodeAt(vs)?(i=X,vs++):(i=n,0===Cs&&Is(Q)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re)))))))))))),i!==n)for(;i!==n;)r.push(i),(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(46===e.charCodeAt(vs)?(i=X,vs++):(i=n,0===Cs&&Is(Q)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re))))))))))));else r=n;return t=r!==n?e.substring(t,vs):r}function Xs(){var t,r,i;if(t=vs,r=[],(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re))))))))))),i!==n)for(;i!==n;)r.push(i),(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re)))))))))));else r=n;return t=r!==n?e.substring(t,vs):r}function Qs(){var t,r,i;if(t=vs,r=[],(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(46===e.charCodeAt(vs)?(i=X,vs++):(i=n,0===Cs&&Is(Q)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re)),i===n&&(40===e.charCodeAt(vs)?(i=ae,vs++):(i=n,0===Cs&&Is(ce)),i===n&&(41===e.charCodeAt(vs)?(i=ue,vs++):(i=n,0===Cs&&Is(le)),i===n&&(60===e.charCodeAt(vs)?(i=Se,vs++):(i=n,0===Cs&&Is(Ce)),i===n&&(62===e.charCodeAt(vs)?(i=we,vs++):(i=n,0===Cs&&Is(Ee)),i===n&&(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i===n&&(92===e.charCodeAt(vs)?(i=_e,vs++):(i=n,0===Cs&&Is(Ae)),i===n&&(i=js())===n&&(47===e.charCodeAt(vs)?(i=I,vs++):(i=n,0===Cs&&Is(O)),i===n&&(91===e.charCodeAt(vs)?(i=xe,vs++):(i=n,0===Cs&&Is(Re)),i===n&&(93===e.charCodeAt(vs)?(i=Ie,vs++):(i=n,0===Cs&&Is(Oe)),i===n&&(63===e.charCodeAt(vs)?(i=N,vs++):(i=n,0===Cs&&Is(D)),i===n&&(123===e.charCodeAt(vs)?(i=Ne,vs++):(i=n,0===Cs&&Is(De)),i===n&&(125===e.charCodeAt(vs)?(i=Pe,vs++):(i=n,0===Cs&&Is(ke)))))))))))))))))))))))),i!==n)for(;i!==n;)r.push(i),(i=Ms())===n&&(45===e.charCodeAt(vs)?(i=Y,vs++):(i=n,0===Cs&&Is(z)),i===n&&(46===e.charCodeAt(vs)?(i=X,vs++):(i=n,0===Cs&&Is(Q)),i===n&&(33===e.charCodeAt(vs)?(i=Z,vs++):(i=n,0===Cs&&Is(ee)),i===n&&(37===e.charCodeAt(vs)?(i=he,vs++):(i=n,0===Cs&&Is(de)),i===n&&(42===e.charCodeAt(vs)?(i=ne,vs++):(i=n,0===Cs&&Is(ie)),i===n&&(95===e.charCodeAt(vs)?(i=$,vs++):(i=n,0===Cs&&Is(J)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(96===e.charCodeAt(vs)?(i=be,vs++):(i=n,0===Cs&&Is(Te)),i===n&&(39===e.charCodeAt(vs)?(i=oe,vs++):(i=n,0===Cs&&Is(se)),i===n&&(126===e.charCodeAt(vs)?(i=te,vs++):(i=n,0===Cs&&Is(re)),i===n&&(40===e.charCodeAt(vs)?(i=ae,vs++):(i=n,0===Cs&&Is(ce)),i===n&&(41===e.charCodeAt(vs)?(i=ue,vs++):(i=n,0===Cs&&Is(le)),i===n&&(60===e.charCodeAt(vs)?(i=Se,vs++):(i=n,0===Cs&&Is(Ce)),i===n&&(62===e.charCodeAt(vs)?(i=we,vs++):(i=n,0===Cs&&Is(Ee)),i===n&&(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i===n&&(92===e.charCodeAt(vs)?(i=_e,vs++):(i=n,0===Cs&&Is(Ae)),i===n&&(i=js())===n&&(47===e.charCodeAt(vs)?(i=I,vs++):(i=n,0===Cs&&Is(O)),i===n&&(91===e.charCodeAt(vs)?(i=xe,vs++):(i=n,0===Cs&&Is(Re)),i===n&&(93===e.charCodeAt(vs)?(i=Ie,vs++):(i=n,0===Cs&&Is(Oe)),i===n&&(63===e.charCodeAt(vs)?(i=N,vs++):(i=n,0===Cs&&Is(D)),i===n&&(123===e.charCodeAt(vs)?(i=Ne,vs++):(i=n,0===Cs&&Is(De)),i===n&&(125===e.charCodeAt(vs)?(i=Pe,vs++):(i=n,0===Cs&&Is(ke))))))))))))))))))))))));else r=n;return t=r!==n?e.substring(t,vs):r}function Zs(){var t,r;return t=vs,Ks()!==n?(47===e.charCodeAt(vs)?(r=I,vs++):(r=n,0===Cs&&Is(O)),r!==n&&Ks()!==n?(ys=t,t=He()):(vs=t,t=n)):(vs=t,t=n),t}function ea(){var t,r;return t=vs,Ks()!==n?(61===e.charCodeAt(vs)?(r=q,vs++):(r=n,0===Cs&&Is(M)),r!==n&&Ks()!==n?(ys=t,t=je()):(vs=t,t=n)):(vs=t,t=n),t}function ta(){var t,r;return t=vs,62===e.charCodeAt(vs)?(r=we,vs++):(r=n,0===Cs&&Is(Ee)),r!==n&&Ks()!==n?(ys=t,t=r=Le()):(vs=t,t=n),t}function ra(){var t,r;return t=vs,Ks()!==n?(60===e.charCodeAt(vs)?(r=Se,vs++):(r=n,0===Cs&&Is(Ce)),r!==n?(ys=t,t=qe()):(vs=t,t=n)):(vs=t,t=n),t}function na(){var t,r;return t=vs,Ks()!==n?(44===e.charCodeAt(vs)?(r=V,vs++):(r=n,0===Cs&&Is(K)),r!==n&&Ks()!==n?(ys=t,t=Me()):(vs=t,t=n)):(vs=t,t=n),t}function ia(){var t,r;return t=vs,Ks()!==n?(59===e.charCodeAt(vs)?(r=x,vs++):(r=n,0===Cs&&Is(R)),r!==n&&Ks()!==n?(ys=t,t=Fe()):(vs=t,t=n)):(vs=t,t=n),t}function oa(){var e;return e=vs,Ks()!==n&&js()!==n?(ys=e,e=We()):(vs=e,e=n),e}function sa(){var e;return e=vs,js()!==n&&Ks()!==n?(ys=e,e=We()):(vs=e,e=n),e}function aa(){var t,r,i,o,s,a;if(t=vs,r=vs,(i=Ks())!==n)if((o=js())!==n){for(s=[],(a=ua())===n&&(a=la());a!==n;)s.push(a),(a=ua())===n&&(a=la());s!==n&&(a=js())!==n?r=i=[i,o,s,a]:(vs=r,r=n)}else vs=r,r=n;else vs=r,r=n;return t=r!==n?e.substring(t,vs):r}function ca(){var t,r,i,o;if(t=vs,Ks()!==n)if(js()!==n){for(r=vs,i=[],(o=ua())===n&&(o=la());o!==n;)i.push(o),(o=ua())===n&&(o=la());(r=i!==n?e.substring(r,vs):i)!==n&&(i=js())!==n?(ys=t,t=Ke(r)):(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;return t}function ua(){var t;return(t=Vs())===n&&(33===e.charCodeAt(vs)?(t=Z,vs++):(t=n,0===Cs&&Is(ee)),t===n&&(Ye.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(ze)),t===n&&(Ge.test(e.charAt(vs))?(t=e.charAt(vs),vs++):(t=n,0===Cs&&Is(Ve)),t===n&&(t=zs())))),t}function la(){var t,r,i;return t=vs,92===e.charCodeAt(vs)?(r=_e,vs++):(r=n,0===Cs&&Is(Ae)),r!==n?($e.test(e.charAt(vs))?(i=e.charAt(vs),vs++):(i=n,0===Cs&&Is(Je)),i===n&&(Xe.test(e.charAt(vs))?(i=e.charAt(vs),vs++):(i=n,0===Cs&&Is(Qe)),i===n&&(Ze.test(e.charAt(vs))?(i=e.charAt(vs),vs++):(i=n,0===Cs&&Is(et)))),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t}function ha(){var t,r,i;return t=vs,pa()!==n?(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r!==n?((i=fa())===n&&(i=null),i!==n&&ma()!==n?(ys=t,t=tt()):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}function da(){var t,r,i,o;return t=vs,pa()!==n?(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r!==n?((i=fa())===n&&(i=null),i!==n&&ma()!==n&&function(){var t,r,i,o;for(t=[],r=vs,59===e.charCodeAt(vs)?(i=x,vs++):(i=n,0===Cs&&Is(R)),i!==n&&(o=xa())!==n?r=i=[i,o]:(vs=r,r=n);r!==n;)t.push(r),r=vs,59===e.charCodeAt(vs)?(i=x,vs++):(i=n,0===Cs&&Is(R)),i!==n&&(o=xa())!==n?r=i=[i,o]:(vs=r,r=n);return t}()!==n?((o=function(){var t,r,i,o,s,a,c;if(t=vs,63===e.charCodeAt(vs)?(r=N,vs++):(r=n,0===Cs&&Is(D)),r!==n)if((i=Ia())!==n){for(o=[],s=vs,38===e.charCodeAt(vs)?(a=j,vs++):(a=n,0===Cs&&Is(L)),a!==n&&(c=Ia())!==n?s=a=[a,c]:(vs=s,s=n);s!==n;)o.push(s),s=vs,38===e.charCodeAt(vs)?(a=j,vs++):(a=n,0===Cs&&Is(L)),a!==n&&(c=Ia())!==n?s=a=[a,c]:(vs=s,s=n);o!==n?t=r=[r,i,o]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;return t}())===n&&(o=null),o!==n?(ys=t,t=rt()):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}function pa(){var t,r;return t=vs,e.substr(vs,4).toLowerCase()===nt?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(it)),r===n&&(e.substr(vs,3).toLowerCase()===ot?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(st))),r!==n&&(ys=t,r=at(r)),t=r}function fa(){var t,r,i,o;return t=vs,function(){var e,t;if(e=[],(t=Bs())===n&&(t=Gs())===n&&(t=ga()),t!==n)for(;t!==n;)e.push(t),(t=Bs())===n&&(t=Gs())===n&&(t=ga());else e=n;return e}()!==n?(r=vs,58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i!==n&&(o=function(){var t,r,i;for(t=vs,r=[],(i=Bs())===n&&(i=Gs())===n&&(38===e.charCodeAt(vs)?(i=j,vs++):(i=n,0===Cs&&Is(L)),i===n&&(61===e.charCodeAt(vs)?(i=q,vs++):(i=n,0===Cs&&Is(M)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(36===e.charCodeAt(vs)?(i=W,vs++):(i=n,0===Cs&&Is(G)),i===n&&(44===e.charCodeAt(vs)?(i=V,vs++):(i=n,0===Cs&&Is(K)))))));i!==n;)r.push(i),(i=Bs())===n&&(i=Gs())===n&&(38===e.charCodeAt(vs)?(i=j,vs++):(i=n,0===Cs&&Is(L)),i===n&&(61===e.charCodeAt(vs)?(i=q,vs++):(i=n,0===Cs&&Is(M)),i===n&&(43===e.charCodeAt(vs)?(i=F,vs++):(i=n,0===Cs&&Is(B)),i===n&&(36===e.charCodeAt(vs)?(i=W,vs++):(i=n,0===Cs&&Is(G)),i===n&&(44===e.charCodeAt(vs)?(i=V,vs++):(i=n,0===Cs&&Is(K)))))));return r!==n&&(ys=t,r=ut()),t=r}())!==n?r=i=[i,o]:(vs=r,r=n),r===n&&(r=null),r!==n?(64===e.charCodeAt(vs)?(i=U,vs++):(i=n,0===Cs&&Is(H)),i!==n?(ys=t,t=ct()):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}function ga(){var t;return 38===e.charCodeAt(vs)?(t=j,vs++):(t=n,0===Cs&&Is(L)),t===n&&(61===e.charCodeAt(vs)?(t=q,vs++):(t=n,0===Cs&&Is(M)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)),t===n&&(44===e.charCodeAt(vs)?(t=V,vs++):(t=n,0===Cs&&Is(K)),t===n&&(59===e.charCodeAt(vs)?(t=x,vs++):(t=n,0===Cs&&Is(R)),t===n&&(63===e.charCodeAt(vs)?(t=N,vs++):(t=n,0===Cs&&Is(D)),t===n&&(47===e.charCodeAt(vs)?(t=I,vs++):(t=n,0===Cs&&Is(O))))))))),t}function ma(){var t,r,i,o,s;return t=vs,(r=va())!==n?(i=vs,58===e.charCodeAt(vs)?(o=P,vs++):(o=n,0===Cs&&Is(k)),o!==n&&(s=Aa())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t}function va(){var e,t;return e=vs,(t=ya())===n&&(t=Ea())===n&&(t=Ta()),t!==n&&(ys=e,t=lt()),e=t}function ya(){var t,r,i,o,s;for(t=vs,r=[],i=vs,(o=ba())!==n?(46===e.charCodeAt(vs)?(s=X,vs++):(s=n,0===Cs&&Is(Q)),s!==n?i=o=[o,s]:(vs=i,i=n)):(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ba())!==n?(46===e.charCodeAt(vs)?(s=X,vs++):(s=n,0===Cs&&Is(Q)),s!==n?i=o=[o,s]:(vs=i,i=n)):(vs=i,i=n);return r!==n&&(i=function(){var t,r,i,o;if(t=vs,p.test(e.charAt(vs))?(r=e.charAt(vs),vs++):(r=n,0===Cs&&Is(f)),r!==n){for(i=[],ft.test(e.charAt(vs))?(o=e.charAt(vs),vs++):(o=n,0===Cs&&Is(gt));o!==n;)i.push(o),ft.test(e.charAt(vs))?(o=e.charAt(vs),vs++):(o=n,0===Cs&&Is(gt));i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t}())!==n?(46===e.charCodeAt(vs)?(o=X,vs++):(o=n,0===Cs&&Is(Q)),o===n&&(o=null),o!==n?(ys=t,t=r=ht()):(vs=t,t=n)):(vs=t,t=n),t}function ba(){var t,r;if(t=[],dt.test(e.charAt(vs))?(r=e.charAt(vs),vs++):(r=n,0===Cs&&Is(pt)),r!==n)for(;r!==n;)t.push(r),dt.test(e.charAt(vs))?(r=e.charAt(vs),vs++):(r=n,0===Cs&&Is(pt));else t=n;return t}function Ta(){var t,r,i;return t=vs,91===e.charCodeAt(vs)?(r=xe,vs++):(r=n,0===Cs&&Is(Re)),r!==n&&Sa()!==n?(93===e.charCodeAt(vs)?(i=Ie,vs++):(i=n,0===Cs&&Is(Oe)),i!==n?(ys=t,t=r=mt()):(vs=t,t=n)):(vs=t,t=n),t}function Sa(){var t,r,i,o,s,a,c,u,l,h,d,p,f,g,m;return t=vs,r=vs,(i=Ca())!==n?(58===e.charCodeAt(vs)?(o=P,vs++):(o=n,0===Cs&&Is(k)),o!==n&&(s=Ca())!==n?(58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?(58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?(58===e.charCodeAt(vs)?(h=P,vs++):(h=n,0===Cs&&Is(k)),h!==n&&(d=Ca())!==n?(58===e.charCodeAt(vs)?(p=P,vs++):(p=n,0===Cs&&Is(k)),p!==n&&(f=Ca())!==n?(58===e.charCodeAt(vs)?(g=P,vs++):(g=n,0===Cs&&Is(k)),g!==n&&(m=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d,p,f,g,m]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?(58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?(58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?(58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=Ca())!==n?(58===e.charCodeAt(vs)?(d=P,vs++):(d=n,0===Cs&&Is(k)),d!==n&&(p=Ca())!==n?(58===e.charCodeAt(vs)?(f=P,vs++):(f=n,0===Cs&&Is(k)),f!==n&&(g=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d,p,f,g]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?(58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?(58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?(58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=Ca())!==n?(58===e.charCodeAt(vs)?(d=P,vs++):(d=n,0===Cs&&Is(k)),d!==n&&(p=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d,p]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?(58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?(58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?(58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=wa())!==n?r=i=[i,o,s,a,c,u,l,h]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?(58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?(58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=wa())!==n?r=i=[i,o,s,a,c,u]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?(58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=wa())!==n?r=i=[i,o,s,a]:(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=wa())!==n?r=i=[i,o]:(vs=r,r=n),r===n&&(r=vs,e.substr(vs,2)===vt?(i=vt,vs+=2):(i=n,0===Cs&&Is(yt)),i!==n&&(o=Ca())!==n?r=i=[i,o]:(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(e.substr(vs,2)===vt?(o=vt,vs+=2):(o=n,0===Cs&&Is(yt)),o!==n&&(s=Ca())!==n?(58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?(58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?(58===e.charCodeAt(vs)?(h=P,vs++):(h=n,0===Cs&&Is(k)),h!==n&&(d=Ca())!==n?(58===e.charCodeAt(vs)?(p=P,vs++):(p=n,0===Cs&&Is(k)),p!==n&&(f=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d,p,f]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(e.substr(vs,2)===vt?(s=vt,vs+=2):(s=n,0===Cs&&Is(yt)),s!==n&&(a=Ca())!==n?(58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?(58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=Ca())!==n?(58===e.charCodeAt(vs)?(d=P,vs++):(d=n,0===Cs&&Is(k)),d!==n&&(p=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d,p]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(s=vs,58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?(e.substr(vs,2)===vt?(a=vt,vs+=2):(a=n,0===Cs&&Is(yt)),a!==n&&(c=Ca())!==n?(58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?(58===e.charCodeAt(vs)?(h=P,vs++):(h=n,0===Cs&&Is(k)),h!==n&&(d=wa())!==n?r=i=[i,o,s,a,c,u,l,h,d]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(s=vs,58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?(a=vs,58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?a=c=[c,u]:(vs=a,a=n),a===n&&(a=null),a!==n?(e.substr(vs,2)===vt?(c=vt,vs+=2):(c=n,0===Cs&&Is(yt)),c!==n&&(u=Ca())!==n?(58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=wa())!==n?r=i=[i,o,s,a,c,u,l,h]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(s=vs,58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?(a=vs,58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?a=c=[c,u]:(vs=a,a=n),a===n&&(a=null),a!==n?(c=vs,58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?c=u=[u,l]:(vs=c,c=n),c===n&&(c=null),c!==n?(e.substr(vs,2)===vt?(u=vt,vs+=2):(u=n,0===Cs&&Is(yt)),u!==n&&(l=wa())!==n?r=i=[i,o,s,a,c,u,l]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(s=vs,58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?(a=vs,58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?a=c=[c,u]:(vs=a,a=n),a===n&&(a=null),a!==n?(c=vs,58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?c=u=[u,l]:(vs=c,c=n),c===n&&(c=null),c!==n?(u=vs,58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=Ca())!==n?u=l=[l,h]:(vs=u,u=n),u===n&&(u=null),u!==n?(e.substr(vs,2)===vt?(l=vt,vs+=2):(l=n,0===Cs&&Is(yt)),l!==n&&(h=Ca())!==n?r=i=[i,o,s,a,c,u,l,h]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n),r===n&&(r=vs,(i=Ca())!==n?(o=vs,58===e.charCodeAt(vs)?(s=P,vs++):(s=n,0===Cs&&Is(k)),s!==n&&(a=Ca())!==n?o=s=[s,a]:(vs=o,o=n),o===n&&(o=null),o!==n?(s=vs,58===e.charCodeAt(vs)?(a=P,vs++):(a=n,0===Cs&&Is(k)),a!==n&&(c=Ca())!==n?s=a=[a,c]:(vs=s,s=n),s===n&&(s=null),s!==n?(a=vs,58===e.charCodeAt(vs)?(c=P,vs++):(c=n,0===Cs&&Is(k)),c!==n&&(u=Ca())!==n?a=c=[c,u]:(vs=a,a=n),a===n&&(a=null),a!==n?(c=vs,58===e.charCodeAt(vs)?(u=P,vs++):(u=n,0===Cs&&Is(k)),u!==n&&(l=Ca())!==n?c=u=[u,l]:(vs=c,c=n),c===n&&(c=null),c!==n?(u=vs,58===e.charCodeAt(vs)?(l=P,vs++):(l=n,0===Cs&&Is(k)),l!==n&&(h=Ca())!==n?u=l=[l,h]:(vs=u,u=n),u===n&&(u=null),u!==n?(l=vs,58===e.charCodeAt(vs)?(h=P,vs++):(h=n,0===Cs&&Is(k)),h!==n&&(d=Ca())!==n?l=h=[h,d]:(vs=l,l=n),l===n&&(l=null),l!==n?(e.substr(vs,2)===vt?(h=vt,vs+=2):(h=n,0===Cs&&Is(yt)),h!==n?r=i=[i,o,s,a,c,u,l,h]:(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n)):(vs=r,r=n))))))))))))))),r!==n&&(ys=t,r=bt()),t=r}function Ca(){var e,t,r,i,o;return e=vs,(t=ks())!==n?((r=ks())===n&&(r=null),r!==n?((i=ks())===n&&(i=null),i!==n?((o=ks())===n&&(o=null),o!==n?e=t=[t,r,i,o]:(vs=e,e=n)):(vs=e,e=n)):(vs=e,e=n)):(vs=e,e=n),e}function wa(){var t,r,i,o;return t=vs,(r=Ca())!==n?(58===e.charCodeAt(vs)?(i=P,vs++):(i=n,0===Cs&&Is(k)),i!==n&&(o=Ca())!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t===n&&(t=Ea()),t}function Ea(){var t,r,i,o;return t=vs,_a()!==n?(46===e.charCodeAt(vs)?(r=X,vs++):(r=n,0===Cs&&Is(Q)),r!==n&&_a()!==n?(46===e.charCodeAt(vs)?(i=X,vs++):(i=n,0===Cs&&Is(Q)),i!==n&&_a()!==n?(46===e.charCodeAt(vs)?(o=X,vs++):(o=n,0===Cs&&Is(Q)),o!==n&&_a()!==n?(ys=t,t=Tt()):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}function _a(){var t,r,i,o;return t=vs,e.substr(vs,2)===St?(r=St,vs+=2):(r=n,0===Cs&&Is(Ct)),r!==n?(wt.test(e.charAt(vs))?(i=e.charAt(vs),vs++):(i=n,0===Cs&&Is(Et)),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t===n&&(t=vs,50===e.charCodeAt(vs)?(r=_t,vs++):(r=n,0===Cs&&Is(At)),r!==n?(xt.test(e.charAt(vs))?(i=e.charAt(vs),vs++):(i=n,0===Cs&&Is(Rt)),i!==n&&(o=Ds())!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t===n&&(t=vs,49===e.charCodeAt(vs)?(r=It,vs++):(r=n,0===Cs&&Is(Ot)),r!==n&&(i=Ds())!==n&&(o=Ds())!==n?t=r=[r,i,o]:(vs=t,t=n),t===n&&(t=vs,Nt.test(e.charAt(vs))?(r=e.charAt(vs),vs++):(r=n,0===Cs&&Is(Dt)),r!==n&&(i=Ds())!==n?t=r=[r,i]:(vs=t,t=n),t===n&&(t=Ds())))),t}function Aa(){var e,t,r,i,o,s,a;return e=vs,t=vs,(r=Ds())===n&&(r=null),r!==n?((i=Ds())===n&&(i=null),i!==n?((o=Ds())===n&&(o=null),o!==n?((s=Ds())===n&&(s=null),s!==n?((a=Ds())===n&&(a=null),a!==n?t=r=[r,i,o,s,a]:(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t!==n&&(ys=e,t=Pt(t)),e=t}function xa(){var t;return(t=function(){var t,r,i;return t=vs,e.substr(vs,10).toLowerCase()===kt?(r=e.substr(vs,10),vs+=10):(r=n,0===Cs&&Is(Ut)),r!==n?(e.substr(vs,3).toLowerCase()===Ht?(i=e.substr(vs,3),vs+=3):(i=n,0===Cs&&Is(jt)),i===n&&(e.substr(vs,3).toLowerCase()===Lt?(i=e.substr(vs,3),vs+=3):(i=n,0===Cs&&Is(qt)),i===n&&(e.substr(vs,4).toLowerCase()===Mt?(i=e.substr(vs,4),vs+=4):(i=n,0===Cs&&Is(Ft)),i===n&&(e.substr(vs,3).toLowerCase()===Bt?(i=e.substr(vs,3),vs+=3):(i=n,0===Cs&&Is(Wt)),i===n&&(i=Js())))),i!==n?(ys=t,r=Gt(i),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,5).toLowerCase()===Vt?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(Kt)),r!==n?(e.substr(vs,5).toLowerCase()===Yt?(i=e.substr(vs,5),vs+=5):(i=n,0===Cs&&Is(zt)),i===n&&(e.substr(vs,2).toLowerCase()===$t?(i=e.substr(vs,2),vs+=2):(i=n,0===Cs&&Is(Jt)),i===n&&(i=Js())),i!==n?(ys=t,r=Xt(i),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,7).toLowerCase()===Qt?(r=e.substr(vs,7),vs+=7):(r=n,0===Cs&&Is(Zt)),r!==n&&(i=Ma())!==n?(ys=t,r=er(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,4).toLowerCase()===tr?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(rr)),r!==n&&(i=pc())!==n?(ys=t,r=nr(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,6).toLowerCase()===ir?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(or)),r!==n&&(i=va())!==n?(ys=t,r=sr(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o,s;return t=vs,e.substr(vs,2).toLowerCase()===ar?(r=e.substr(vs,2),vs+=2):(r=n,0===Cs&&Is(cr)),r!==n?(i=vs,61===e.charCodeAt(vs)?(o=q,vs++):(o=n,0===Cs&&Is(M)),o!==n&&(s=Js())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?(ys=t,r=ur(),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o,s;return t=vs,(r=function(){var t,r,i;if(t=vs,r=[],(i=Ra())!==n)for(;i!==n;)r.push(i),i=Ra();else r=n;return t=r!==n?e.substring(t,vs):r}())!==n?(i=vs,61===e.charCodeAt(vs)?(o=q,vs++):(o=n,0===Cs&&Is(M)),o!==n&&(s=function(){var t,r,i;if(t=vs,r=[],(i=Ra())!==n)for(;i!==n;)r.push(i),i=Ra();else r=n;return t=r!==n?e.substring(t,vs):r}())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?(ys=t,r=lr(r,i),t=r):(vs=t,t=n)):(vs=t,t=n),t}()),t}function Ra(){var t;return(t=function(){var t;return 91===e.charCodeAt(vs)?(t=xe,vs++):(t=n,0===Cs&&Is(Re)),t===n&&(93===e.charCodeAt(vs)?(t=Ie,vs++):(t=n,0===Cs&&Is(Oe)),t===n&&(47===e.charCodeAt(vs)?(t=I,vs++):(t=n,0===Cs&&Is(O)),t===n&&(58===e.charCodeAt(vs)?(t=P,vs++):(t=n,0===Cs&&Is(k)),t===n&&(38===e.charCodeAt(vs)?(t=j,vs++):(t=n,0===Cs&&Is(L)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)))))))),t}())===n&&(t=Bs())===n&&(t=Gs()),t}function Ia(){var t,r,i,o;return t=vs,(r=function(){var e,t;if(e=[],(t=Oa())===n&&(t=Bs())===n&&(t=Gs()),t!==n)for(;t!==n;)e.push(t),(t=Oa())===n&&(t=Bs())===n&&(t=Gs());else e=n;return e}())!==n?(61===e.charCodeAt(vs)?(i=q,vs++):(i=n,0===Cs&&Is(M)),i!==n&&(o=function(){var e,t;for(e=[],(t=Oa())===n&&(t=Bs())===n&&(t=Gs());t!==n;)e.push(t),(t=Oa())===n&&(t=Bs())===n&&(t=Gs());return e}())!==n?(ys=t,t=r=hr(r,o)):(vs=t,t=n)):(vs=t,t=n),t}function Oa(){var t;return 91===e.charCodeAt(vs)?(t=xe,vs++):(t=n,0===Cs&&Is(Re)),t===n&&(93===e.charCodeAt(vs)?(t=Ie,vs++):(t=n,0===Cs&&Is(Oe)),t===n&&(47===e.charCodeAt(vs)?(t=I,vs++):(t=n,0===Cs&&Is(O)),t===n&&(63===e.charCodeAt(vs)?(t=N,vs++):(t=n,0===Cs&&Is(D)),t===n&&(58===e.charCodeAt(vs)?(t=P,vs++):(t=n,0===Cs&&Is(k)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)))))))),t}function Na(){var e;return(e=function(){var e,t,r,i,o,s;return e=vs,(t=qa())!==n&&(r=Ls())!==n&&(i=function(){var e,t;return e=vs,(t=function(){var e,t,r,i;return e=vs,(t=Ds())!==n&&(r=Ds())!==n&&(i=Ds())!==n?e=t=[t,r,i]:(vs=e,e=n),e}())!==n&&(ys=e,t=qr(t)),e=t}())!==n&&(o=Ls())!==n&&(s=function(){var e,t,r;for(e=vs,t=[],(r=Fs())===n&&(r=Bs())===n&&(r=Gs())===n&&(r=zs())===n&&(r=$s())===n&&(r=Ls())===n&&(r=qs());r!==n;)t.push(r),(r=Fs())===n&&(r=Bs())===n&&(r=Gs())===n&&(r=zs())===n&&(r=$s())===n&&(r=Ls())===n&&(r=qs());return t!==n&&(ys=e,t=Mr()),e=t}())!==n?e=t=[t,r,i,o,s]:(vs=e,e=n),e}())===n&&(e=function(){var e,t,r,i,o,s;return e=vs,(t=Ma())!==n&&(r=Ls())!==n&&(i=function(){var e;return(e=da())===n&&(e=Da()),e}())!==n&&(o=Ls())!==n&&(s=qa())!==n?e=t=[t,r,i,o,s]:(vs=e,e=n),e}()),e}function Da(){var t,r,i;return t=vs,function(){var t,r,i,o,s;if(t=vs,r=vs,(i=Ps())!==n){for(o=[],(s=Ps())===n&&(s=Ds())===n&&(43===e.charCodeAt(vs)?(s=F,vs++):(s=n,0===Cs&&Is(B)),s===n&&(45===e.charCodeAt(vs)?(s=Y,vs++):(s=n,0===Cs&&Is(z)),s===n&&(46===e.charCodeAt(vs)?(s=X,vs++):(s=n,0===Cs&&Is(Q)))));s!==n;)o.push(s),(s=Ps())===n&&(s=Ds())===n&&(43===e.charCodeAt(vs)?(s=F,vs++):(s=n,0===Cs&&Is(B)),s===n&&(45===e.charCodeAt(vs)?(s=Y,vs++):(s=n,0===Cs&&Is(z)),s===n&&(46===e.charCodeAt(vs)?(s=X,vs++):(s=n,0===Cs&&Is(Q)))));o!==n?r=i=[i,o]:(vs=r,r=n)}else vs=r,r=n;return r!==n&&(ys=t,r=gr()),t=r}()!==n?(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r!==n?((i=function(){var t,r,i,o,s;return t=vs,(r=function(){var t,r,i,o;return t=vs,e.substr(vs,2)===pr?(r=pr,vs+=2):(r=n,0===Cs&&Is(fr)),r!==n&&(i=function(){var t;return(t=function(){var t,r,i,o;return t=vs,r=vs,(i=fa())!==n?(64===e.charCodeAt(vs)?(o=U,vs++):(o=n,0===Cs&&Is(H)),o!==n?r=i=[i,o]:(vs=r,r=n)):(vs=r,r=n),r===n&&(r=null),r!==n&&(i=ma())!==n?t=r=[r,i]:(vs=t,t=n),t===n&&(t=null),t}())===n&&(t=La()),t}())!==n?((o=Pa())===n&&(o=null),o!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t}())===n&&(r=Pa()),r!==n?(i=vs,63===e.charCodeAt(vs)?(o=N,vs++):(o=n,0===Cs&&Is(D)),o!==n&&(s=function(){var e,t;for(e=[],t=ka();t!==n;)e.push(t),t=ka();return e}())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t}())===n&&(i=function(){var t,r,i,o;if(t=vs,(r=function(){var t;return(t=Bs())===n&&(t=Gs())===n&&(59===e.charCodeAt(vs)?(t=x,vs++):(t=n,0===Cs&&Is(R)),t===n&&(63===e.charCodeAt(vs)?(t=N,vs++):(t=n,0===Cs&&Is(D)),t===n&&(58===e.charCodeAt(vs)?(t=P,vs++):(t=n,0===Cs&&Is(k)),t===n&&(64===e.charCodeAt(vs)?(t=U,vs++):(t=n,0===Cs&&Is(H)),t===n&&(38===e.charCodeAt(vs)?(t=j,vs++):(t=n,0===Cs&&Is(L)),t===n&&(61===e.charCodeAt(vs)?(t=q,vs++):(t=n,0===Cs&&Is(M)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)),t===n&&(44===e.charCodeAt(vs)?(t=V,vs++):(t=n,0===Cs&&Is(K))))))))))),t}())!==n){for(i=[],o=ka();o!==n;)i.push(o),o=ka();i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t}()),i!==n?(ys=t,t=dr()):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}function Pa(){var t,r,i;return t=vs,47===e.charCodeAt(vs)?(r=I,vs++):(r=n,0===Cs&&Is(O)),r!==n&&(i=function(){var t,r,i,o,s,a;if(t=vs,(r=Ua())!==n){for(i=[],o=vs,47===e.charCodeAt(vs)?(s=I,vs++):(s=n,0===Cs&&Is(O)),s!==n&&(a=Ua())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,47===e.charCodeAt(vs)?(s=I,vs++):(s=n,0===Cs&&Is(O)),s!==n&&(a=Ua())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t}())!==n?t=r=[r,i]:(vs=t,t=n),t}function ka(){var e;return(e=Fs())===n&&(e=Bs())===n&&(e=Gs()),e}function Ua(){var t,r,i,o,s,a;for(t=vs,r=[],i=ja();i!==n;)r.push(i),i=ja();if(r!==n){for(i=[],o=vs,59===e.charCodeAt(vs)?(s=x,vs++):(s=n,0===Cs&&Is(R)),s!==n&&(a=Ha())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,59===e.charCodeAt(vs)?(s=x,vs++):(s=n,0===Cs&&Is(R)),s!==n&&(a=Ha())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t}function Ha(){var e,t;for(e=[],t=ja();t!==n;)e.push(t),t=ja();return e}function ja(){var t;return(t=Bs())===n&&(t=Gs())===n&&(58===e.charCodeAt(vs)?(t=P,vs++):(t=n,0===Cs&&Is(k)),t===n&&(64===e.charCodeAt(vs)?(t=U,vs++):(t=n,0===Cs&&Is(H)),t===n&&(38===e.charCodeAt(vs)?(t=j,vs++):(t=n,0===Cs&&Is(L)),t===n&&(61===e.charCodeAt(vs)?(t=q,vs++):(t=n,0===Cs&&Is(M)),t===n&&(43===e.charCodeAt(vs)?(t=F,vs++):(t=n,0===Cs&&Is(B)),t===n&&(36===e.charCodeAt(vs)?(t=W,vs++):(t=n,0===Cs&&Is(G)),t===n&&(44===e.charCodeAt(vs)?(t=V,vs++):(t=n,0===Cs&&Is(K))))))))),t}function La(){var t,r;if(t=[],(r=Bs())===n&&(r=Gs())===n&&(36===e.charCodeAt(vs)?(r=W,vs++):(r=n,0===Cs&&Is(G)),r===n&&(44===e.charCodeAt(vs)?(r=V,vs++):(r=n,0===Cs&&Is(K)),r===n&&(59===e.charCodeAt(vs)?(r=x,vs++):(r=n,0===Cs&&Is(R)),r===n&&(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r===n&&(64===e.charCodeAt(vs)?(r=U,vs++):(r=n,0===Cs&&Is(H)),r===n&&(38===e.charCodeAt(vs)?(r=j,vs++):(r=n,0===Cs&&Is(L)),r===n&&(61===e.charCodeAt(vs)?(r=q,vs++):(r=n,0===Cs&&Is(M)),r===n&&(43===e.charCodeAt(vs)?(r=F,vs++):(r=n,0===Cs&&Is(B)))))))))),r!==n)for(;r!==n;)t.push(r),(r=Bs())===n&&(r=Gs())===n&&(36===e.charCodeAt(vs)?(r=W,vs++):(r=n,0===Cs&&Is(G)),r===n&&(44===e.charCodeAt(vs)?(r=V,vs++):(r=n,0===Cs&&Is(K)),r===n&&(59===e.charCodeAt(vs)?(r=x,vs++):(r=n,0===Cs&&Is(R)),r===n&&(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r===n&&(64===e.charCodeAt(vs)?(r=U,vs++):(r=n,0===Cs&&Is(H)),r===n&&(38===e.charCodeAt(vs)?(r=j,vs++):(r=n,0===Cs&&Is(L)),r===n&&(61===e.charCodeAt(vs)?(r=q,vs++):(r=n,0===Cs&&Is(M)),r===n&&(43===e.charCodeAt(vs)?(r=F,vs++):(r=n,0===Cs&&Is(B))))))))));else t=n;return t}function qa(){var t,r,i,o,s,a,c;if(t=vs,e.substr(vs,3).toLowerCase()===ot?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(mr)),r!==n)if(47===e.charCodeAt(vs)?(i=I,vs++):(i=n,0===Cs&&Is(O)),i!==n){if(o=[],(s=Ds())!==n)for(;s!==n;)o.push(s),s=Ds();else o=n;if(o!==n)if(46===e.charCodeAt(vs)?(s=X,vs++):(s=n,0===Cs&&Is(Q)),s!==n){if(a=[],(c=Ds())!==n)for(;c!==n;)a.push(c),c=Ds();else a=n;a!==n?(ys=t,t=r=vr()):(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n}else vs=t,t=n;else vs=t,t=n;return t}function Ma(){var t,r;return t=vs,(r=function(){var t;return e.substr(vs,6)===yr?(t=yr,vs+=6):(t=n,0===Cs&&Is(br)),t}())===n&&(r=function(){var t;return e.substr(vs,3)===Tr?(t=Tr,vs+=3):(t=n,0===Cs&&Is(Sr)),t}())===n&&(r=function(){var t;return e.substr(vs,7)===Cr?(t=Cr,vs+=7):(t=n,0===Cs&&Is(wr)),t}())===n&&(r=function(){var t;return e.substr(vs,3)===Er?(t=Er,vs+=3):(t=n,0===Cs&&Is(_r)),t}())===n&&(r=function(){var t;return e.substr(vs,6)===Ar?(t=Ar,vs+=6):(t=n,0===Cs&&Is(xr)),t}())===n&&(r=function(){var t;return e.substr(vs,8)===Rr?(t=Rr,vs+=8):(t=n,0===Cs&&Is(Ir)),t}())===n&&(r=function(){var t;return e.substr(vs,9)===Or?(t=Or,vs+=9):(t=n,0===Cs&&Is(Nr)),t}())===n&&(r=function(){var t;return e.substr(vs,7)===Hr?(t=Hr,vs+=7):(t=n,0===Cs&&Is(jr)),t}())===n&&(r=function(){var t;return e.substr(vs,6)===Dr?(t=Dr,vs+=6):(t=n,0===Cs&&Is(Pr)),t}())===n&&(r=function(){var t;return e.substr(vs,5)===kr?(t=kr,vs+=5):(t=n,0===Cs&&Is(Ur)),t}())===n&&(r=Js()),r!==n&&(ys=t,r=Lr()),t=r}function Fa(){var t,r,i,o;return t=vs,Qs()!==n?(r=vs,64===e.charCodeAt(vs)?(i=U,vs++):(i=n,0===Cs&&Is(H)),i!==n&&(o=Qs())!==n?r=i=[i,o]:(vs=r,r=n),r===n&&(r=null),r!==n?(ys=t,t=Fr()):(vs=t,t=n)):(vs=t,t=n),t}function Ba(){var t,r,i,o,s,a,c;if(t=vs,(r=function(){var t,r;return t=vs,Ks()!==n?(42===e.charCodeAt(vs)?(r=ne,vs++):(r=n,0===Cs&&Is(ie)),r!==n&&Ks()!==n?(ys=t,t=Ue()):(vs=t,t=n)):(vs=t,t=n),t}())===n)if(r=vs,(i=Wa())!==n){for(o=[],s=vs,(a=na())!==n&&(c=Wa())!==n?s=a=[a,c]:(vs=s,s=n);s!==n;)o.push(s),s=vs,(a=na())!==n&&(c=Wa())!==n?s=a=[a,c]:(vs=s,s=n);o!==n?r=i=[i,o]:(vs=r,r=n)}else vs=r,r=n;return r!==n&&(ys=t,r=Br()),t=r}function Wa(){var e,t,r,i,o,s;if(e=vs,(t=ha())===n&&(t=Ga()),t!==n){for(r=[],i=vs,(o=ia())!==n&&(s=Ka())!==n?i=o=[o,s]:(vs=i,i=n);i!==n;)r.push(i),i=vs,(o=ia())!==n&&(s=Ka())!==n?i=o=[o,s]:(vs=i,i=n);r!==n?(ys=e,e=t=Wr()):(vs=e,e=n)}else vs=e,e=n;return e}function Ga(){var e,t,r,i,o;return e=vs,(t=Va())===n&&(t=null),t!==n&&(r=ra())!==n&&(i=da())!==n&&(o=ta())!==n?e=t=[t,r,i,o]:(vs=e,e=n),e}function Va(){var e,t,r,i,o,s,a;if(e=vs,t=vs,(r=Js())!==n){for(i=[],o=vs,(s=Vs())!==n&&(a=Js())!==n?o=s=[s,a]:(vs=o,o=n);o!==n;)i.push(o),o=vs,(s=Vs())!==n&&(a=Js())!==n?o=s=[s,a]:(vs=o,o=n);i!==n?t=r=[r,i]:(vs=t,t=n)}else vs=t,t=n;return t===n&&(t=aa()),t!==n&&(ys=e,t=Gr(t)),e=t}function Ka(){var t;return(t=function(){var t,r,i;return t=vs,e.substr(vs,1).toLowerCase()===Vr?(r=e.charAt(vs),vs++):(r=n,0===Cs&&Is(Kr)),r!==n&&ea()!==n&&(i=function(){var t,r,i,o,s,a,c;return t=vs,48===e.charCodeAt(vs)?(r=Qr,vs++):(r=n,0===Cs&&Is(Zr)),r!==n?(i=vs,46===e.charCodeAt(vs)?(o=X,vs++):(o=n,0===Cs&&Is(Q)),o!==n?((s=Ds())===n&&(s=null),s!==n?((a=Ds())===n&&(a=null),a!==n?((c=Ds())===n&&(c=null),c!==n?i=o=[o,s,a,c]:(vs=i,i=n)):(vs=i,i=n)):(vs=i,i=n)):(vs=i,i=n),i===n&&(i=null),i!==n?(ys=t,r=en(),t=r):(vs=t,t=n)):(vs=t,t=n),t}())!==n?(ys=t,r=Yr(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,7).toLowerCase()===zr?(r=e.substr(vs,7),vs+=7):(r=n,0===Cs&&Is($r)),r!==n&&ea()!==n&&(i=Ya())!==n?(ys=t,r=Jr(i),t=r):(vs=t,t=n),t}())===n&&(t=za()),t}function Ya(){var e,t,r;if(e=vs,t=[],(r=Ds())!==n)for(;r!==n;)t.push(r),r=Ds();else t=n;return t!==n&&(ys=e,t=Xr(t)),e=t}function za(){var e,t,r,i,o;return e=vs,(t=Js())!==n?(r=vs,(i=ea())!==n&&(o=function(){var e;return(e=Js())===n&&(e=va())===n&&(e=aa()),e}())!==n?r=i=[i,o]:(vs=r,r=n),r===n&&(r=null),r!==n?(ys=e,e=t=tn(t,r)):(vs=e,e=n)):(vs=e,e=n),e}function $a(){var t;return(t=function(){var t,r,i,o;return t=vs,e.substr(vs,8).toLowerCase()===dn?(r=e.substr(vs,8),vs+=8):(r=n,0===Cs&&Is(pn)),r!==n&&(i=ea())!==n?(e.substr(vs,8).toLowerCase()===fn?(o=e.substr(vs,8),vs+=8):(o=n,0===Cs&&Is(gn)),o===n&&(e.substr(vs,8).toLowerCase()===mn?(o=e.substr(vs,8),vs+=8):(o=n,0===Cs&&Is(vn)),o===n&&(o=Js())),o!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=za()),t}function Ja(){var t;return(t=Js())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,2).toLowerCase()===kn?(r=e.substr(vs,2),vs+=2):(r=n,0===Cs&&Is(Un)),r!==n&&(i=Js())!==n?t=r=[r,i]:(vs=t,t=n),t}()),t}function Xa(){var e,t,r,i;return e=vs,(t=Js())!==n&&(r=ea())!==n&&(i=function(){var e;return(e=Js())===n&&(e=aa()),e}())!==n?e=t=[t,r,i]:(vs=e,e=n),e}function Qa(){var t,r,i,o,s,a,c;if(t=vs,r=vs,(i=Xs())!==n){for(o=[],s=vs,46===e.charCodeAt(vs)?(a=X,vs++):(a=n,0===Cs&&Is(Q)),a!==n&&(c=Xs())!==n?s=a=[a,c]:(vs=s,s=n);s!==n;)o.push(s),s=vs,46===e.charCodeAt(vs)?(a=X,vs++):(a=n,0===Cs&&Is(Q)),a!==n&&(c=Xs())!==n?s=a=[a,c]:(vs=s,s=n);o!==n?r=i=[i,o]:(vs=r,r=n)}else vs=r,r=n;return t=r!==n?e.substring(t,vs):r}function Za(){var e;return(e=ec())===n&&(e=za()),e}function ec(){var t,r,i;return t=vs,e.substr(vs,3).toLowerCase()===qn?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(Mn)),r!==n&&ea()!==n&&(i=Js())!==n?(ys=t,t=r=Fn(i)):(vs=t,t=n),t}function tc(){var t,r,i,o,s,a,c,u;if(t=vs,e.substr(vs,6).toLowerCase()===Gn?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(Vn)),r!==n)if((i=Vs())!==n)if((o=nc())!==n){for(s=[],a=vs,(c=na())!==n&&(u=nc())!==n?a=c=[c,u]:(vs=a,a=n);a!==n;)s.push(a),a=vs,(c=na())!==n&&(u=nc())!==n?a=c=[c,u]:(vs=a,a=n);s!==n?t=r=[r,i,o,s]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t===n&&(t=function(){var e,t,r,i,o,s,a,c;if(e=vs,(t=Js())!==n)if((r=Vs())!==n)if((i=rc())!==n){for(o=[],s=vs,(a=na())!==n&&(c=rc())!==n?s=a=[a,c]:(vs=s,s=n);s!==n;)o.push(s),s=vs,(a=na())!==n&&(c=rc())!==n?s=a=[a,c]:(vs=s,s=n);o!==n?e=t=[t,r,i,o]:(vs=e,e=n)}else vs=e,e=n;else vs=e,e=n;else vs=e,e=n;return e}()),t}function rc(){var e,t,r,i;return e=vs,(t=Js())!==n&&(r=ea())!==n?((i=Js())===n&&(i=aa()),i!==n?e=t=[t,r,i]:(vs=e,e=n)):(vs=e,e=n),e}function nc(){var t;return(t=function(){var t,r,i,o;return t=vs,e.substr(vs,5).toLowerCase()===Kn?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(Yn)),r!==n&&(i=ea())!==n&&(o=function(){var e,t;return e=vs,(t=ca())!==n&&(ys=e,t=zn(t)),e=t}())!==n?t=r=[r,i,o]:(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o,s,a,c,u,l;if(t=vs,e.substr(vs,6).toLowerCase()===$n?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(Jn)),r!==n)if((i=ea())!==n)if((o=oa())!==n)if((s=ic())!==n){if(a=[],c=vs,u=[],(l=Ls())!==n)for(;l!==n;)u.push(l),l=Ls();else u=n;for(u!==n&&(l=ic())!==n?c=u=[u,l]:(vs=c,c=n);c!==n;){if(a.push(c),c=vs,u=[],(l=Ls())!==n)for(;l!==n;)u.push(l),l=Ls();else u=n;u!==n&&(l=ic())!==n?c=u=[u,l]:(vs=c,c=n)}a!==n&&(c=sa())!==n?t=r=[r,i,o,s,a,c]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t}())===n&&(t=function(){var t,r,i,o;return t=vs,e.substr(vs,5).toLowerCase()===Xn?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(Qn)),r!==n&&(i=ea())!==n&&(o=function(){var e,t;return e=vs,(t=ca())!==n&&(ys=e,t=Zn(t)),e=t}())!==n?t=r=[r,i,o]:(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,6).toLowerCase()===ei?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(ti)),r!==n&&ea()!==n&&(i=ca())!==n?(ys=t,r=ri(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o,s;return t=vs,e.substr(vs,5).toLowerCase()===ni?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(ii)),r!==n&&(i=ea())!==n?(o=vs,e.substr(vs,4).toLowerCase()===oi?(s=e.substr(vs,4),vs+=4):(s=n,0===Cs&&Is(si)),s!==n&&(ys=o,s=ai()),(o=s)===n&&(o=vs,e.substr(vs,5).toLowerCase()===ci?(s=e.substr(vs,5),vs+=5):(s=n,0===Cs&&Is(ui)),s!==n&&(ys=o,s=li()),o=s),o!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,9).toLowerCase()===hi?(r=e.substr(vs,9),vs+=9):(r=n,0===Cs&&Is(di)),r!==n&&ea()!==n?(e.substr(vs,3).toLowerCase()===pi?(i=e.substr(vs,3),vs+=3):(i=n,0===Cs&&Is(fi)),i===n&&(e.substr(vs,8).toLowerCase()===gi?(i=e.substr(vs,8),vs+=8):(i=n,0===Cs&&Is(mi)),i===n&&(i=Js())),i!==n?(ys=t,r=vi(i),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o,s,a,c,u,l,h;if(t=vs,e.substr(vs,3).toLowerCase()===yi?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(bi)),r!==n)if((i=ea())!==n)if((o=oa())!==n){if(s=vs,(a=oc())!==n){for(c=[],u=vs,44===e.charCodeAt(vs)?(l=V,vs++):(l=n,0===Cs&&Is(K)),l!==n&&(h=oc())!==n?u=l=[l,h]:(vs=u,u=n);u!==n;)c.push(u),u=vs,44===e.charCodeAt(vs)?(l=V,vs++):(l=n,0===Cs&&Is(K)),l!==n&&(h=oc())!==n?u=l=[l,h]:(vs=u,u=n);c!==n?s=a=[a,c]:(vs=s,s=n)}else vs=s,s=n;s!==n&&(a=sa())!==n?t=r=[r,i,o,s,a]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t}())===n&&(t=rc()),t}function ic(){var e;return(e=Da())===n&&(e=Pa()),e}function oc(){var t,r;return t=vs,e.substr(vs,8).toLowerCase()===Ti?(r=e.substr(vs,8),vs+=8):(r=n,0===Cs&&Is(Si)),r===n&&(e.substr(vs,4).toLowerCase()===Ci?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(wi)),r===n&&(r=Js())),r!==n&&(ys=t,r=Ei(r)),t=r}function sc(){var e,t,r,i,o;if(e=vs,Ga()!==n){for(t=[],r=vs,(i=ia())!==n&&(o=za())!==n?r=i=[i,o]:(vs=r,r=n);r!==n;)t.push(r),r=vs,(i=ia())!==n&&(o=za())!==n?r=i=[i,o]:(vs=r,r=n);t!==n?(ys=e,e=Ai()):(vs=e,e=n)}else vs=e,e=n;return e}function ac(){var t,r,i;return t=vs,e.substr(vs,8).toLowerCase()===Oi?(r=e.substr(vs,8),vs+=8):(r=n,0===Cs&&Is(Ni)),r!==n&&ea()!==n&&(i=Js())!==n?(ys=t,t=r=Di(i)):(vs=t,t=n),t===n&&(t=vs,e.substr(vs,6).toLowerCase()===Pi?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(ki)),r!==n&&ea()!==n&&(i=Js())!==n?(ys=t,t=r=Ui(i)):(vs=t,t=n),t===n&&(t=vs,e.substr(vs,10).toLowerCase()===Hi?(r=e.substr(vs,10),vs+=10):(r=n,0===Cs&&Is(ji)),r!==n&&(ys=t,r=Li()),(t=r)===n&&(t=za()))),t}function cc(){var t,r,i;return t=vs,e.substr(vs,6).toLowerCase()===$i?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(Ji)),r!==n&&ea()!==n&&(i=function(){var t;return e.substr(vs,11).toLowerCase()===ro?(t=e.substr(vs,11),vs+=11):(t=n,0===Cs&&Is(no)),t===n&&(e.substr(vs,9).toLowerCase()===io?(t=e.substr(vs,9),vs+=9):(t=n,0===Cs&&Is(oo)),t===n&&(e.substr(vs,8).toLowerCase()===so?(t=e.substr(vs,8),vs+=8):(t=n,0===Cs&&Is(ao)),t===n&&(e.substr(vs,7).toLowerCase()===co?(t=e.substr(vs,7),vs+=7):(t=n,0===Cs&&Is(uo)),t===n&&(e.substr(vs,6).toLowerCase()===lo?(t=e.substr(vs,6),vs+=6):(t=n,0===Cs&&Is(ho)),t===n&&(e.substr(vs,10).toLowerCase()===po?(t=e.substr(vs,10),vs+=10):(t=n,0===Cs&&Is(fo)),t===n&&(e.substr(vs,9).toLowerCase()===go?(t=e.substr(vs,9),vs+=9):(t=n,0===Cs&&Is(mo)),t===n&&(t=Js()))))))),t}())!==n?(ys=t,t=r=Xi(i)):(vs=t,t=n),t===n&&(t=vs,e.substr(vs,7).toLowerCase()===zr?(r=e.substr(vs,7),vs+=7):(r=n,0===Cs&&Is($r)),r!==n&&ea()!==n&&(i=Ya())!==n?(ys=t,t=r=Qi(i)):(vs=t,t=n),t===n&&(t=vs,e.substr(vs,11).toLowerCase()===Zi?(r=e.substr(vs,11),vs+=11):(r=n,0===Cs&&Is(eo)),r!==n&&ea()!==n&&(i=Ya())!==n?(ys=t,t=r=to(i)):(vs=t,t=n),t===n&&(t=za()))),t}function uc(){var e;return(e=ec())===n&&(e=za()),e}function lc(){var t,r,i,o,s,a,c,u;if(t=vs,(r=function(){var t,r,i,o,s,a;return t=vs,(r=function(){var t,r;return t=vs,e.substr(vs,3).toLowerCase()===ot?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(mr)),r===n&&(r=Js()),r!==n&&(ys=t,r=ko(r)),t=r}())!==n&&(i=Zs())!==n&&(o=Js())!==n&&(s=Zs())!==n&&(a=dc())!==n?t=r=[r,i,o,s,a]:(vs=t,t=n),t}())!==n)if((i=Vs())!==n)if((o=function(){var t,r,i,o,s;return t=vs,(r=function(){var e,t;return e=vs,(t=ya())===n&&(t=Ea())===n&&(t=Ta()),t!==n&&(ys=e,t=Mo()),e=t}())!==n?(i=vs,(o=function(){var t,r;return t=vs,Ks()!==n?(58===e.charCodeAt(vs)?(r=P,vs++):(r=n,0===Cs&&Is(k)),r!==n&&Ks()!==n?(ys=t,t=Be()):(vs=t,t=n)):(vs=t,t=n),t}())!==n&&(s=function(){var e,t,r,i,o,s,a;return e=vs,t=vs,(r=Ds())===n&&(r=null),r!==n?((i=Ds())===n&&(i=null),i!==n?((o=Ds())===n&&(o=null),o!==n?((s=Ds())===n&&(s=null),s!==n?((a=Ds())===n&&(a=null),a!==n?t=r=[r,i,o,s,a]:(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t!==n&&(ys=e,t=Fo(t)),e=t}())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t}())!==n){for(s=[],a=vs,(c=ia())!==n&&(u=hc())!==n?a=c=[c,u]:(vs=a,a=n);a!==n;)s.push(a),a=vs,(c=ia())!==n&&(u=hc())!==n?a=c=[c,u]:(vs=a,a=n);s!==n?t=r=[r,i,o,s]:(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;else vs=t,t=n;return t}function hc(){var t;return(t=function(){var t,r,i;return t=vs,e.substr(vs,3).toLowerCase()===bo?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(To)),r!==n&&ea()!==n&&(i=pc())!==n?(ys=t,r=So(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,5).toLowerCase()===Co?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(wo)),r!==n&&ea()!==n&&(i=va())!==n?(ys=t,r=Eo(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,8).toLowerCase()===_o?(r=e.substr(vs,8),vs+=8):(r=n,0===Cs&&Is(Ao)),r!==n&&ea()!==n?((i=Ea())===n&&(i=Sa())===n&&(i=Ta()),i!==n?(ys=t,r=xo(i),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=vs,e.substr(vs,6).toLowerCase()===Ro?(r=e.substr(vs,6),vs+=6):(r=n,0===Cs&&Is(Io)),r!==n&&ea()!==n&&(i=Js())!==n?(ys=t,r=Oo(i),t=r):(vs=t,t=n),t}())===n&&(t=function(){var t,r,i,o;if(t=vs,e.substr(vs,5).toLowerCase()===No?(r=e.substr(vs,5),vs+=5):(r=n,0===Cs&&Is(Do)),r!==n)if(ea()!==n){for(i=[],o=Ds();o!==n;)i.push(o),o=Ds();i!==n?(ys=t,r=Po(i),t=r):(vs=t,t=n)}else vs=t,t=n;else vs=t,t=n;return t}())===n&&(t=za()),t}function dc(){var t,r;return t=vs,e.substr(vs,3).toLowerCase()===Ht?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(Uo)),r===n&&(e.substr(vs,3).toLowerCase()===Lt?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(Ho)),r===n&&(e.substr(vs,3).toLowerCase()===Bt?(r=e.substr(vs,3),vs+=3):(r=n,0===Cs&&Is(jo)),r===n&&(e.substr(vs,4).toLowerCase()===Mt?(r=e.substr(vs,4),vs+=4):(r=n,0===Cs&&Is(Lo)),r===n&&(r=Js())))),r!==n&&(ys=t,r=qo(r)),t=r}function pc(){var e,t,r,i,o;return e=vs,t=vs,(r=Ds())!==n?((i=Ds())===n&&(i=null),i!==n?((o=Ds())===n&&(o=null),o!==n?t=r=[r,i,o]:(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t!==n&&(ys=e,t=Bo(t)),e=t}function fc(){var t;return(t=function(){var t,r,i;return t=vs,e.substr(vs,9)===Go?(r=Go,vs+=9):(r=n,0===Cs&&Is(Vo)),r!==n&&ea()!==n?(e.substr(vs,3)===Ko?(i=Ko,vs+=3):(i=n,0===Cs&&Is(Yo)),i===n&&(e.substr(vs,3)===zo?(i=zo,vs+=3):(i=n,0===Cs&&Is($o))),i!==n?(ys=t,r=Jo(i),t=r):(vs=t,t=n)):(vs=t,t=n),t}())===n&&(t=za()),t}function gc(){var t,r,i,o,s;return t=vs,(r=function(){var e,t;return e=vs,(t=Ea())===n&&(t=Ta())===n&&(t=La()),t!==n&&(ys=e,t=ns(t)),e=t}())!==n?(i=vs,58===e.charCodeAt(vs)?(o=P,vs++):(o=n,0===Cs&&Is(k)),o!==n&&(s=Aa())!==n?i=o=[o,s]:(vs=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(vs=t,t=n)):(vs=t,t=n),t}function mc(){var e,t,r,i,o;return e=vs,(t=ks())!==n&&(r=ks())!==n&&(i=ks())!==n&&(o=ks())!==n?e=t=[t,r,i,o]:(vs=e,e=n),e}function vc(){var t,r,i,o;return t=vs,e.substr(vs,3)===gs?(r=gs,vs+=3):(r=n,0===Cs&&Is(ms)),r!==n&&(i=ea())!==n&&(o=function(){var t,r,i,o,s,a;return t=vs,(r=oa())!==n&&(i=Ws())!==n?(64===e.charCodeAt(vs)?(o=U,vs++):(o=n,0===Cs&&Is(H)),o!==n?((s=Ws())===n&&(s=va()),s!==n&&(a=sa())!==n?t=r=[r,i,o,s,a]:(vs=t,t=n)):(vs=t,t=n)):(vs=t,t=n),t}())!==n?t=r=[r,i,o]:(vs=t,t=n),t}if(t.data={},(r=c())!==n&&vs===e.length)return r;throw r!==n&&vs<e.length&&Is({type:"end"}),Os(Ss,Ts<e.length?e.charAt(Ts):null,Ts<e.length?Rs(Ts,Ts+1):Rs(Ts,Ts))}},function(e,t,r){var n;e.exports=(n=r(64),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],T=e[t+9],S=e[t+10],C=e[t+11],w=e[t+12],E=e[t+13],_=e[t+14],A=e[t+15],x=o[0],R=o[1],I=o[2],O=o[3];x=u(x,R,I,O,s,7,a[0]),O=u(O,x,R,I,c,12,a[1]),I=u(I,O,x,R,p,17,a[2]),R=u(R,I,O,x,f,22,a[3]),x=u(x,R,I,O,g,7,a[4]),O=u(O,x,R,I,m,12,a[5]),I=u(I,O,x,R,v,17,a[6]),R=u(R,I,O,x,y,22,a[7]),x=u(x,R,I,O,b,7,a[8]),O=u(O,x,R,I,T,12,a[9]),I=u(I,O,x,R,S,17,a[10]),R=u(R,I,O,x,C,22,a[11]),x=u(x,R,I,O,w,7,a[12]),O=u(O,x,R,I,E,12,a[13]),I=u(I,O,x,R,_,17,a[14]),x=l(x,R=u(R,I,O,x,A,22,a[15]),I,O,c,5,a[16]),O=l(O,x,R,I,v,9,a[17]),I=l(I,O,x,R,C,14,a[18]),R=l(R,I,O,x,s,20,a[19]),x=l(x,R,I,O,m,5,a[20]),O=l(O,x,R,I,S,9,a[21]),I=l(I,O,x,R,A,14,a[22]),R=l(R,I,O,x,g,20,a[23]),x=l(x,R,I,O,T,5,a[24]),O=l(O,x,R,I,_,9,a[25]),I=l(I,O,x,R,f,14,a[26]),R=l(R,I,O,x,b,20,a[27]),x=l(x,R,I,O,E,5,a[28]),O=l(O,x,R,I,p,9,a[29]),I=l(I,O,x,R,y,14,a[30]),x=h(x,R=l(R,I,O,x,w,20,a[31]),I,O,m,4,a[32]),O=h(O,x,R,I,b,11,a[33]),I=h(I,O,x,R,C,16,a[34]),R=h(R,I,O,x,_,23,a[35]),x=h(x,R,I,O,c,4,a[36]),O=h(O,x,R,I,g,11,a[37]),I=h(I,O,x,R,y,16,a[38]),R=h(R,I,O,x,S,23,a[39]),x=h(x,R,I,O,E,4,a[40]),O=h(O,x,R,I,s,11,a[41]),I=h(I,O,x,R,f,16,a[42]),R=h(R,I,O,x,v,23,a[43]),x=h(x,R,I,O,T,4,a[44]),O=h(O,x,R,I,w,11,a[45]),I=h(I,O,x,R,A,16,a[46]),x=d(x,R=h(R,I,O,x,p,23,a[47]),I,O,s,6,a[48]),O=d(O,x,R,I,y,10,a[49]),I=d(I,O,x,R,_,15,a[50]),R=d(R,I,O,x,m,21,a[51]),x=d(x,R,I,O,w,6,a[52]),O=d(O,x,R,I,f,10,a[53]),I=d(I,O,x,R,S,15,a[54]),R=d(R,I,O,x,c,21,a[55]),x=d(x,R,I,O,b,6,a[56]),O=d(O,x,R,I,A,10,a[57]),I=d(I,O,x,R,v,15,a[58]),R=d(R,I,O,x,E,21,a[59]),x=d(x,R,I,O,g,6,a[60]),O=d(O,x,R,I,C,10,a[61]),I=d(I,O,x,R,p,15,a[62]),R=d(R,I,O,x,T,21,a[63]),o[0]=o[0]+x|0,o[1]=o[1]+R|0,o[2]=o[2]+I|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)},function(e,t,r){var n;e.exports=(n=n||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},o=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=function(t){var t=t,r=987654321,n=4294967295;return function(){var i=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(r||e.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=4*o,c=i/a,u=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*o,l=e.min(4*u,i);if(u){for(var h=0;h<u;h+=o)this._doProcessBlock(n,h);var d=n.splice(0,u);r.sigBytes-=l}return new s.init(d,l)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math),n)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),s=r(3),a=r(2),c=r(8),u=r(5),l=function(e){function t(t,r,n){void 0===n&&(n={});var i=e.call(this)||this;if(i.C={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500},i.type=a.TypeStrings.DTMF,void 0===r)throw new TypeError("Not enough arguments");if(i.logger=t.ua.getLogger("sip.invitecontext.dtmf",t.id),i.owner=t,"string"==typeof r)r=r.toUpperCase();else{if("number"!=typeof r)throw new TypeError("Invalid tone: "+r);r=r.toString()}if(!r.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+r);i.tone=r;var o=n.duration,s=n.interToneGap;if(o&&!u.Utils.isDecimal(o))throw new TypeError("Invalid tone duration: "+o);if(o?o<i.C.MIN_DURATION?(i.logger.warn("'duration' value is lower than the minimum allowed, setting it to "+i.C.MIN_DURATION+" milliseconds"),o=i.C.MIN_DURATION):o>i.C.MAX_DURATION?(i.logger.warn("'duration' value is greater than the maximum allowed, setting it to "+i.C.MAX_DURATION+" milliseconds"),o=i.C.MAX_DURATION):o=Math.abs(o):o=i.C.DEFAULT_DURATION,i.duration=o,s&&!u.Utils.isDecimal(s))throw new TypeError("Invalid interToneGap: "+s);return s?s<i.C.MIN_INTER_TONE_GAP?(i.logger.warn("'interToneGap' value is lower than the minimum allowed, setting it to "+i.C.MIN_INTER_TONE_GAP+" milliseconds"),s=i.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=i.C.DEFAULT_INTER_TONE_GAP,i.interToneGap=s,i}return i(t,e),t.prototype.send=function(e){if(void 0===e&&(e={}),this.owner.status!==a.SessionStatus.STATUS_CONFIRMED&&this.owner.status!==a.SessionStatus.STATUS_WAITING_FOR_ACK)throw new c.Exceptions.InvalidStateError(this.owner.status);var t=e.extraHeaders?e.extraHeaders.slice():[],r={contentType:"application/dtmf-relay",body:"Signal= "+this.tone+"\r\nDuration= "+this.duration};if(this.owner.dialog){var n=this.owner.dialog.sendRequest(this,s.C.INFO,{extraHeaders:t,body:r});this.owner.emit("dtmf",n,this)}},t.prototype.init_incoming=function(e){e.reply(200),this.tone&&this.duration?this.owner.emit("dtmf",e,this):this.logger.warn("invalid INFO DTMF received, discarded")},t.prototype.receiveResponse=function(e){var t=e&&e.statusCode?e.statusCode:0;switch(!0){case/^1[0-9]{2}$/.test(t.toString()):break;case/^2[0-9]{2}$/.test(t.toString()):this.emit("succeeded",{originator:"remote",response:e});break;default:var r=u.Utils.sipErrorCause(t);this.emit("failed",e,r)}},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,s.C.causes.REQUEST_TIMEOUT),this.owner.onRequestTimeout()},t.prototype.onTransportError=function(){this.emit("failed",void 0,s.C.causes.CONNECTION_ERROR),this.owner.onTransportError()},t.prototype.onDialogError=function(e){this.emit("failed",e,s.C.causes.DIALOG_ERROR),this.owner.onDialogError(e)},t}(o.EventEmitter);t.DTMF=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(){function e(e,t){this.type=n.TypeStrings.SessionDescriptionHandlerObserver,this.session=e,this.options=t}return e.prototype.trackAdded=function(){this.session.emit("trackAdded")},e.prototype.directionChanged=function(){this.session.emit("directionChanged")},e}();t.SessionDescriptionHandlerObserver=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.Modifiers=n;var i=r(68);t.Simple=i.Simple;var o=r(44);t.SessionDescriptionHandler=o.SessionDescriptionHandler;var s=r(45);t.Transport=s.Transport},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(7),a=r(27),c=r(28);!function(e){e[e.STATUS_NULL=0]="STATUS_NULL",e[e.STATUS_NEW=1]="STATUS_NEW",e[e.STATUS_CONNECTING=2]="STATUS_CONNECTING",e[e.STATUS_CONNECTED=3]="STATUS_CONNECTED",e[e.STATUS_COMPLETED=4]="STATUS_COMPLETED"}(o=t.SimpleStatus||(t.SimpleStatus={}));var u=function(t){function r(r){var n=t.call(this)||this;if(r.media.remote.video?n.video=!0:n.video=!1,r.media.remote.audio?n.audio=!0:n.audio=!1,!n.audio&&!n.video)throw new Error("At least one remote audio or video element is required for Simple.");n.options=r;var i=e.navigator.userAgent.toLowerCase(),s=!1,u=!1;i.indexOf("safari")>-1&&i.indexOf("chrome")<0?s=!0:i.indexOf("firefox")>-1&&i.indexOf("chrome")<0&&(u=!0);var l={};return s&&(l.modifiers=[c.stripG722]),u&&(l.alwaysAcquireMediaFirst=!0),n.options.ua.uri?n.anonymous=!1:n.anonymous=!0,n.ua=new a.UA({uri:n.options.ua.uri,authorizationUser:n.options.ua.authorizationUser,password:n.options.ua.password,displayName:n.options.ua.displayName,userAgentString:n.options.ua.userAgentString,register:!0,sessionDescriptionHandlerFactoryOptions:l,transportOptions:{traceSip:n.options.ua.traceSip,wsServers:n.options.ua.wsServers}}),n.state=o.STATUS_NULL,n.logger=n.ua.getLogger("sip.simple"),n.ua.on("registered",function(){n.emit("registered",n.ua)}),n.ua.on("unregistered",function(){n.emit("unregistered",n.ua)}),n.ua.on("registrationFailed",function(){n.emit("unregistered",n.ua)}),n.ua.on("invite",function(e){if(n.state!==o.STATUS_NULL&&n.state!==o.STATUS_COMPLETED)return n.logger.warn("Rejecting incoming call. Simple only supports 1 call at a time"),void e.reject();n.session=e,n.setupSession(),n.emit("ringing",n.session)}),n.ua.on("message",function(e){n.emit("message",e)}),n}return i(r,t),r.prototype.call=function(e){if(this.ua&&this.checkRegistration()){if(this.state===o.STATUS_NULL||this.state===o.STATUS_COMPLETED)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.autoplay=!0,this.options.media.local.video.volume=0),this.session=this.ua.invite(e,{sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}}),this.setupSession(),this.session;this.logger.warn("Cannot make more than a single call with Simple")}else this.logger.warn("A registered UA is required for calling")},r.prototype.answer=function(){if(this.state===o.STATUS_NEW||this.state===o.STATUS_CONNECTING)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.session.accept({sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}});this.logger.warn("No call to answer")},r.prototype.reject=function(){if(this.state===o.STATUS_NEW||this.state===o.STATUS_CONNECTING)return this.session.reject();this.logger.warn("Call is already answered")},r.prototype.hangup=function(){if(this.state===o.STATUS_CONNECTED||this.state===o.STATUS_CONNECTING||this.state===o.STATUS_NEW)return this.state!==o.STATUS_CONNECTED?this.session.cancel():this.session?this.session.bye():void 0;this.logger.warn("No active call to hang up on")},r.prototype.hold=function(){if(this.state===o.STATUS_CONNECTED&&this.session&&!this.session.localHold)return this.mute(),this.logger.log("Placing session on hold"),this.session.hold();this.logger.warn("Cannot put call on hold")},r.prototype.unhold=function(){if(this.state===o.STATUS_CONNECTED&&this.session&&this.session.localHold)return this.unmute(),this.logger.log("Placing call off hold"),this.session.unhold();this.logger.warn("Cannot unhold a call that is not on hold")},r.prototype.mute=function(){this.state===o.STATUS_CONNECTED?(this.logger.log("Muting Audio"),this.toggleMute(!0),this.emit("mute",this)):this.logger.warn("An acitve call is required to mute audio")},r.prototype.unmute=function(){this.state===o.STATUS_CONNECTED?(this.logger.log("Unmuting Audio"),this.toggleMute(!1),this.emit("unmute",this)):this.logger.warn("An active call is required to unmute audio")},r.prototype.sendDTMF=function(e){this.state===o.STATUS_CONNECTED&&this.session?(this.logger.log("Sending DTMF tone: "+e),this.session.dtmf(e)):this.logger.warn("An active call is required to send a DTMF tone")},r.prototype.message=function(e,t){this.ua&&this.checkRegistration()?e&&t?this.ua.message(e,t):this.logger.warn("A destination and message are required to send a message"):this.logger.warn("A registered UA is required to send a message")},r.prototype.checkRegistration=function(){return this.anonymous||this.ua&&this.ua.isRegistered()},r.prototype.setupRemoteMedia=function(){var t=this;if(this.session){var r,n=this.session.sessionDescriptionHandler.peerConnection;n.getReceivers?(r=new e.window.MediaStream,n.getReceivers().forEach(function(e){var t=e.track;t&&r.addTrack(t)})):r=n.getRemoteStreams()[0],this.video?(this.options.media.remote.video.srcObject=r,this.options.media.remote.video.play().catch(function(){t.logger.log("play was rejected")})):this.audio&&(this.options.media.remote.audio.srcObject=r,this.options.media.remote.audio.play().catch(function(){t.logger.log("play was rejected")}))}else this.logger.warn("No session to set remote media on")},r.prototype.setupLocalMedia=function(){if(this.session){if(this.video&&this.options.media.local&&this.options.media.local.video){var t,r=this.session.sessionDescriptionHandler.peerConnection;r.getSenders?(t=new e.window.MediaStream,r.getSenders().forEach(function(e){var r=e.track;r&&"video"===r.kind&&t.addTrack(r)})):t=r.getLocalStreams()[0],this.options.media.local.video.srcObject=t,this.options.media.local.video.volume=0,this.options.media.local.video.play()}}else this.logger.warn("No session to set local media on")},r.prototype.cleanupMedia=function(){this.video&&(this.options.media.remote.video.srcObject=null,this.options.media.remote.video.pause(),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.srcObject=null,this.options.media.local.video.pause())),this.audio&&(this.options.media.remote.audio.srcObject=null,this.options.media.remote.audio.pause())},r.prototype.setupSession=function(){var e=this;this.session?(this.state=o.STATUS_NEW,this.emit("new",this.session),this.session.on("progress",function(){return e.onProgress()}),this.session.on("accepted",function(){return e.onAccepted()}),this.session.on("rejected",function(){return e.onEnded()}),this.session.on("failed",function(){return e.onFailed()}),this.session.on("terminated",function(){return e.onEnded()})):this.logger.warn("No session to set up")},r.prototype.destroyMedia=function(){this.session&&this.session.sessionDescriptionHandler&&this.session.sessionDescriptionHandler.close()},r.prototype.toggleMute=function(e){if(this.session){var t=this.session.sessionDescriptionHandler.peerConnection;t.getSenders?t.getSenders().forEach(function(t){t.track&&(t.track.enabled=!e)}):t.getLocalStreams().forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!e}),t.getVideoTracks().forEach(function(t){t.enabled=!e})})}else this.logger.warn("No session to toggle mute")},r.prototype.onAccepted=function(){var e=this;this.session?(this.state=o.STATUS_CONNECTED,this.emit("connected",this.session),this.setupLocalMedia(),this.setupRemoteMedia(),this.session.sessionDescriptionHandler&&(this.session.sessionDescriptionHandler.on("addTrack",function(){e.logger.log("A track has been added, triggering new remoteMedia setup"),e.setupRemoteMedia()}),this.session.sessionDescriptionHandler.on("addStream",function(){e.logger.log("A stream has been added, trigger new remoteMedia setup"),e.setupRemoteMedia()})),this.session.on("dtmf",function(t,r){e.emit("dtmf",r.tone)}),this.session.on("bye",function(){return e.onEnded()})):this.logger.warn("No session for accepting")},r.prototype.onProgress=function(){this.state=o.STATUS_CONNECTING,this.emit("connecting",this.session)},r.prototype.onFailed=function(){this.onEnded()},r.prototype.onEnded=function(){this.state=o.STATUS_COMPLETED,this.emit("ended",this.session),this.cleanupMedia()},r.C=o,r}(s.EventEmitter);t.Simple=u}).call(this,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(70);t.CCBAR=n.CCBAR},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(71),i=r(72),o=r(103),s=r(73),a=r(27),c={code:6001,msg:"SIP\u6ce8\u518c\u6210\u529f\uff01"},u={code:6002,msg:"SIP\u672a\u6ce8\u518c\uff01"},l={code:6003,msg:"SIP\u6ce8\u518c\u5931\u8d25\uff01"},h={code:6004,msg:"message"},d={code:6005,msg:"outOfDialogReferRequested"},p={code:6006,msg:"transportCreated"},f={code:6007,msg:"\u60a8\u6709\u65b0\u7684\u6765\u7535\uff01"},g={code:6008,msg:"\u672a\u68c0\u6d4b\u5230\u6765\u7535\uff01"},m={code:6009,msg:"\u672a\u68c0\u6d4b\u5230\u97f3\u9891\u8bbe\u5907\uff01"},v={code:60010,msg:"\u6d4f\u89c8\u5668\u65e0\u6cd5\u83b7\u53d6\u97f3\u9891\u8bbe\u5907\uff01"},y={code:5001,msg:"\u7b7e\u5165\u5931\u8d25\uff01"},b={code:5002,msg:"\u83b7\u53d6\u663e\u53f7\u5217\u8868\u5931\u8d25\uff01"},T={code:5003,msg:"\u5750\u5e2d\u72b6\u6001\u5207\u6362\u5931\u8d25\uff01"},S={code:5004,msg:"\u5916\u547c\u5931\u8d25\uff01"},C={code:5005,msg:"\u7ed3\u675f\u901a\u8bdd\u5931\u8d25\uff01"},w={code:5006,msg:"\u9759\u97f3\u5931\u8d25\uff01"},E={code:5007,msg:"\u4fdd\u6301\u5931\u8d25\uff01"},_={code:5008,msg:"\u6062\u590d\u5931\u8d25\uff01"},A={code:5009,msg:"\u4e0b\u53d1\u6ee1\u610f\u5ea6\u5931\u8d25\uff01"},x={code:50010,msg:"\u7b7e\u51fa\u5931\u8d25\uff01"},R={code:50011,msg:"\u83b7\u53d6sip\u5931\u8d25\uff01"},I=2001,O=2002,N=2003,D=2004,P=2005,k=2006,U=2007,H=2008,j=2009,L=20010,q=20011,M=function(){function e(e){var t=this;this.webSocketSubject=new o.Subject,this.webRTCSubject=new o.Subject,this.interfaceSubject=new o.Subject,this.getConnectUrl=function(e){return t.accountParams.wsUrl+"/tscloud/websocket/ws?ticket="+e},this.getUserUrl=function(e){return"/topic/pss."+e},this.accountParams=e,this.accountParams.api=e.api||"https://www.139130.com/tscloud/ccbar/",this.accountParams.wsUrl=e.wsUrl||"https://www.139130.com";var r=document.body,n=document.createElement("video");n.style.display="none",this.remoteVideo=n,r.appendChild(n)}return e.prototype.getWebSocketSubject=function(){return this.webSocketSubject.asObservable()},e.prototype.getWebRTCSubject=function(){return this.webRTCSubject.asObservable()},e.prototype.getInterfaceSubject=function(){return this.interfaceSubject.asObservable()},e.prototype.initWebRTC=function(){var e=this;if(void 0!==this.configuration){this.stop();var t={uri:this.configuration.sipAccount+"@"+this.configuration.sipUrl,authorizationUser:this.configuration.sipAccount,password:this.configuration.sipPassword,transportOptions:{wsServers:"wss://"+this.configuration.sipUrl,maxReconnectionAttempts:0},registerOptions:{expires:60}};return this.ua=new a.UA(t),this.ua.once("registered",function(t){e.webRTCSubject.next(c)}),this.ua.on("unregistered",function(t,r){e.webRTCSubject.next(u),e.stop()}),this.ua.on("registrationFailed",function(t,r){e.webRTCSubject.next(l)}),this.ua.on("message",function(t){e.webRTCSubject.next(h)}),this.ua.on("outOfDialogReferRequested",function(t){e.webRTCSubject.next(d)}),this.ua.on("transportCreated",function(t){e.webRTCSubject.next(p)}),this.ua.on("invite",function(t){e.session=t,t.on("trackAdded",function(){var r=t.sessionDescriptionHandler.peerConnection,n=new MediaStream;r.getReceivers().forEach(function(e){n.addTrack(e.track)}),e.remoteVideo.srcObject=n,e.remoteVideo.play()}),e.webRTCSubject.next(f)}),this.ua}},e.prototype.call=function(e){var t=this;void 0!==this.configuration&&(void 0!==this.ua?(this.session=this.ua.invite(e+"@"+this.configuration.sipUrl,{sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:!1}}}),this.session.on("trackAdded",function(){var e=t.session.sessionDescriptionHandler.peerConnection,r=new MediaStream;e.getReceivers().forEach(function(e){r.addTrack(e.track)}),t.remoteVideo.srcObject=r,t.remoteVideo.play()})):alert("\u672a\u521d\u59cb\u5316sip"))},e.prototype.accept=function(){var e=this;void 0!==window.navigator.mediaDevices?void 0!==this.session?(this.session.accept({sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:!1}}}),this.session.sessionDescriptionHandler.on("userMediaFailed",function(t){e.webRTCSubject.next(m)})):this.webRTCSubject.next(g):this.webRTCSubject.next(v)},e.prototype.hangUp=function(){void 0!==this.session?this.session.terminate():this.webRTCSubject.next(g)},e.prototype.stop=function(){this.ua&&this.ua.stop(),this.stompClient&&this.stompClient.deactivate()},e.prototype.signIn=function(){var e=this;i.ajax({url:this.getJsonpUrl("signIn"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,skillGroupId:this.accountParams.skillGroupId},jsonp:"callback",jsonpCallback:"handleData"}).done(function(t){if(e.interfaceSubject.next({code:I,body:t}),t.data){var r=t.data.ticket;r&&(e.stompClient=new n.Client({heartbeatIncoming:0,heartbeatOutgoing:2e4,reconnectDelay:1e4,brokerURL:e.getConnectUrl(r)}),e.stompClient.webSocketFactory=function(){return new s(e.getConnectUrl(r))},e.stompClient.activate(),e.stompClient.onConnect=function(t){e.stompClient&&e.stompClient.subscribe(e.getUserUrl(r),function(t){e.webSocketSubject.next(t)})})}}).fail(function(t,r,n){e.interfaceSubject.next({body:JSON.stringify(y),status:t,text:r,err:n})})},e.prototype.getNumberList=function(){var e=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("getNumberList"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password},jsonp:"callback",jsonpCallback:"handleData"}).done(function(t){e.interfaceSubject.next({code:O,body:t})}).fail(function(t,r,n){e.interfaceSubject.next({body:JSON.stringify(b),status:t,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.changeStatus=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("changeStatus"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,status:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:N,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(T),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.normalCall=function(e,t){var r=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("call"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,phone:e,displayNum:t},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){r.interfaceSubject.next({code:D,body:e})}).fail(function(e,t,n){r.interfaceSubject.next({body:JSON.stringify(S),status:e,text:t,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.endCall=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("endCall"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,sessionId:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:P,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(C),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.mute=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("mute"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,sessionId:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:k,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(w),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.holdOn=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("holdOn"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,sessionId:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:U,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(E),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.resumeCall=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("resumeCall"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,sessionId:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:H,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(_),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.satisfiy=function(e){var t=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("satisfiy"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password,sessionId:e},jsonp:"callback",jsonpCallback:"handleData"}).done(function(e){t.interfaceSubject.next({code:j,body:e})}).fail(function(e,r,n){t.interfaceSubject.next({body:JSON.stringify(A),status:e,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.signOut=function(){var e=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("signOut"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password},jsonp:"callback",jsonpCallback:"handleData"}).done(function(t){e.interfaceSubject.next({code:L,body:t}),e.stop()}).fail(function(t,r,n){e.interfaceSubject.next({body:JSON.stringify(x),status:t,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.getSip=function(){var e=this;void 0!==this.accountParams?i.ajax({url:this.getJsonpUrl("getSip"),dataType:"jsonp",data:{enterprise:this.accountParams.enterprise,account:this.accountParams.account,password:this.accountParams.password},jsonp:"callback",jsonpCallback:"handleData"}).done(function(t){e.configuration=t.data,e.interfaceSubject.next({code:q,body:t})}).fail(function(t,r,n){e.interfaceSubject.next({body:JSON.stringify(R),status:t,text:r,err:n})}):console.log("accountParams is Undefined",this.accountParams)},e.prototype.notice=function(){var e=this,t="";this.session&&(t=this.session.remoteIdentity.displayName),this.closeNotice(),Notification.requestPermission(function(r){e.noticefication=new Notification("\u4e91\u7535\u9500\u2022\u7cfb\u7edf\u63d0\u793a",{body:"\u60a8\u6709\u65b0\u7684\u6765\u7535\u3010"+t+"\u3011",icon:e.accountParams.iconUrl}),e.noticefication.onclick=function(){window.focus()}})},e.prototype.getJsonpUrl=function(e){return this.accountParams.api+e},e.prototype.closeNotice=function(){this.noticefication&&this.noticefication.close()},e}();t.CCBAR=M},function(e,t,r){var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./src/byte.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BYTE={LF:"\n",NULL:"\0"}},"./src/client.ts":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/stomp-handler.ts"),s=r("./src/versions.ts"),a=r("./src/web-socket-state.ts"),c=function(){function e(e){void 0===e&&(e={}),this.stompVersions=s.Versions.default,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this._active=!1;var t=function(){};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}return Object.defineProperty(e.prototype,"webSocket",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disconnectHeaders",{get:function(){return this._disconnectHeaders},set:function(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return!!this._stompHandler&&this._stompHandler.connected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedVersion",{get:function(){return this._stompHandler?this._stompHandler.connectedVersion:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.configure=function(e){Object.assign(this,e)},e.prototype.activate=function(){this._active=!0,this._connect()},e.prototype._connect=function(){return n(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return this.connected?(this.debug("STOMP: already connected, nothing to do"),[2]):[4,this.beforeConnect()];case 1:return t.sent(),this._active?(this.debug("Opening Web Socket..."),this._webSocket=this._createWebSocket(),this._stompHandler=new o.StompHandler(this,this._webSocket,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,onConnect:function(t){if(!e._active)return e.debug("STOMP got connected while deactivate was issued, will disconnect now"),void e._disposeStompHandler();e.onConnect(t)},onDisconnect:function(t){e.onDisconnect(t)},onStompError:function(t){e.onStompError(t)},onWebSocketClose:function(t){e.onWebSocketClose(t),e._active&&e._schedule_reconnect()},onWebSocketError:function(t){e.onWebSocketError(t)},onUnhandledMessage:function(t){e.onUnhandledMessage(t)},onUnhandledReceipt:function(t){e.onUnhandledReceipt(t)},onUnhandledFrame:function(t){e.onUnhandledFrame(t)}}),this._stompHandler.start(),[2]):(this.debug("Client has been marked inactive, will not attempt to connect"),[2])}})})},e.prototype._createWebSocket=function(){var e;return(e=this.webSocketFactory?this.webSocketFactory():new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())).binaryType="arraybuffer",e},e.prototype._schedule_reconnect=function(){var e=this;this.reconnectDelay>0&&(this.debug("STOMP: scheduling reconnection in "+this.reconnectDelay+"ms"),this._reconnector=setTimeout(function(){e._connect()},this.reconnectDelay))},e.prototype.deactivate=function(){this._active=!1,this._reconnector&&clearTimeout(this._reconnector),this._disposeStompHandler()},e.prototype.forceDisconnect=function(){this._webSocket&&(this._webSocket.readyState!==a.WebSocketState.CONNECTING&&this._webSocket.readyState!==a.WebSocketState.OPEN||this._webSocket.close())},e.prototype._disposeStompHandler=function(){this._stompHandler&&(this._stompHandler.dispose(),this._stompHandler=null)},e.prototype.publish=function(e){this._stompHandler.publish(e)},e.prototype.watchForReceipt=function(e,t){this._stompHandler.watchForReceipt(e,t)},e.prototype.subscribe=function(e,t,r){return void 0===r&&(r={}),this._stompHandler.subscribe(e,t,r)},e.prototype.unsubscribe=function(e,t){void 0===t&&(t={}),this._stompHandler.unsubscribe(e,t)},e.prototype.begin=function(e){return this._stompHandler.begin(e)},e.prototype.commit=function(e){this._stompHandler.commit(e)},e.prototype.abort=function(e){this._stompHandler.abort(e)},e.prototype.ack=function(e,t,r){void 0===r&&(r={}),this._stompHandler.ack(e,t,r)},e.prototype.nack=function(e,t,r){void 0===r&&(r={}),this._stompHandler.nack(e,t,r)},e}();t.Client=c},"./src/compatibility/compat-client.ts":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/client.ts"),s=r("./src/compatibility/heartbeat-info.ts"),a=function(e){function t(t){var r=e.call(this)||this;return r.maxWebSocketFrameSize=16384,r._heartbeatInfo=new s.HeartbeatInfo(r),r.reconnect_delay=0,r.webSocketFactory=t,r.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},r}return i(t,e),t.prototype._parseConnect=function(){for(var e,t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};if(n.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof n[1])o=n[0],t=n[1],r=n[2],e=n[3];else switch(n.length){case 6:o.login=n[0],o.passcode=n[1],t=n[2],r=n[3],e=n[4],o.host=n[5];break;default:o.login=n[0],o.passcode=n[1],t=n[2],r=n[3],e=n[4]}return[o,t,r,e]},t.prototype.connect=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this._parseConnect.apply(this,t);n[0]&&(this.connectHeaders=n[0]),n[1]&&(this.onConnect=n[1]),n[2]&&(this.onStompError=n[2]),n[3]&&(this.onWebSocketClose=n[3]),e.prototype.activate.call(this)},t.prototype.disconnect=function(t,r){void 0===r&&(r={}),t&&(this.onDisconnect=t),this.disconnectHeaders=r,e.prototype.deactivate.call(this)},t.prototype.send=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r="");var n=!1===(t=Object.assign({},t))["content-length"];n&&delete t["content-length"],this.publish({destination:e,headers:t,body:r,skipContentLengthHeader:n})},Object.defineProperty(t.prototype,"reconnect_delay",{set:function(e){this.reconnectDelay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ws",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onreceive",{get:function(){return this.onUnhandledMessage},set:function(e){this.onUnhandledMessage=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onreceipt",{get:function(){return this.onUnhandledReceipt},set:function(e){this.onUnhandledReceipt=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heartbeat",{get:function(){return this._heartbeatInfo},set:function(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing},enumerable:!0,configurable:!0}),t}(o.Client);t.CompatClient=a},"./src/compatibility/heartbeat-info.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.client=e}return Object.defineProperty(e.prototype,"outgoing",{get:function(){return this.client.heartbeatOutgoing},set:function(e){this.client.heartbeatOutgoing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incoming",{get:function(){return this.client.heartbeatIncoming},set:function(e){this.client.heartbeatIncoming=e},enumerable:!0,configurable:!0}),e}();t.HeartbeatInfo=n},"./src/compatibility/stomp.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/versions.ts"),i=r("./src/compatibility/compat-client.ts"),o=function(){function e(){}return e.client=function(t,r){null==r&&(r=n.Versions.default.protocolVersions());return new i.CompatClient(function(){return new(e.WebSocketClass||WebSocket)(t,r)})},e.over=function(e){var t;return"function"==typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=function(){return e}),new i.CompatClient(t)},e.WebSocketClass=null,e}();t.Stomp=o},"./src/frame-impl.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/byte.ts"),i=function(){function e(e){var t=e.command,r=e.headers,n=e.body,i=e.binaryBody,o=e.escapeHeaderValues,s=e.skipContentLengthHeader;this.command=t,this.headers=Object.assign({},r||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=n||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=s||!1}return Object.defineProperty(e.prototype,"body",{get:function(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody},enumerable:!0,configurable:!0}),e.fromRawFrame=function(t,r){for(var n={},i=function(e){return e.replace(/^\s+|\s+$/g,"")},o=0,s=t.headers.reverse();o<s.length;o++){var a=s[o],c=(a.indexOf(":"),i(a[0])),u=i(a[1]);r&&"CONNECT"!==t.command&&"CONNECTED"!==t.command&&(u=e.hdrValueUnEscape(u)),n[c]=u}return new e({command:t.command,headers:n,binaryBody:t.binaryBody,escapeHeaderValues:r})},e.prototype.toString=function(){return this.serializeCmdAndHeaders()},e.prototype.serialize=function(){var t=this.serializeCmdAndHeaders();return this.isBinaryBody?e.toUnit8Array(t,this._binaryBody).buffer:t+this._body+n.BYTE.NULL},e.prototype.serializeCmdAndHeaders=function(){var t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(var r=0,i=Object.keys(this.headers||{});r<i.length;r++){var o=i[r],s=this.headers[o];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?t.push(o+":"+e.hdrValueEscape(""+s)):t.push(o+":"+s)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push("content-length:"+this.bodyLength()),t.join(n.BYTE.LF)+n.BYTE.LF+n.BYTE.LF},e.prototype.isBodyEmpty=function(){return 0===this.bodyLength()},e.prototype.bodyLength=function(){var e=this.binaryBody;return e?e.length:0},e.sizeOfUTF8=function(e){return e?(new TextEncoder).encode(e).length:0},e.toUnit8Array=function(e,t){var r=(new TextEncoder).encode(e),n=new Uint8Array([0]),i=new Uint8Array(r.length+t.length+n.length);return i.set(r),i.set(t,r.length),i.set(n,r.length+t.length),i},e.marshall=function(t){return new e(t).serialize()},e.hdrValueEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")},e.hdrValueUnEscape=function(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")},e}();t.FrameImpl=i},"./src/index.ts":function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("./src/client.ts")),n(r("./src/frame-impl.ts")),n(r("./src/parser.ts")),n(r("./src/stomp-config.ts")),n(r("./src/stomp-headers.ts")),n(r("./src/stomp-subscription.ts")),n(r("./src/versions.ts")),n(r("./src/web-socket-state.ts")),n(r("./src/compatibility/compat-client.ts")),n(r("./src/compatibility/stomp.ts"))},"./src/parser.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}return e.prototype.parseChunk=function(e,t){var r;if(void 0===t&&(t=!1),r=e instanceof ArrayBuffer?new Uint8Array(e):this._encoder.encode(e),t&&0!==r[r.length-1]){var n=new Uint8Array(r.length+1);n.set(r,0),n[r.length]=0,r=n}for(var i=0;i<r.length;i++){var o=r[i];this._onByte(o)}},e.prototype._collectFrame=function(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())},e.prototype._collectCommand=function(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)},e.prototype._collectHeaders=function(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())},e.prototype._reinjectByte=function(e){this._onByte(e)},e.prototype._collectHeaderKey=function(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)},e.prototype._collectHeaderValue=function(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)},e.prototype._setupCollectBody=function(){var e=this._results.headers.filter(function(e){return"content-length"===e[0]})[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated},e.prototype._collectBodyNullTerminated=function(e){0!==e?this._consumeByte(e):this._retrievedBody()},e.prototype._collectBodyFixedSize=function(e){0!=this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()},e.prototype._retrievedBody=function(){this._results.binaryBody=this._consumeTokenAsRaw(),this.onFrame(this._results),this._initState()},e.prototype._consumeByte=function(e){this._token.push(e)},e.prototype._consumeTokenAsUTF8=function(){return this._decoder.decode(this._consumeTokenAsRaw())},e.prototype._consumeTokenAsRaw=function(){var e=new Uint8Array(this._token);return this._token=[],e},e.prototype._initState=function(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame},e}();t.Parser=n},"./src/stomp-config.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.StompConfig=n},"./src/stomp-handler.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/byte.ts"),i=r("./src/frame-impl.ts"),o=r("./src/parser.ts"),s=r("./src/versions.ts"),a=r("./src/web-socket-state.ts"),c=function(){function e(e,t,r){var n=this;void 0===r&&(r={}),this._client=e,this._webSocket=t,this._serverFrameHandlers={CONNECTED:function(e){n.debug("connected to server "+e.headers.server),n._connected=!0,n._connectedVersion=e.headers.version,n._connectedVersion===s.Versions.V1_2&&(n._escapeHeaderValues=!0),n._setupHeartbeat(e.headers),n.onConnect(e)},MESSAGE:function(e){var t=e.headers.subscription,r=n._subscriptions[t]||n.onUnhandledMessage,i=e,o=n,a=n._connectedVersion===s.Versions.V1_2?i.headers.ack:i.headers["message-id"];i.ack=function(e){return void 0===e&&(e={}),o.ack(a,t,e)},i.nack=function(e){return void 0===e&&(e={}),o.nack(a,t,e)},r(i)},RECEIPT:function(e){var t=n._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete n._receiptWatchers[e.headers["receipt-id"]]):n.onUnhandledReceipt(e)},ERROR:function(e){n.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.configure(r)}return Object.defineProperty(e.prototype,"connectedVersion",{get:function(){return this._connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),e.prototype.configure=function(e){Object.assign(this,e)},e.prototype.start=function(){var e=this,t=new o.Parser(function(t){var r=i.FrameImpl.fromRawFrame(t,e._escapeHeaderValues);e.logRawCommunication||e.debug("<<< "+r),(e._serverFrameHandlers[r.command]||e.onUnhandledFrame)(r)},function(){e.debug("<<< PONG")});this._webSocket.onmessage=function(r){if(e.debug("Received data"),e._lastServerActivityTS=Date.now(),e.logRawCommunication){var n=r.data instanceof ArrayBuffer?(new TextDecoder).decode(r.data):r.data;e.debug("<<< "+n)}t.parseChunk(r.data,e.appendMissingNULLonIncoming)},this._webSocket.onclose=function(t){e.debug("Connection closed to "+e._webSocket.url),e.onWebSocketClose(t),e._cleanUp()},this._webSocket.onerror=function(t){e.onWebSocketError(t)},this._webSocket.onopen=function(){var t=Object.assign({},e.connectHeaders);e.debug("Web Socket Opened..."),t["accept-version"]=e.stompVersions.supportedVersions(),t["heart-beat"]=[e.heartbeatOutgoing,e.heartbeatIncoming].join(","),e._transmit({command:"CONNECT",headers:t})}},e.prototype._setupHeartbeat=function(e){var t=this;if(e.version===s.Versions.V1_1||e.version===s.Versions.V1_2){var r=e["heart-beat"].split(",").map(function(e){return parseInt(e,10)}),i=r[0],o=r[1];if(0!==this.heartbeatOutgoing&&0!==o){var c=Math.max(this.heartbeatOutgoing,o);this.debug("send PING every "+c+"ms"),this._pinger=setInterval(function(){t._webSocket.readyState===a.WebSocketState.OPEN&&(t._webSocket.send(n.BYTE.LF),t.debug(">>> PING"))},c)}if(0!==this.heartbeatIncoming&&0!==i){var u=Math.max(this.heartbeatIncoming,i);this.debug("check PONG every "+u+"ms"),this._ponger=setInterval(function(){var e=Date.now()-t._lastServerActivityTS;e>2*u&&(t.debug("did not receive server activity for the last "+e+"ms"),t._webSocket.close())},u)}}},e.prototype._transmit=function(e){var t=e.command,r=e.headers,n=e.body,o=e.binaryBody,s=e.skipContentLengthHeader,a=new i.FrameImpl({command:t,headers:r,body:n,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:s}),c=a.serialize();if(this.logRawCommunication?this.debug(">>> "+c):this.debug(">>> "+a),this.forceBinaryWSFrames&&"string"==typeof c&&(c=(new TextEncoder).encode(c)),"string"==typeof c&&this.splitLargeFrames)for(var u=c;u.length>0;){var l=u.substring(0,this.maxWebSocketChunkSize);u=u.substring(this.maxWebSocketChunkSize),this._webSocket.send(l),this.debug("chunk sent = "+l.length+", remaining = "+u.length)}else this._webSocket.send(c)},e.prototype.dispose=function(){var e=this;if(this.connected)try{var t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt="close-"+this._counter++),this.watchForReceipt(t.receipt,function(t){e._webSocket.close(),e._cleanUp(),e.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:t})}catch(e){this.debug("Ignoring error during disconnect "+e)}else this._webSocket.readyState!==a.WebSocketState.CONNECTING&&this._webSocket.readyState!==a.WebSocketState.OPEN||this._webSocket.close()},e.prototype._cleanUp=function(){this._connected=!1,this._pinger&&clearInterval(this._pinger),this._ponger&&clearInterval(this._ponger)},e.prototype.publish=function(e){var t=e.destination,r=e.headers,n=e.body,i=e.binaryBody,o=e.skipContentLengthHeader,s=Object.assign({destination:t},r);this._transmit({command:"SEND",headers:s,body:n,binaryBody:i,skipContentLengthHeader:o})},e.prototype.watchForReceipt=function(e,t){this._receiptWatchers[e]=t},e.prototype.subscribe=function(e,t,r){void 0===r&&(r={}),(r=Object.assign({},r)).id||(r.id="sub-"+this._counter++),r.destination=e,this._subscriptions[r.id]=t,this._transmit({command:"SUBSCRIBE",headers:r});var n=this;return{id:r.id,unsubscribe:function(e){return n.unsubscribe(r.id,e)}}},e.prototype.unsubscribe=function(e,t){void 0===t&&(t={}),t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})},e.prototype.begin=function(e){var t=e||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:t}});var r=this;return{id:t,commit:function(){r.commit(t)},abort:function(){r.abort(t)}}},e.prototype.commit=function(e){this._transmit({command:"COMMIT",headers:{transaction:e}})},e.prototype.abort=function(e){this._transmit({command:"ABORT",headers:{transaction:e}})},e.prototype.ack=function(e,t,r){void 0===r&&(r={}),r=Object.assign({},r),this._connectedVersion===s.Versions.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"ACK",headers:r})},e.prototype.nack=function(e,t,r){return void 0===r&&(r={}),r=Object.assign({},r),this._connectedVersion===s.Versions.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"NACK",headers:r})},e}();t.StompHandler=c},"./src/stomp-headers.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.StompHeaders=n},"./src/stomp-subscription.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.StompSubscription=n},"./src/versions.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.versions=e}return e.prototype.supportedVersions=function(){return this.versions.join(",")},e.prototype.protocolVersions=function(){return this.versions.map(function(e){return"v"+e.replace(".","")+".stomp"})},e.V1_0="1.0",e.V1_1="1.1",e.V1_2="1.2",e.default=new e([e.V1_0,e.V1_1,e.V1_2]),e}();t.Versions=n},"./src/web-socket-state.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.WebSocketState||(t.WebSocketState={}))},0:function(e,t,r){e.exports=r("./src/index.ts")}})},e.exports=n()},function(e,t,r){var n;!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],s=r.document,a=Object.getPrototypeOf,c=o.slice,u=o.concat,l=o.push,h=o.indexOf,d={},p=d.toString,f=d.hasOwnProperty,g=f.toString,m=g.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},T={type:!0,src:!0,nonce:!0,noModule:!0};function S(e,t,r){var n,i,o=(r=r||s).createElement("script");if(o.text=e,t)for(n in T)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[p.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _(e){var t=!!e&&"length"in e&&e.length,r=C(e);return!y(e)&&!b(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.4.1",constructor:w,length:0,toArray:function(){return c.call(this)},get:function(e){return null==e?c.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},w.extend=w.fn.extend=function(){var e,t,r,n,i,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(u&&n&&(w.isPlainObject(n)||(i=Array.isArray(n)))?(r=s[t],o=i&&!Array.isArray(r)?[]:i||w.isPlainObject(r)?r:{},i=!1,s[t]=w.extend(u,o,n)):void 0!==n&&(s[t]=n));return s},w.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==p.call(e))&&(!(t=a(e))||"function"==typeof(r=f.call(t,"constructor")&&t.constructor)&&g.call(r)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){S(e,{nonce:t&&t.nonce})},each:function(e,t){var r,n=0;if(_(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(E,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(_(Object(e))?w.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:h.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,s=!r;i<o;i++)!t(e[i],i)!==s&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,s=[];if(_(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return u.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=o[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});var A=function(e){var t,r,n,i,o,s,a,c,u,l,h,d,p,f,g,m,v,y,b,T="sizzle"+1*new Date,S=e.document,C=0,w=0,E=ce(),_=ce(),A=ce(),x=ce(),R=function(e,t){return e===t&&(h=!0),0},I={}.hasOwnProperty,O=[],N=O.pop,D=O.push,P=O.push,k=O.slice,U=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",q="\\["+j+"*("+L+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+j+"*\\]",M=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),B=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),G=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp(j+"|>"),K=new RegExp(M),Y=new RegExp("^"+L+"$"),z={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),re=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){d()},se=Te(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{P.apply(O=k.call(S.childNodes),S.childNodes),O[S.childNodes.length].nodeType}catch(e){P={apply:O.length?function(e,t){D.apply(e,k.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var o,a,u,l,h,f,v,y=t&&t.ownerDocument,C=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return n;if(!i&&((t?t.ownerDocument||t:S)!==p&&d(t),t=t||p,g)){if(11!==C&&(h=Z.exec(e)))if(o=h[1]){if(9===C){if(!(u=t.getElementById(o)))return n;if(u.id===o)return n.push(u),n}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return n.push(u),n}else{if(h[2])return P.apply(n,t.getElementsByTagName(e)),n;if((o=h[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(o)),n}if(r.qsa&&!x[e+" "]&&(!m||!m.test(e))&&(1!==C||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===C&&V.test(e)){for((l=t.getAttribute("id"))?l=l.replace(ne,ie):t.setAttribute("id",l=T),a=(f=s(e)).length;a--;)f[a]="#"+l+" "+be(f[a]);v=f.join(","),y=ee.test(e)&&ve(t.parentNode)||t}try{return P.apply(n,y.querySelectorAll(v)),n}catch(t){x(e,!0)}finally{l===T&&t.removeAttribute("id")}}}return c(e.replace(B,"$1"),t,n,i)}function ce(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function ue(e){return e[T]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function de(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(r,n){for(var i,o=e([],r.length,t),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},o=ae.isXML=function(e){var t=e.namespaceURI,r=(e.ownerDocument||e).documentElement;return!$.test(t||r&&r.nodeName||"HTML")},d=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:S;return s!==p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!o(p),S!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),r.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=le(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=Q.test(p.getElementsByClassName),r.getById=le(function(e){return f.appendChild(e).id=T,!p.getElementsByName||!p.getElementsByName(T).length}),r.getById?(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(r.qsa=Q.test(p.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+H+")"),e.querySelectorAll("[id~="+T+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(r.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){r.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",M)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(f.compareDocumentPosition),b=t||Q.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===S&&b(S,e)?-1:t===p||t.ownerDocument===S&&b(S,t)?1:l?U(l,e)-U(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===p?-1:t===p?1:i?-1:o?1:l?U(l,e)-U(l,t):0;if(i===o)return de(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;s[n]===a[n];)n++;return n?de(s[n],a[n]):s[n]===S?-1:a[n]===S?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),r.matchesSelector&&g&&!x[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){x(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var i=n.attrHandle[t.toLowerCase()],o=i&&I.call(n.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:r.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(ne,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,o=0;if(h=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(R),h){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return l=null,e},i=ae.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},(n=ae.selectors={cacheLength:50,createPseudo:ue,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&K.test(r)&&(t=s(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(F," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,c){var u,l,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a,b=!1;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(p=(u=(l=(h=(d=m)[T]||(d[T]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===C&&u[1])&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){l[e]=[C,p,b];break}}else if(y&&(b=p=(u=(l=(h=(d=t)[T]||(d[T]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===C&&u[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((l=(h=d[T]||(d[T]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[C,b]),d!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[T]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,r){for(var n,o=i(e,t),s=o.length;s--;)e[n=U(e,o[s])]=!(r[n]=o[s])}):function(e){return i(e,0,r)}):i}},pseudos:{not:ue(function(e){var t=[],r=[],n=a(e.replace(B,"$1"));return n[T]?ue(function(e,t,r,i){for(var o,s=n(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,n(t,null,o,r),t[0]=null,!r.pop()}}),has:ue(function(e){return function(t){return ae(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,re),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ue(function(e){return Y.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,r){return[r<0?r+t:r]}),even:me(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:me(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:me(function(e,t,r){for(var n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e}),gt:me(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function Te(e,t,r){var n=t.dir,i=t.next,o=i||n,s=r&&"parentNode"===o,a=w++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||s)return e(t,r,i);return!1}:function(t,r,c){var u,l,h,d=[C,a];if(c){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,r,c))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(l=(h=t[T]||(t[T]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=l[o])&&u[0]===C&&u[1]===a)return d[2]=u[2];if(l[o]=d,d[2]=e(t,r,c))return!0}return!1}}function Se(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function Ce(e,t,r,n,i){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(r&&!r(o,n,i)||(s.push(o),u&&t.push(a)));return s}function we(e,t,r,n,i,o){return n&&!n[T]&&(n=we(n)),i&&!i[T]&&(i=we(i,o)),ue(function(o,s,a,c){var u,l,h,d=[],p=[],f=s.length,g=o||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:Ce(g,d,e,a,c),v=r?i||(o?e:f||n)?[]:s:m;if(r&&r(m,v,a,c),n)for(u=Ce(v,p),n(u,[],a,c),l=u.length;l--;)(h=u[l])&&(v[p[l]]=!(m[p[l]]=h));if(o){if(i||e){if(i){for(u=[],l=v.length;l--;)(h=v[l])&&u.push(m[l]=h);i(null,v=[],u,c)}for(l=v.length;l--;)(h=v[l])&&(u=i?U(o,h):d[l])>-1&&(o[u]=!(s[u]=h))}}else v=Ce(v===s?v.splice(f,v.length):v),i?i(null,s,v,c):P.apply(s,v)})}function Ee(e){for(var t,r,i,o=e.length,s=n.relative[e[0].type],a=s||n.relative[" "],c=s?1:0,l=Te(function(e){return e===t},a,!0),h=Te(function(e){return U(t,e)>-1},a,!0),d=[function(e,r,n){var i=!s&&(n||r!==u)||((t=r).nodeType?l(e,r,n):h(e,r,n));return t=null,i}];c<o;c++)if(r=n.relative[e[c].type])d=[Te(Se(d),r)];else{if((r=n.filter[e[c].type].apply(null,e[c].matches))[T]){for(i=++c;i<o&&!n.relative[e[i].type];i++);return we(c>1&&Se(d),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(B,"$1"),r,c<i&&Ee(e.slice(c,i)),i<o&&Ee(e=e.slice(i)),i<o&&be(e))}d.push(r)}return Se(d)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,s=ae.tokenize=function(e,t){var r,i,o,s,a,c,u,l=_[e+" "];if(l)return t?0:l.slice(0);for(a=e,c=[],u=n.preFilter;a;){for(s in r&&!(i=W.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),r=!1,(i=G.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(B," ")}),a=a.slice(r.length)),n.filter)!(i=z[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return t?a.length:a?ae.error(e):_(e,c).slice(0)},a=ae.compile=function(e,t){var r,i=[],o=[],a=A[e+" "];if(!a){for(t||(t=s(e)),r=t.length;r--;)(a=Ee(t[r]))[T]?i.push(a):o.push(a);(a=A(e,function(e,t){var r=t.length>0,i=e.length>0,o=function(o,s,a,c,l){var h,f,m,v=0,y="0",b=o&&[],T=[],S=u,w=o||i&&n.find.TAG("*",l),E=C+=null==S?1:Math.random()||.1,_=w.length;for(l&&(u=s===p||s||l);y!==_&&null!=(h=w[y]);y++){if(i&&h){for(f=0,s||h.ownerDocument===p||(d(h),a=!g);m=e[f++];)if(m(h,s||p,a)){c.push(h);break}l&&(C=E)}r&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=y,r&&y!==v){for(f=0;m=t[f++];)m(b,T,s,a);if(o){if(v>0)for(;y--;)b[y]||T[y]||(T[y]=N.call(c));T=Ce(T)}P.apply(c,T),l&&!o&&T.length>0&&v+t.length>1&&ae.uniqueSort(c)}return l&&(C=E,u=S),b};return r?ue(o):o}(o,i))).selector=e}return a},c=ae.select=function(e,t,r,i){var o,c,u,l,h,d="function"==typeof e&&e,p=!i&&s(e=d.selector||e);if(r=r||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&g&&n.relative[c[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(te,re),t)||[])[0]))return r;d&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(o=z.needsContext.test(e)?0:c.length;o--&&(u=c[o],!n.relative[l=u.type]);)if((h=n.find[l])&&(i=h(u.matches[0].replace(te,re),ee.test(c[0].type)&&ve(t.parentNode)||t))){if(c.splice(o,1),!(e=i.length&&be(c)))return P.apply(r,i),r;break}}return(d||a(e,p))(i,t,!g,r,!t||ee.test(e)&&ve(t.parentNode)||t),r},r.sortStable=T.split("").sort(R).join("")===T,r.detectDuplicates=!!h,d(),r.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||he(H,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ae}(r);w.find=A,w.expr=A.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=A.uniqueSort,w.text=A.getText,w.isXMLDoc=A.isXML,w.contains=A.contains,w.escapeSelector=A.escape;var x=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(r))break;n.push(e)}return n},R=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},I=w.expr.match.needsContext;function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,r){return y(t)?w.grep(e,function(e,n){return!!t.call(e,n,e)!==r}):t.nodeType?w.grep(e,function(e){return e===t!==r}):"string"!=typeof t?w.grep(e,function(e){return h.call(t,e)>-1!==r}):w.filter(t,e,r)}w.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?w.find.matchesSelector(n,e)?[n]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<n;t++)if(w.contains(i[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)w.find(e,i[t],r);return n>1?w.uniqueSort(r):r},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&I.test(e)?w(e):e||[],!1).length}});var P,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),N.test(n[1])&&w.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=s.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==r.ready?r.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,P=w(s);var U=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,i=this.length,o=[],s="string"!=typeof e&&w(e);if(!I.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&w.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?h.call(w(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,r){return x(e,"parentNode",r)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,r){return x(e,"nextSibling",r)},prevUntil:function(e,t,r){return x(e,"previousSibling",r)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(O(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(r,n){var i=w.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=w.filter(n,i)),this.length>1&&(H[e]||w.uniqueSort(i),U.test(e)&&i.reverse()),this.pushStack(i)}});var L=/[^\x20\t\r\n\f]+/g;function q(e){return e}function M(e){throw e}function F(e,t,r,n){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(r):e&&y(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(L)||[],function(e,r){t[r]=!0}),t}(e):w.extend({},e);var t,r,n,i,o=[],s=[],a=-1,c=function(){for(i=i||e.once,n=t=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},u={add:function(){return o&&(r&&!t&&(a=o.length-1,s.push(r)),function t(r){w.each(r,function(r,n){y(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==C(n)&&t(n)})}(arguments),r&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var r;(r=w.inArray(t,o,r))>-1;)o.splice(r,1),r<=a&&a--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=s=[],r||t||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],s.push(r),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},w.extend({Deferred:function(e){var t=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(r){w.each(t,function(t,n){var i=y(e[n[4]])&&e[n[4]];o[n[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){var o=0;function s(e,t,n,i){return function(){var a=this,c=arguments,u=function(){var r,u;if(!(e<o)){if((r=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(u)?i?u.call(r,s(o,t,q,i),s(o,t,M,i)):(o++,u.call(r,s(o,t,q,i),s(o,t,M,i),s(o,t,q,t.notifyWith))):(n!==q&&(a=void 0,c=[r]),(i||t.resolveWith)(a,c))}},l=i?u:function(){try{u()}catch(r){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(r,l.stackTrace),e+1>=o&&(n!==M&&(a=void 0,c=[r]),t.rejectWith(a,c))}};e?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),r.setTimeout(l))}}return w.Deferred(function(r){t[0][3].add(s(0,r,y(i)?i:q,r.notifyWith)),t[1][3].add(s(0,r,y(e)?e:q)),t[2][3].add(s(0,r,y(n)?n:M))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(t,function(e,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add(function(){n=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,r=t,n=Array(r),i=c.call(arguments),o=w.Deferred(),s=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?c.call(arguments):r,--t||o.resolveWith(n,i)}};if(t<=1&&(F(e,o.done(s(r)).resolve,o.reject,!t),"pending"===o.state()||y(i[r]&&i[r].then)))return o.then();for(;r--;)F(i[r],s(r),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&B.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},w.readyException=function(e){r.setTimeout(function(){throw e})};var W=w.Deferred();function G(){s.removeEventListener("DOMContentLoaded",G),r.removeEventListener("load",G),w.ready()}w.fn.ready=function(e){return W.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||W.resolveWith(s,[w]))}}),w.ready.then=W.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?r.setTimeout(w.ready):(s.addEventListener("DOMContentLoaded",G),r.addEventListener("load",G));var V=function(e,t,r,n,i,o,s){var a=0,c=e.length,u=null==r;if("object"===C(r))for(a in i=!0,r)V(e,t,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,y(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(w(e),r)})),t))for(;a<c;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return i?e:u?t.call(e):c?t(e[0],r):o},K=/^-ms-/,Y=/-([a-z])/g;function z(e,t){return t.toUpperCase()}function $(e){return e.replace(K,"ms-").replace(Y,z)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=w.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[$(t)]=r;else for(n in t)i[$(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map($):(t=$(t))in n?[t]:t.match(L)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||w.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var Q=new X,Z=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(e){}Z.set(e,t,r)}else r=void 0;return r}w.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,r){return Z.access(e,t,r)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,r){return Q.access(e,t,r)},_removeData:function(e,t){Q.remove(e,t)}}),w.fn.extend({data:function(e,t){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf("data-")&&(n=$(n.slice(5)),re(o,n,i[n]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Z.set(this,e)}):V(this,function(t){var r;if(o&&void 0===t)return void 0!==(r=Z.get(o,e))?r:void 0!==(r=re(o,e))?r:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),w.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Q.get(e,t),r&&(!n||Array.isArray(r)?n=Q.access(e,t,w.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=w.queue(e,t),n=r.length,i=r.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,function(){w.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Q.get(e,r)||Q.access(e,r,{empty:w.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",r])})})}}),w.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):void 0===t?this:this.each(function(){var r=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=w.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=Q.get(o[s],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],se=s.documentElement,ae=function(e){return w.contains(e.ownerDocument,e)},ce={composed:!0};se.getRootNode&&(ae=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ce)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===w.css(e,"display")},le=function(e,t,r,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=r.apply(e,n||[]),t)e.style[o]=s[o];return i};function he(e,t,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return w.css(e,t,"")},c=a(),u=r&&r[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ie.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;s--;)w.style(e,t,l+u),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),l/=o;l*=2,w.style(e,t,l+u),r=r||[]}return r&&(l=+l||+c||0,i=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=l,n.end=i)),i}var de={};function pe(e){var t,r=e.ownerDocument,n=e.nodeName,i=de[n];return i||(t=r.body.appendChild(r.createElement(n)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),de[n]=i,i)}function fe(e,t){for(var r,n,i=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(r=n.style.display,t?("none"===r&&(i[o]=Q.get(n,"display")||null,i[o]||(n.style.display="")),""===n.style.display&&ue(n)&&(i[o]=pe(n))):"none"!==r&&(i[o]="none",Q.set(n,"display",r)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ue(this)?w(this).show():w(this).hide()})}});var ge=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&O(e,t)?w.merge([e],r):r}function Te(e,t){for(var r=0,n=e.length;r<n;r++)Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var Se,Ce,we=/<|&#?\w+;/;function Ee(e,t,r,n,i){for(var o,s,a,c,u,l,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===C(o))w.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(me.exec(o)||["",""])[1].toLowerCase(),c=ye[a]||ye._default,s.innerHTML=c[1]+w.htmlPrefilter(o)+c[2],l=c[0];l--;)s=s.lastChild;w.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(n&&w.inArray(o,n)>-1)i&&i.push(o);else if(u=ae(o),s=be(h.appendChild(o),"script"),u&&Te(s),r)for(l=0;o=s[l++];)ve.test(o.type||"")&&r.push(o);return h}Se=s.createDocumentFragment().appendChild(s.createElement("div")),(Ce=s.createElement("input")).setAttribute("type","radio"),Ce.setAttribute("checked","checked"),Ce.setAttribute("name","t"),Se.appendChild(Ce),v.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue;var _e=/^key/,Ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function Ie(){return!1}function Oe(e,t){return e===function(){try{return s.activeElement}catch(e){}}()==("focus"===t)}function Ne(e,t,r,n,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Ne(e,a,r,n,t[a],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ie;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return w().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,n,r)})}function De(e,t,r){r?(Q.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var n,i,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=c.call(arguments),Q.set(this,t,o),n=r(this,t),this[t](),o!==(i=Q.get(this,t))||n?Q.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(Q.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&w.event.add(e,t,Re)}w.event={global:{},add:function(e,t,r,n,i){var o,s,a,c,u,l,h,d,p,f,g,m=Q.get(e);if(m)for(r.handler&&(r=(o=r).handler,i=o.selector),i&&w.find.matchesSelector(se,i),r.guid||(r.guid=w.guid++),(c=m.events)||(c=m.events={}),(s=m.handle)||(s=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(L)||[""]).length;u--;)p=g=(a=xe.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=w.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=w.event.special[p]||{},l=w.extend({type:p,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=c[p])||((d=c[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),w.event.global[p]=!0)},remove:function(e,t,r,n,i){var o,s,a,c,u,l,h,d,p,f,g,m=Q.hasData(e)&&Q.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(L)||[""]).length;u--;)if(p=g=(a=xe.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},d=c[p=(n?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)l=d[o],!i&&g!==l.origType||r&&r.guid!==l.guid||a&&!a.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,h.remove&&h.remove.call(e,l));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||w.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)w.event.remove(e,p+t[u],r,n,!0);w.isEmptyObject(c)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,s,a=w.event.fix(e),c=new Array(arguments.length),u=(Q.get(this,"events")||{})[a.type]||[],l=w.event.special[a.type]||{};for(c[0]=a,t=1;t<arguments.length;t++)c[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(s=w.event.handlers.call(this,a,u),t=0;(i=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,n,i,o,s,a=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},r=0;r<c;r++)void 0===s[i=(n=t[r]).selector+" "]&&(s[i]=n.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),s[i]&&o.push(n);o.length&&a.push({elem:u,handlers:o})}return u=this,c<t.length&&a.push({elem:u,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&O(t,"input")&&De(t,"click",Re),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&O(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&O(t,"input")&&Q.get(t,"click")||O(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ae.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return De(this,e,Oe),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||w.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),w.fn.extend({on:function(e,t,r,n){return Ne(this,e,t,r,n)},one:function(e,t,r,n){return Ne(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,w(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ie),this.each(function(){w.event.remove(this,e,r,t)})}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var r,n,i,o,s,a,c,u;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),s=Q.set(t,o),u=o.events))for(i in delete s.handle,s.events={},u)for(r=0,n=u[i].length;r<n;r++)w.event.add(t,i,u[i][r]);Z.hasData(e)&&(a=Z.access(e),c=w.extend({},a),Z.set(t,c))}}function Fe(e,t,r,n){t=u.apply([],t);var i,o,s,a,c,l,h=0,d=e.length,p=d-1,f=t[0],g=y(f);if(g||d>1&&"string"==typeof f&&!v.checkClone&&Ue.test(f))return e.each(function(i){var o=e.eq(i);g&&(t[0]=f.call(this,i,o.html())),Fe(o,t,r,n)});if(d&&(o=(i=Ee(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(a=(s=w.map(be(i,"script"),Le)).length;h<d;h++)c=i,h!==p&&(c=w.clone(c,!0,!0),a&&w.merge(s,be(c,"script"))),r.call(e[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,w.map(s,qe),h=0;h<a;h++)c=s[h],ve.test(c.type||"")&&!Q.access(c,"globalEval")&&w.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):S(c.textContent.replace(He,""),c,l))}return e}function Be(e,t,r){for(var n,i=t?w.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||w.cleanData(be(n)),n.parentNode&&(r&&ae(n)&&Te(be(n,"script")),n.parentNode.removeChild(n));return e}w.extend({htmlPrefilter:function(e){return e.replace(Pe,"<$1></$2>")},clone:function(e,t,r){var n,i,o,s,a,c,u,l=e.cloneNode(!0),h=ae(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(s=be(l),n=0,i=(o=be(e)).length;n<i;n++)a=o[n],c=s[n],u=void 0,"input"===(u=c.nodeName.toLowerCase())&&ge.test(a.type)?c.checked=a.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=a.defaultValue);if(t)if(r)for(o=o||be(e),s=s||be(l),n=0,i=o.length;n<i;n++)Me(o[n],s[n]);else Me(e,l);return(s=be(l,"script")).length>0&&Te(s,!h&&be(e,"script")),l},cleanData:function(e){for(var t,r,n,i=w.event.special,o=0;void 0!==(r=e[o]);o++)if(J(r)){if(t=r[Q.expando]){if(t.events)for(n in t.events)i[n]?w.event.remove(r,n):w.removeEvent(r,n,t.handle);r[Q.expando]=void 0}r[Z.expando]&&(r[Z.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return V(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return V(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ye[(me.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(w.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var r=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(be(this)),r&&r.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var r,n=[],i=w(e),o=i.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),w(i[s])[t](r),l.apply(n,r.get());return this.pushStack(n)}});var We=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Ge=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ve=new RegExp(oe.join("|"),"i");function Ke(e,t,r){var n,i,o,s,a=e.style;return(r=r||Ge(e))&&(""!==(s=r.getPropertyValue(t)||r[t])||ae(e)||(s=w.style(e,t)),!v.pixelBoxStyles()&&We.test(s)&&Ve.test(t)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(u).appendChild(l);var e=r.getComputedStyle(l);n="1%"!==e.top,c=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),se.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,a,c,u=s.createElement("div"),l=s.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o}}))}();var ze=["Webkit","Moz","ms"],$e=s.createElement("div").style,Je={};function Xe(e){var t=w.cssProps[e]||Je[e];return t||(e in $e?e:Je[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=ze.length;r--;)if((e=ze[r]+t)in $e)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,Ze=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,r){var n=ie.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function nt(e,t,r,n,i,o){var s="width"===t?1:0,a=0,c=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(c+=w.css(e,r+oe[s],!0,i)),n?("content"===r&&(c-=w.css(e,"padding"+oe[s],!0,i)),"margin"!==r&&(c-=w.css(e,"border"+oe[s]+"Width",!0,i))):(c+=w.css(e,"padding"+oe[s],!0,i),"padding"!==r?c+=w.css(e,"border"+oe[s]+"Width",!0,i):a+=w.css(e,"border"+oe[s]+"Width",!0,i));return!n&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))||0),c}function it(e,t,r){var n=Ge(e),i=(!v.boxSizingReliable()||r)&&"border-box"===w.css(e,"boxSizing",!1,n),o=i,s=Ke(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(s)){if(!r)return s;s="auto"}return(!v.boxSizingReliable()&&i||"auto"===s||!parseFloat(s)&&"inline"===w.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,n),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+nt(e,t,r||(i?"border":"content"),o,n,s)+"px"}function ot(e,t,r,n,i){return new ot.prototype.init(e,t,r,n,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ke(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=$(t),c=Ze.test(t),u=e.style;if(c||(t=Xe(a)),s=w.cssHooks[t]||w.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:u[t];"string"===(o=typeof r)&&(i=ie.exec(r))&&i[1]&&(r=he(e,t,i),o="number"),null!=r&&r==r&&("number"!==o||c||(r+=i&&i[3]||(w.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,n))||(c?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var i,o,s,a=$(t);return Ze.test(t)||(t=Xe(a)),(s=w.cssHooks[t]||w.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,r)),void 0===i&&(i=Ke(e,t,n)),"normal"===i&&t in tt&&(i=tt[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,r,n){if(r)return!Qe.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,t,n):le(e,et,function(){return it(e,t,n)})},set:function(e,r,n){var i,o=Ge(e),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===w.css(e,"boxSizing",!1,o),c=n?nt(e,t,n,a,o):0;return a&&s&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-nt(e,t,"border",!1,o)-.5)),c&&(i=ie.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=w.css(e,t)),rt(0,r,c)}}}),w.cssHooks.marginLeft=Ye(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+oe[n]+t]=o[n]||o[n-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=rt)}),w.fn.extend({css:function(e,t){return V(this,function(e,t,r){var n,i,o={},s=0;if(Array.isArray(t)){for(n=Ge(e),i=t.length;s<i;s++)o[t[s]]=w.css(e,t[s],!1,n);return o}return void 0!==r?w.style(e,t,r):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(w.cssNumber[r]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,r=ot.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=ot.prototype.init,w.fx.step={};var st,at,ct=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){at&&(!1===s.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(lt):r.setTimeout(lt,w.fx.interval),w.fx.tick())}function ht(){return r.setTimeout(function(){st=void 0}),st=Date.now()}function dt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=oe[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,r){for(var n,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,t,e))return n}function ft(e,t,r){var n,i,o=0,s=ft.prefilters.length,a=w.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=st||ht(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(n);return a.notifyWith(e,[u,n,r]),n<1&&s?r:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},r),originalProperties:t,originalOptions:r,startTime:st||ht(),duration:r.duration,tweens:[],createTween:function(t,r){var n=w.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var r,n,i,o,s;for(r in e)if(i=t[n=$(r)],o=e[r],Array.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(s=w.cssHooks[n])&&"expand"in s)for(r in o=s.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(l,u.opts.specialEasing);o<s;o++)if(n=ft.prefilters[o].call(u,e,l,u.opts))return y(n.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return w.map(l,pt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ft,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return he(r.elem,e,ie.exec(t),r),r}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(L);for(var r,n=0,i=e.length;n<i;n++)r=e[n],ft.tweeners[r]=ft.tweeners[r]||[],ft.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,s,a,c,u,l,h="width"in t||"height"in t,d=this,p={},f=e.style,g=e.nodeType&&ue(e),m=Q.get(e,"fxshow");for(n in r.queue||(null==(s=w._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,w.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[n],ct.test(i)){if(delete t[n],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||w.style(e,n)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(p))for(n in h&&1===e.nodeType&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=Q.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(fe([e],!0),u=e.style.display||u,l=w.css(e,"display"),fe([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(d.done(function(){f.display=u}),null==u&&(l=f.display,u="none"===l?"":l)),f.display="inline-block")),r.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]})),c=!1,p)c||(m?"hidden"in m&&(g=m.hidden):m=Q.access(e,"fxshow",{display:u}),o&&(m.hidden=!g),g&&fe([e],!0),d.done(function(){for(n in g||fe([e]),Q.remove(e,"fxshow"),p)w.style(e,n,p[n])})),c=pt(g?m[n]:0,n,d),n in m||(m[n]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),w.speed=function(e,t,r){var n=e&&"object"==typeof e?w.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in w.fx.speeds?n.duration=w.fx.speeds[n.duration]:n.duration=w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=w.isEmptyObject(e),o=w.speed(t,r,n),s=function(){var t=ft(this,w.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,s=Q.get(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&ut.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Q.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=w.timers,s=n?n.length:0;for(r.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),w.each(["toggle","show","hide"],function(e,t){var r=w.fn[t];w.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(dt(t,!0),e,n,i)}}),w.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),w.timers=[],w.fx.tick=function(){var e,t=0,r=w.timers;for(st=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||w.fx.stop(),st=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){at||(at=!0,lt())},w.fx.stop=function(){at=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,t){return e=w.fx&&w.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var gt,mt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?w.prop(e,t,r):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?gt:void 0)),void 0!==r?null===r?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=w.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&O(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(L);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),gt={set:function(e,t,r){return!1===t?w.removeAttr(e,r):e.setAttribute(r,r),r}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var r=mt[t]||w.find.attr;mt[t]=function(e,t,n){var i,o,s=t.toLowerCase();return n||(o=mt[s],mt[s]=i,i=null!=r(e,t,n)?s:null,mt[s]=o),i}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function bt(e){return(e.match(L)||[]).join(" ")}function Tt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(L)||[]}w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,r,n,i,o,s,a,c=0;if(y(e))return this.each(function(t){w(this).addClass(e.call(this,t,Tt(this)))});if((t=St(e)).length)for(;r=this[c++];)if(i=Tt(r),n=1===r.nodeType&&" "+bt(i)+" "){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(a=bt(n))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,n,i,o,s,a,c=0;if(y(e))return this.each(function(t){w(this).removeClass(e.call(this,t,Tt(this)))});if(!arguments.length)return this.attr("class","");if((t=St(e)).length)for(;r=this[c++];)if(i=Tt(r),n=1===r.nodeType&&" "+bt(i)+" "){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(a=bt(n))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(r){w(this).toggleClass(e.call(this,r,Tt(this),t),t)}):this.each(function(){var t,i,o,s;if(n)for(i=0,o=w(this),s=St(e);t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==r||((t=Tt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+bt(Tt(r))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;w.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=y(e),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(Ct,""):null==r?"":r:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:bt(w.text(e))}},select:{get:function(e){var t,r,n,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?o+1:i.length;for(n=o<0?c:s?o:0;n<c;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!O(r.parentNode,"optgroup"))){if(t=w(r).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=w.makeArray(t),s=i.length;s--;)((n=i[s]).selected=w.inArray(w.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},v.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(e,t,n,i){var o,a,c,u,l,h,d,p,g=[n||s],m=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(a=p=c=n=n||s,3!==n.nodeType&&8!==n.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[w.expando]?e:new w.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:w.makeArray(t,[e]),d=w.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!b(n)){for(u=d.delegateType||m,wt.test(u+m)||(a=a.parentNode);a;a=a.parentNode)g.push(a),c=a;c===(n.ownerDocument||s)&&g.push(c.defaultView||c.parentWindow||r)}for(o=0;(a=g[o++])&&!e.isPropagationStopped();)p=a,e.type=o>1?u:d.bindType||m,(h=(Q.get(a,"events")||{})[e.type]&&Q.get(a,"handle"))&&h.apply(a,t),(h=l&&a[l])&&h.apply&&J(a)&&(e.result=h.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),t)||!J(n)||l&&y(n[m])&&!b(n)&&((c=n[l])&&(n[l]=null),w.event.triggered=m,e.isPropagationStopped()&&p.addEventListener(m,Et),n[m](),e.isPropagationStopped()&&p.removeEventListener(m,Et),w.event.triggered=void 0,c&&(n[l]=c)),e.result}},simulate:function(e,t,r){var n=w.extend(new w.Event,r,{type:e,isSimulated:!0});w.event.trigger(n,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return w.event.trigger(e,t,r,!0)}}),v.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=Q.access(n,t);i||n.addEventListener(e,r,!0),Q.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=Q.access(n,t)-1;i?Q.access(n,t,i):(n.removeEventListener(e,r,!0),Q.remove(n,t))}}});var _t=r.location,At=Date.now(),xt=/\?/;w.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),t};var Rt=/\[\]$/,It=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,r,n){var i;if(Array.isArray(t))w.each(t,function(t,i){r||Rt.test(e)?n(e,i):Dt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)});else if(r||"object"!==C(t))n(e,t);else for(i in t)Dt(e+"["+i+"]",t[i],r,n)}w.param=function(e,t){var r,n=[],i=function(e,t){var r=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(r in e)Dt(r,e[r],t,i);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Nt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!ge.test(e))}).map(function(e,t){var r=w(this).val();return null==r?null:Array.isArray(r)?w.map(r,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:r.replace(It,"\r\n")}}).get()}});var Pt=/%20/g,kt=/#.*$/,Ut=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:GET|HEAD)$/,Lt=/^\/\//,qt={},Mt={},Ft="*/".concat("*"),Bt=s.createElement("a");function Wt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(L)||[];if(y(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Gt(e,t,r,n){var i={},o=e===Mt;function s(a){var c;return i[a]=!0,w.each(e[a]||[],function(e,a){var u=a(t,r,n);return"string"!=typeof u||o||i[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),c}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Vt(e,t){var r,n,i=w.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&w.extend(!0,e,n),e}Bt.href=_t.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:Wt(qt),ajaxTransport:Wt(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,a,c,u,l,h,d,p,f=w.ajaxSetup({},t),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=f.statusCode||{},T={},S={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Ht.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(e,t){return null==l&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)E.always(e[E.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),_(0,t),this}};if(v.promise(E),f.url=((e||f.url||_t.href)+"").replace(Lt,_t.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(L)||[""],null==f.crossDomain){u=s.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Gt(qt,f,t,E),l)return E;for(d in(h=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!jt.test(f.type),i=f.url.replace(kt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(p=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(xt.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Ut,"$1"),p=(xt.test(i)?"&":"?")+"_="+At+++p),f.url=i+p),f.ifModified&&(w.lastModified[i]&&E.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&E.setRequestHeader("If-None-Match",w.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ft+"; q=0.01":""):f.accepts["*"]),f.headers)E.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,E,f)||l))return E.abort();if(C="abort",y.add(f.complete),E.done(f.success),E.fail(f.error),n=Gt(Mt,f,t,E)){if(E.readyState=1,h&&m.trigger("ajaxSend",[E,f]),l)return E;f.async&&f.timeout>0&&(c=r.setTimeout(function(){E.abort("timeout")},f.timeout));try{l=!1,n.send(T,_)}catch(e){if(l)throw e;_(-1,e)}}else _(-1,"No Transport");function _(e,t,s,a){var u,d,p,T,S,C=t;l||(l=!0,c&&r.clearTimeout(c),n=void 0,o=a||"",E.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(T=function(e,t,r){for(var n,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){c.unshift(i);break}if(c[0]in r)o=c[0];else{for(i in r){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),r[o]}(f,E,s)),T=function(e,t,r,n){var i,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=u[c+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(f,T,E,u),u?(f.ifModified&&((S=E.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=S),(S=E.getResponseHeader("etag"))&&(w.etag[i]=S)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=T.state,d=T.data,u=!(p=T.error))):(p=C,!e&&C||(C="error",e<0&&(e=0))),E.status=e,E.statusText=(t||C)+"",u?v.resolveWith(g,[d,C,E]):v.rejectWith(g,[E,C,p]),E.statusCode(b),b=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[E,f,u?d:p]),y.fireWith(g,[E,C]),h&&(m.trigger("ajaxComplete",[E,f]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,r){return w.get(e,t,r,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,r,n,i){return y(r)&&(i=i||n,n=r,r=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:r,success:n},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e,t){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(r){w(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},Yt=w.ajaxSettings.xhr();v.cors=!!Yt&&"withCredentials"in Yt,v.ajax=Yt=!!Yt,w.ajaxTransport(function(e){var t,n;if(v.cors||Yt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Kt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){r&&r()}}});var zt,$t=[],Jt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||w.expando+"_"+At++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,s,a=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Jt,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||w.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always(function(){void 0===o?w(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,$t.push(i)),s&&y(o)&&o(s[0]),s=o=void 0}),"script"}),v.createHTMLDocument=((zt=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),w.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(v.createHTMLDocument?((n=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(n)):t=s),o=!r&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var n,i,o},w.fn.load=function(e,t,r){var n,i,o,s=this,a=e.indexOf(" ");return a>-1&&(n=bt(e.slice(a)),e=e.slice(0,a)),y(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?w("<div>").append(w.parseHTML(e)).find(n):e)}).always(r&&function(e,t){s.each(function(){r.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,r){var n,i,o,s,a,c,u=w.css(e,"position"),l=w(e),h={};"static"===u&&(e.style.position="relative"),a=l.offset(),o=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(s=(n=l.position()).top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),y(t)&&(t=t.call(e,r,w.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):l.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===w.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(n,"marginTop",!0),left:t.left-i.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||se})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;w.fn[e]=function(n){return V(this,function(e,n,i){var o;if(b(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):e[n]=i},e,n,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=Ye(v.pixelPosition,function(e,r){if(r)return r=Ke(e,t),We.test(r)?w(e).position()[t]+"px":r})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){w.fn[n]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===o?"margin":"border");return V(this,function(t,r,i){var o;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,r,a):w.style(t,r,i,a)},t,s?i:void 0,s)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),w.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),y(e))return n=c.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(c.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=O,w.isFunction=y,w.isWindow=b,w.camelCase=$,w.type=C,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return w}.apply(t,[]))||(e.exports=n);var Xt=r.jQuery,Qt=r.$;return w.noConflict=function(e){return r.$===w&&(r.$=Qt),e&&r.jQuery===w&&(r.jQuery=Xt),w},i||(r.jQuery=r.$=w),w})},function(e,t,r){"use strict";(function(t){var n=r(74);e.exports=r(91)(n),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,r(1))},function(e,t,r){"use strict";e.exports=[r(75),r(80),r(50),r(51),r(30)(r(51)),r(55),r(30)(r(55)),r(56),r(87),r(30)(r(56)),r(88)]},function(e,t,r){"use strict";var n=r(11),i=r(6),o=r(0),s=r(4).EventEmitter,a=r(79),c=function(){};function u(e,t,r){if(!u.enabled())throw new Error("Transport created when disabled");s.call(this),c("constructor",e);var o=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],r),this.ws.onmessage=function(e){c("message event",e.data),o.emit("message",e.data)},this.unloadRef=n.unloadAdd(function(){c("unload"),o.ws.close()}),this.ws.onclose=function(e){c("close event",e.code,e.reason),o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){c("error event",e),o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(u,s),u.prototype.send=function(e){var t="["+e+"]";c("send",t),this.ws.send(t)},u.prototype.close=function(){c("close");var e=this.ws;this._cleanup(),e&&e.close()},u.prototype._cleanup=function(){c("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},u.enabled=function(){return c("enabled"),!!a},u.transportName="websocket",u.roundTrips=2,e.exports=u},function(e,t,r){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var r=new Uint8Array(e);return t.crypto.getRandomValues(r),r}:e.exports.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(256*Math.random());return t}}).call(this,r(1))},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,r){"use strict";var n,i=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(i.call(e,o)){if((r=e[o])||null!==r&&r!==n&&!isNaN(r)||(r=""),o=encodeURIComponent(o),r=encodeURIComponent(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);){var i=o(t[1]),s=o(t[2]);null===i||null===s||i in n||(n[i]=s)}return n}},function(e,t,r){"use strict";(function(t){var r=t.WebSocket||t.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(16),o=r(23),s=r(24),a=r(17),c=r(18);function u(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}n(u,i),u.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&s.enabled)},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!t.document,e.exports=u}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(4).EventEmitter,o=function(){};function s(e,t){o(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}n(s,i),s.prototype.send=function(e){o("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){o("sendScheduleWait");var e,t=this;this.sendStop=function(){o("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){o("timeout"),t.sendStop=null,t.sendSchedule()},25)},s.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(o("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},s.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},s.prototype.close=function(){o("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=s},function(e,t,r){"use strict";var n=r(0),i=r(4).EventEmitter,o=function(){};function s(e,t,r){o(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=r,this._scheduleReceiver()}n(s,i),s.prototype._scheduleReceiver=function(){o("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){o("message",t),e.emit("message",t)}),t.once("close",function(r,n){o("close",r,n,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===n?e._scheduleReceiver():(e.emit("close",r||1006,n),e.removeAllListeners()))})},s.prototype.abort=function(){o("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=s},function(e,t,r){"use strict";var n=r(0),i=r(4).EventEmitter,o=r(52),s=function(){};function a(e){s(e),i.call(this);var t=this,r=this.es=new o(e);r.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},r.onerror=function(e){s("error",r.readyState,e);var n=2!==r.readyState?"network":"permanent";t._cleanup(),t._close(n)}}n(a,i),a.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},a.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},e.exports=a},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(19),o=r(6),s=r(4).EventEmitter,a=r(15),c=function(){};function u(e){c(e),s.call(this);var r=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c("using htmlfile",u.htmlfileEnabled);var n=u.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){c("start"),r.iframeObj.loaded()},message:function(e){c("message",e),r.emit("message",e)},stop:function(){c("stop"),r._cleanup(),r._close("network")}},this.iframeObj=n(e,function(){c("callback"),r._cleanup(),r._close("permanent")})}n(u,s),u.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},u.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},u.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},u.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in t)try{u.htmlfileEnabled=!!new t[l]("htmlfile")}catch(e){}u.enabled=u.htmlfileEnabled||i.iframeEnabled,e.exports=u}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(50),s=r(23),a=r(29);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}n(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(48),o=r(89),s=r(90);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}n(a,i),a.enabled=function(){return!!t.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n=r(19),i=r(15),o=r(18),s=r(6),a=r(0),c=r(4).EventEmitter,u=function(){};function l(e){u(e);var r=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));t[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout(function(){u("timeout"),r._abort(new Error("JSONP script loaded abnormally (timeout)"))},l.timeout)}a(l,c),l.prototype.abort=function(){if(u("abort"),t[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){u("_callback",e),this._cleanup(),this.aborting||(e&&(u("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){u("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(u("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[n.WPrefix][this.id]},l.prototype._scriptError=function(){u("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},l.scriptErrorTimeout))},l.prototype._createScript=function(e){u("_createScript",e);var r,n=this,s=this.script=t.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){u("onload"),n._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(u("onreadystatechange",s.readyState),/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){n.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&t.document.attachEvent)if(o.isOpera())(r=this.script2=t.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=r.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(e){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=t.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),r&&a.insertBefore(r,a.firstChild)},e.exports=l}).call(this,r(1))},function(e,t,r){"use strict";(function(t){var n,i,o=r(15),s=r(6),a=function(){};e.exports=function(e,r,c){a(e,r),n||(a("createForm"),(n=t.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(i=t.document.createElement("textarea")).name="d",n.appendChild(i),t.document.body.appendChild(n));var u="a"+o.string(8);n.target=u,n.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+u);var l=function(e){a("createIframe",e);try{return t.document.createElement('<iframe name="'+e+'">')}catch(n){var r=t.document.createElement("iframe");return r.name=e,r}}(u);l.id=u,l.style.display="none",n.appendChild(l);try{i.value=r}catch(e){}n.submit();var h=function(e){a("completed",u,e),l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout(function(){a("cleaning up",u),l.parentNode.removeChild(l),l=null},500),i.value="",c(e))};return l.onerror=function(){a("onerror",u),h()},l.onload=function(){a("onload",u),h()},l.onreadystatechange=function(e){a("onreadystatechange",u,l.readyState,e),"complete"===l.readyState&&h()},function(){a("aborted",u),h(new Error("Aborted"))}}}).call(this,r(1))},function(e,t,r){"use strict";(function(t){r(92);var n,i=r(46),o=r(0),s=r(10),a=r(15),c=r(93),u=r(6),l=r(11),h=r(94),d=r(31),p=r(18),f=r(95),g=r(32),m=r(47),v=r(57),y=r(96),b=r(97),T=r(98),S=function(){};function C(e,t,r){if(!(this instanceof C))return new C(e,t,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=C.CONNECTING,this.extensions="",this.protocol="",(r=r||{}).protocols_whitelist&&f.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{};var n=r.sessionId||8;if("function"==typeof n)this._generateSessionId=n;else{if("number"!=typeof n)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return a.string(n)}}this._server=r.server||a.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https:"===v.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var l=u.getOrigin(v.href);this._origin=l?l.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,S("using url",this.url),this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:u.isOriginEqual(this.url,v.href),sameScheme:u.isSchemeEqual(this.url,v.href)},this._ir=new T(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function w(e){return 1e3===e||e>=3e3&&e<=4999}o(C,m),C.prototype.close=function(e,t){if(e&&!w(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==C.CLOSING&&this.readyState!==C.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},C.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===C.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===C.OPEN&&this._transport.send(c.quote(e))},C.version=r(54),C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._receiveInfo=function(e,t){if(S("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=d.extend(e,this._urlInfo),S("info",e);var r=n.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main,S(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},C.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(S("attempt",e.transportName),e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return S("waiting for body"),this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var r=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),r),S("using timeout",r);var n=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName];S("transport url",n);var o=new e(n,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},C.prototype._transportTimeout=function(){S("_transportTimeout"),this.readyState===C.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},C.prototype._transportMessage=function(e){S("_transportMessage",e);var t,r=this,n=e.slice(0,1),i=e.slice(1);switch(n){case"o":return void this._open();case"h":return this.dispatchEvent(new g("heartbeat")),void S("heartbeat",this.transport)}if(i)try{t=s.parse(i)}catch(e){S("bad json",i)}if(void 0!==t)switch(n){case"a":Array.isArray(t)&&t.forEach(function(e){S("message",r.transport,e),r.dispatchEvent(new b(e))});break;case"m":S("message",this.transport,t),this.dispatchEvent(new b(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else S("empty payload",i)},C.prototype._transportClose=function(e,t){S("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),w(e)||2e3===e||this.readyState!==C.CONNECTING?this._close(e,t):this._connect()},C.prototype._open=function(){S("_open",this._transport.transportName,this.readyState),this.readyState===C.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=C.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open")),S("connected",this.transport)):this._close(1006,"Server lost session")},C.prototype._close=function(e,t,r){S("_close",this.transport,e,t,r,this.readyState);var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===C.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=C.CLOSING,setTimeout(function(){this.readyState=C.CLOSED,n&&this.dispatchEvent(new g("error"));var i=new y("close");i.wasClean=r||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,S("disconnected")}.bind(this),0)},C.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return n=h(e),r(101)(C,e),C}}).call(this,r(1))},function(e,t,r){"use strict";var n,i=Array.prototype,o=Object.prototype,s=Function.prototype,a=String.prototype,c=i.slice,u=o.toString,l=function(e){return"[object Function]"===o.toString.call(e)},h=function(e){return"[object String]"===u.call(e)},d=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();n=d?function(e,t,r,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(e,t,r,n){!n&&t in e||(e[t]=r)};var p=function(e,t,r){for(var i in t)o.hasOwnProperty.call(t,i)&&n(e,i,t[i],r)},f=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function g(){}p(s,{bind:function(e){var t=this;if(!l(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r=c.call(arguments,1),n=Math.max(0,t.length-r.length),i=[],o=0;o<n;o++)i.push("$"+o);var s=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof s){var n=t.apply(this,r.concat(c.call(arguments)));return Object(n)===n?n:this}return t.apply(e,r.concat(c.call(arguments)))});return t.prototype&&(g.prototype=t.prototype,s.prototype=new g,g.prototype=null),s}}),p(Array,{isArray:function(e){return"[object Array]"===u.call(e)}});var m,v,y,b=Object("a"),T="a"!==b[0]||!(0 in b);p(i,{forEach:function(e){var t=f(this),r=T&&h(this)?this.split(""):t,n=arguments[1],i=-1,o=r.length>>>0;if(!l(e))throw new TypeError;for(;++i<o;)i in r&&e.call(n,r[i],i,t)}},(m=i.forEach,v=!0,y=!0,m&&(m.call("foo",function(e,t,r){"object"!=typeof r&&(v=!1)}),m.call([1],function(){y="string"==typeof this},"x")),!(m&&v&&y)));var S=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);p(i,{indexOf:function(e){var t=T&&h(this)?this.split(""):f(this),r=t.length>>>0;if(!r)return-1;var n,i,o=0;for(arguments.length>1&&(n=arguments[1],(i=+n)!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i))),o=i),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in t&&t[o]===e)return o;return-1}},S);var C,w=a.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(C=void 0===/()??/.exec("")[1],a.split=function(e,t){var r=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==u.call(e))return w.call(this,e,t);var n,o,s,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),h=0;for(e=new RegExp(e.source,l+"g"),r+="",C||(n=new RegExp("^"+e.source+"$(?!\\s)",l)),t=void 0===t?-1>>>0:t>>>0;(o=e.exec(r))&&!((s=o.index+o[0].length)>h&&(c.push(r.slice(h,o.index)),!C&&o.length>1&&o[0].replace(n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&i.push.apply(c,o.slice(1)),a=o[0].length,h=s,c.length>=t));)e.lastIndex===o.index&&e.lastIndex++;return h===r.length?!a&&e.test("")||c.push(""):c.push(r.slice(h)),c.length>t?c.slice(0,t):c}):"0".split(void 0,0).length&&(a.split=function(e,t){return void 0===e&&0===t?[]:w.call(this,e,t)});var E=a.substr,_="".substr&&"b"!=="0b".substr(-1);p(a,{substr:function(e,t){return E.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},_)},function(e,t,r){"use strict";var n,i=r(10),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=i.stringify(e);return o.lastIndex=0,o.test(t)?(n||(n=function(e){var t,r={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,function(e){return r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,r}(o)),t.replace(o,function(e){return n[e]})):t}}},function(e,t,r){"use strict";e.exports=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"===e.transportName&&!1===r.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(r)?(e.transportName,n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):e.transportName))}),n}}}},function(e,t,r){"use strict";(function(t){var r={};["log","debug","warn"].forEach(function(e){var n;try{n=t.console&&t.console[e]&&t.console[e].apply}catch(e){}r[e]=n?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:r.log}),e.exports=r}).call(this,r(1))},function(e,t,r){"use strict";var n=r(0),i=r(32);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}n(o,i),e.exports=o},function(e,t,r){"use strict";var n=r(0),i=r(32);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}n(o,i),e.exports=o},function(e,t,r){"use strict";var n=r(4).EventEmitter,i=r(0),o=r(6),s=r(29),a=r(24),c=r(17),u=r(99),l=r(100),h=r(59),d=function(){};function p(e,t){d(e);var r=this;n.call(this),setTimeout(function(){r.doXhr(e,t)},0)}i(p,n),p._getReceiver=function(e,t,r){return r.sameOrigin?new h(t,c):a.enabled?new h(t,a):s.enabled&&r.sameScheme?new h(t,s):l.enabled()?new l(e,t):new h(t,u)},p.prototype.doXhr=function(e,t){var r=this,n=o.addPath(e,"/info");d("doXhr",n),this.xo=p._getReceiver(e,n,t),this.timeoutRef=setTimeout(function(){d("timeout"),r._cleanup(!1),r.emit("finish")},p.timeout),this.xo.once("finish",function(e,t){d("finish",e,t),r._cleanup(!0),r.emit("finish",e,t)})},p.prototype._cleanup=function(e){d("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){d("close"),this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,e.exports=p},function(e,t,r){"use strict";var n=r(4).EventEmitter;function i(){var e=this;n.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},i.timeout)}r(0)(i,n),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},function(e,t,r){"use strict";(function(t){var n=r(4).EventEmitter,i=r(0),o=r(10),s=r(11),a=r(53),c=r(58),u=function(){};function l(e,r){var i=this;n.call(this);var l=function(){var t=i.ifr=new a(c.transportName,r,e);t.once("message",function(e){if(e){var t;try{t=o.parse(e)}catch(t){return u("bad json",e),i.emit("finish"),void i.close()}var r=t[0],n=t[1];i.emit("finish",r,n)}i.close()}),t.once("close",function(){i.emit("finish"),i.close()})};t.document.body?l():s.attachEvent("load",l)}i(l,n),l.enabled=function(){return a.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=l}).call(this,r(1))},function(e,t,r){"use strict";var n=r(6),i=r(11),o=r(10),s=r(102),a=r(58),c=r(19),u=r(57);e.exports=function(e,t){var r,l={};t.forEach(function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)}),l[a.transportName]=a,e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1);i.attachEvent("message",function(i){if(i.source===parent&&(void 0===r&&(r=i.origin),i.origin===r)){var a;try{a=o.parse(i.data)}catch(e){return void i.data}if(a.windowId===c.currentWindowId)switch(a.type){case"s":var h;try{h=o.parse(a.data)}catch(e){a.data;break}var d=h[0],p=h[1],f=h[2],g=h[3];if(d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!n.isOriginEqual(f,u.href)||!n.isOriginEqual(g,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+f+", "+g+")");t=new s(new l[p](f,g));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}}),c.postMessage("s")}}},function(e,t,r){"use strict";var n=r(10),i=r(19);function o(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(e,t){i.postMessage("c",n.stringify([e,t]))},o.prototype._transportMessage=function(e){i.postMessage("t",e)},o.prototype._send=function(e){this._transport.send(e)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=o},function(e,t,r){"use strict";r.r(t);var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e){return"function"==typeof e}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function c(e){setTimeout(function(){throw e},0)}var u={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;c(e)},complete:function(){}},l=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function d(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}d.prototype=Object.create(Error.prototype);var p=d,f=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this._parentOrParents,n=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(o(n))try{n.call(this)}catch(e){t=e instanceof p?g(e.errors):[e]}if(l(i)){s=-1;for(var a=i.length;++s<a;){var c=i[s];if(h(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof p?t=t.concat(g(e.errors)):t.push(e)}}}if(t)throw new p(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function g(e){return e.reduce(function(e,t){return e.concat(t instanceof p?t.errors:t)},[])}var m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(e){function t(r,n,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=u;break;case 1:if(!r){o.destination=u;break}if("object"==typeof r){r instanceof t?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new y(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new y(o,r,n,i)}return o}return i(t,e),t.prototype[m]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(f),y=function(e){function t(t,r,n,i){var s,a=e.call(this)||this;a._parentSubscriber=t;var c=a;return o(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==u&&(o((c=Object.create(r)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=n,a._complete=i,a}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):c(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;c(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;c(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(c(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(v);function b(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof v?n:null}return!0}var T="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w(e)}function w(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:S}var E=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=function(e,t,r){if(e){if(e instanceof v)return e;if(e[m])return e[m]()}return e||t||r?new v(e,t,r):new v(u)}(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),b(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=_(t))(function(t,n){var i;i=r.subscribe(function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[T]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:w(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=_(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function _(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function A(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}A.prototype=Object.create(Error.prototype);var x=A,R=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(f),I=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return i(t,e),t}(v),O=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[m]=function(){return new I(this)},t.prototype.lift=function(e){var t=new N(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new x;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new x;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new x;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new x;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new x;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new R(this,e))},t.prototype.asObservable=function(){var e=new E;return e.source=this,e},t.create=function(e,t){return new N(e,t)},t}(E),N=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):f.EMPTY},t}(O);var D=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new P(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),P=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(v),k=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new H(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new D(e));var e},t}(E),U=k.prototype,H=(U._subscribe,U._isComplete,U.getSubject,U.connect,U.refCount,function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(I));var j=function(e){function t(t,r,n){var i=e.call(this)||this;return i.key=t,i.groupSubject=r,i.refCountSubscription=n,i}return i(t,e),t.prototype._subscribe=function(e){var t=new f,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new L(r)),t.add(n.subscribe(e)),t},t}(E),L=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(f),q=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(O),M=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,r){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(f)),F=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(M),B=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}(),W=function(e){function t(r,n){void 0===n&&(n=B.now);var i=e.call(this,r,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(B),G=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(W))(F),V=new E(function(e){return e.complete()});function K(e){return e?function(e){return new E(function(t){return e.schedule(function(){return t.complete()})})}(e):V}function Y(e){return e&&"function"==typeof e.schedule}var z,$=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};function J(e,t){return new E(function(r){var n=new f,i=0;return n.add(t.schedule(function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()})),n})}function X(e,t){return t?J(e,t):new E($(e))}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return Y(r)?(e.pop(),J(e,r)):X(e)}function Z(e,t){return new E(t?function(r){return t.schedule(ee,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function ee(e){var t=e.error;e.subscriber.error(t)}z||(z={});var te=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Q(this.value);case"E":return Z(this.error);case"C":return K()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var re=function(e){function t(t,r,n){void 0===n&&(n=0);var i=e.call(this,t)||this;return i.scheduler=r,i.delay=n,i}return i(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ne(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(te.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(te.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(te.createComplete()),this.unsubscribe()},t}(v),ne=function(){return function(e,t){this.notification=e,this.destination=t}}(),ie=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new oe(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new x;if(this.isStopped||this.hasError?t=f.EMPTY:(this.observers.push(e),t=new R(this,e)),i&&e.add(e=new re(e,i)),r)for(var s=0;s<o&&!e.closed;s++)e.next(n[s]);else for(s=0;s<o&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||G).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(O),oe=function(){return function(e,t){this.time=e,this.value=t}}(),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),f.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),f.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(O),ae=1,ce={};var ue=function(e){var t=ae++;return ce[t]=e,Promise.resolve().then(function(){return function(e){var t=ce[e];t&&t()}(t)}),t},le=function(e){delete ce[e]},he=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=ue(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(le(r),t.scheduled=void 0)},t}(M),de=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(W))(he),pe=new W(M),fe=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(M),ge=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(W))(fe),me=function(e){function t(t,r){void 0===t&&(t=ve),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(W),ve=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return i(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(M);function ye(e){return e}function be(e){return!!e&&(e instanceof E||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function Te(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Te.prototype=Object.create(Error.prototype);var Se=Te;function Ce(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Ce.prototype=Object.create(Error.prototype);var we=Ce;function Ee(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}Ee.prototype=Object.create(Error.prototype);var _e=Ee;function Ae(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new xe(e,t))}}var xe=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Re(e,this.project,this.thisArg))},e}(),Re=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(v);function Ie(e,t,r){if(t){if(!Y(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Ie(e,r).apply(void 0,n).pipe(Ae(function(e){return l(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:r};return new E(function(n){if(r){var a={args:t,subscriber:n,params:s};return r.schedule(Oe,0,a)}if(!i){i=new se;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){b(i)?i.error(e):console.warn(e)}}return i.subscribe(n)})}}function Oe(e){var t=this,r=e.args,n=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new se;try{o.apply(s,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length<=1?e[0]:e;t.add(a.schedule(Ne,0,{value:n,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(n))}function Ne(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function De(e,t,r){if(t){if(!Y(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return De(e,r).apply(void 0,n).pipe(Ae(function(e){return l(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new E(function(n){var o=i.context,s=i.subject;if(r)return r.schedule(Pe,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new se;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?s.error(r):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){b(s)?s.error(e):console.warn(e)}}return s.subscribe(n)})}}function Pe(e){var t=this,r=e.params,n=e.subscriber,i=e.context,o=r.callbackFunc,s=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new se;try{o.apply(i,s.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.shift();if(n)t.add(a.schedule(Ue,0,{err:n,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(ke,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(Ue,0,{err:e,subject:c}))}}this.add(c.subscribe(n))}function ke(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function Ue(e){var t=e.err;e.subject.error(t)}var He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(v),je=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(v);function Le(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var qe=Le(),Me=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Fe(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Be=function(e){if(e&&"function"==typeof e[T])return n=e,function(e){var t=n[T]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Me(e))return $(e);if(Fe(e))return r=e,function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,c),e};if(e&&"function"==typeof e[qe])return t=e,function(e){for(var r=t[qe]();;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add(function(){r.return&&r.return()}),e};var t,r,n,i=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function We(e,t,r,n,i){if(void 0===i&&(i=new je(e,r,n)),!i.closed)return t instanceof E?t.subscribe(i):Be(t)(i)}var Ge={};function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null,n=null;return Y(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),X(e,n).lift(new Ke(r))}var Ke=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ye(e,this.resultSelector))},e}(),Ye=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return i(t,e),t.prototype._next=function(e){this.values.push(Ge),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(We(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===Ge?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(He);function ze(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[T]}(e))return function(e,t){return new E(function(r){var n=new f;return n.add(t.schedule(function(){var i=e[T]();n.add(i.subscribe({next:function(e){n.add(t.schedule(function(){return r.next(e)}))},error:function(e){n.add(t.schedule(function(){return r.error(e)}))},complete:function(){n.add(t.schedule(function(){return r.complete()}))}}))})),n})}(e,t);if(Fe(e))return function(e,t){return new E(function(r){var n=new f;return n.add(t.schedule(function(){return e.then(function(e){n.add(t.schedule(function(){r.next(e),n.add(t.schedule(function(){return r.complete()}))}))},function(e){n.add(t.schedule(function(){return r.error(e)}))})})),n})}(e,t);if(Me(e))return J(e,t);if(function(e){return e&&"function"==typeof e[qe]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new E(function(r){var n,i=new f;return i.add(function(){n&&"function"==typeof n.return&&n.return()}),i.add(t.schedule(function(){n=e[qe](),i.add(t.schedule(function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function $e(e,t){return t?ze(e,t):e instanceof E?e:new E(Be(e))}var Je=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Xe(e,this.project,this.concurrent))},e}(),Xe=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new je(this,void 0,void 0);this.destination.add(n),We(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(He);function Qe(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof r?function(i){return i.pipe(e(function(e,n){return $e(t(e,n)).pipe(Ae(function(t,i){return r(e,t,n,i)}))},n))}:("number"==typeof r&&(n=r),function(e){return e.lift(new Je(t,n))})}(ye,e)}function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Qe(1)(Q.apply(void 0,e))}function et(e){return new E(function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?$e(r):K()).subscribe(t)})}function tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if(l(r))return rt(r,null);if(h(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return rt(n.map(function(e){return r[e]}),n)}}if("function"==typeof e[e.length-1]){var i=e.pop();return rt(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(Ae(function(e){return i.apply(void 0,e)}))}return rt(e,null)}function rt(e,t){return new E(function(r){var n=e.length;if(0!==n)for(var i=new Array(n),o=0,s=0,a=function(a){var c=$e(e[a]),u=!1;r.add(c.subscribe({next:function(e){u||(u=!0,s++),i[a]=e},error:function(e){return r.error(e)},complete:function(){++o!==n&&u||(s===n&&r.next(t?t.reduce(function(e,t,r){return e[t]=i[r],e},{}):i),r.complete())}}))},c=0;c<n;c++)a(c);else r.complete()})}Object.prototype.toString;function nt(e,t,r,n){return o(r)&&(n=r,r=void 0),n?nt(e,t,r).pipe(Ae(function(e){return l(e)?n.apply(void 0,e):n(e)})):new E(function(n){!function e(t,r,n,i,o){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var a=t;t.addEventListener(r,n,o),s=function(){return a.removeEventListener(r,n,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var c=t;t.on(r,n),s=function(){return c.off(r,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var u=t;t.addListener(r,n),s=function(){return u.removeListener(r,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,h=t.length;l<h;l++)e(t[l],r,n,i,o)}i.add(s)}(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function it(e,t,r){return r?it(e,t).pipe(Ae(function(e){return l(e)?r.apply(void 0,e):r(e)})):new E(function(r){var n,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{n=e(i)}catch(e){return void r.error(e)}if(o(t))return function(){return t(i,n)}})}function ot(e,t,r,n,i){var o,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,r=a.iterate,o=a.resultSelector||ye,i=a.scheduler}else void 0===n||Y(n)?(s=e,o=ye,i=n):(s=e,o=n);return new E(function(e){var n=s;if(i)return i.schedule(st,0,{subscriber:e,iterate:r,condition:t,resultSelector:o,state:n});for(;;){if(t){var a=void 0;try{a=t(n)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(n)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{n=r(n)}catch(t){return void e.error(t)}}})}function st(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function at(e,t,r){return void 0===t&&(t=V),void 0===r&&(r=V),et(function(){return e()?t:r})}function ct(e){return!l(e)&&e-parseFloat(e)+1>=0}function ut(e,t){return void 0===e&&(e=0),void 0===t&&(t=pe),(!ct(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=pe),new E(function(r){return r.add(t.schedule(lt,e,{subscriber:r,counter:0,period:e})),r})}function lt(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}function ht(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return Y(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof E?e[0]:Qe(r)(X(e,n))}var dt=new E(S);function pt(){return dt}function ft(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return V;var r=e[0],n=e.slice(1);return 1===e.length&&l(r)?ft.apply(void 0,r):new E(function(e){var t=function(){return e.add(ft.apply(void 0,n).subscribe(e))};return $e(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function gt(e,t){return new E(t?function(r){var n=Object.keys(e),i=new f;return i.add(t.schedule(mt,0,{keys:n,index:0,subscriber:r,subscription:i,obj:e})),i}:function(t){for(var r=Object.keys(e),n=0;n<r.length&&!t.closed;n++){var i=r[n];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function mt(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,o[s]]),i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function vt(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}function yt(e,t){return function(r){return r.lift(new bt(e,t))}}var bt=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Tt(e,this.predicate,this.thisArg))},e}(),Tt=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(v);function St(e,t,r){return[yt(t,r)(new E(Be(e))),yt(vt(t,r))(new E(Be(e)))]}function Ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!l(e[0]))return e[0];e=e[0]}return X(e,void 0).lift(new wt)}var wt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Et(e))},e}(),Et=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=We(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(He);function _t(e,t,r){return void 0===e&&(e=0),new E(function(n){void 0===t&&(t=e,e=0);var i=0,o=e;if(r)return r.schedule(At,0,{index:i,count:t,start:e,subscriber:n});for(;;){if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}})}function At(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}function xt(e,t,r){void 0===e&&(e=0);var n=-1;return ct(t)?n=Number(t)<1?1:Number(t):Y(t)&&(r=t),Y(r)||(r=pe),new E(function(t){var i=ct(e)?e:+e-r.now();return r.schedule(Rt,i,{index:0,period:n,subscriber:t})})}function Rt(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}function It(e,t){return new E(function(r){var n,i;try{n=e()}catch(e){return void r.error(e)}try{i=t(n)}catch(e){return void r.error(e)}var o=(i?$e(i):V).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}function Ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),X(e,void 0).lift(new Nt(r))}var Nt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Dt(e,this.resultSelector))},e}(),Dt=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;l(e)?t.push(new kt(e)):"function"==typeof e[qe]?t.push(new Pt(e[qe]())):t.push(new Ut(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(v),Pt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),kt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[qe]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Ut=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[qe]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return We(this,this.observable,this,t)},t}(He);r.d(t,"Observable",function(){return E}),r.d(t,"ConnectableObservable",function(){return k}),r.d(t,"GroupedObservable",function(){return j}),r.d(t,"observable",function(){return T}),r.d(t,"Subject",function(){return O}),r.d(t,"BehaviorSubject",function(){return q}),r.d(t,"ReplaySubject",function(){return ie}),r.d(t,"AsyncSubject",function(){return se}),r.d(t,"asapScheduler",function(){return de}),r.d(t,"asyncScheduler",function(){return pe}),r.d(t,"queueScheduler",function(){return G}),r.d(t,"animationFrameScheduler",function(){return ge}),r.d(t,"VirtualTimeScheduler",function(){return me}),r.d(t,"VirtualAction",function(){return ve}),r.d(t,"Scheduler",function(){return B}),r.d(t,"Subscription",function(){return f}),r.d(t,"Subscriber",function(){return v}),r.d(t,"Notification",function(){return te}),r.d(t,"NotificationKind",function(){return z}),r.d(t,"pipe",function(){return C}),r.d(t,"noop",function(){return S}),r.d(t,"identity",function(){return ye}),r.d(t,"isObservable",function(){return be}),r.d(t,"ArgumentOutOfRangeError",function(){return Se}),r.d(t,"EmptyError",function(){return we}),r.d(t,"ObjectUnsubscribedError",function(){return x}),r.d(t,"UnsubscriptionError",function(){return p}),r.d(t,"TimeoutError",function(){return _e}),r.d(t,"bindCallback",function(){return Ie}),r.d(t,"bindNodeCallback",function(){return De}),r.d(t,"combineLatest",function(){return Ve}),r.d(t,"concat",function(){return Ze}),r.d(t,"defer",function(){return et}),r.d(t,"empty",function(){return K}),r.d(t,"forkJoin",function(){return tt}),r.d(t,"from",function(){return $e}),r.d(t,"fromEvent",function(){return nt}),r.d(t,"fromEventPattern",function(){return it}),r.d(t,"generate",function(){return ot}),r.d(t,"iif",function(){return at}),r.d(t,"interval",function(){return ut}),r.d(t,"merge",function(){return ht}),r.d(t,"never",function(){return pt}),r.d(t,"of",function(){return Q}),r.d(t,"onErrorResumeNext",function(){return ft}),r.d(t,"pairs",function(){return gt}),r.d(t,"partition",function(){return St}),r.d(t,"race",function(){return Ct}),r.d(t,"range",function(){return _t}),r.d(t,"throwError",function(){return Z}),r.d(t,"timer",function(){return xt}),r.d(t,"using",function(){return It}),r.d(t,"zip",function(){return Ot}),r.d(t,"scheduled",function(){return ze}),r.d(t,"EMPTY",function(){return V}),r.d(t,"NEVER",function(){return dt}),r.d(t,"config",function(){return a})}])});